"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[582],{582:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HomeResponsive)\n/* harmony export */ });\n/* harmony import */ var _Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(804);\n/* harmony import */ var _Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(337);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\nvar HomeResponsive = /*#__PURE__*/function () {\n  function HomeResponsive() {\n    _classCallCheck(this, HomeResponsive);\n\n    this.home = document.getElementById('home-main');\n    this.content = this.home.querySelector('.content');\n    this.isMedium = false;\n    this.isMobile = false;\n    this.mediumCount = 0;\n    this.mobileCount = 0;\n    this.mediumScreenWidth = 901;\n    this.mobileScreenWidth = 601;\n    this.revisionHeadsChildren = [];\n    this.sidebarLeftButton;\n    this.userProfileButton;\n    this.visibleSidebarLeftWidth;\n    this.visibleUserProfileWidth;\n    this.handleResize();\n    window.addEventListener('resize', this.handleResize.bind(this));\n  }\n  /**\r\n   * \r\n   * @param {Event | null} e \r\n   */\n\n\n  _createClass(HomeResponsive, [{\n    key: \"handleResize\",\n    value: function handleResize() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      e === null || e === void 0 ? void 0 : e.preventDefault();\n      var medium = window.innerWidth < this.mediumScreenWidth && window.innerWidth >= this.mobileScreenWidth;\n      var mobile = window.innerWidth < this.mobileScreenWidth;\n\n      if (this.isMedium !== medium) {\n        this.isMedium = medium;\n      } else if (this.isMobile !== mobile) {\n        this.isMobile = mobile;\n      }\n\n      if (this.isMobile) {\n        this.displayMobile();\n      } else if (this.isMedium) {\n        this.displayMediumScreen();\n      } else {\n        this.displayLargeScreen();\n      }\n\n      this.toggleRevisionHeadLabels();\n    }\n  }, {\n    key: \"displayMobile\",\n    value: function displayMobile() {\n      this.mediumCount = 0;\n      this.content.style.width = '100%';\n      this.appendSidebarLeftToNavbar();\n\n      if (window.innerWidth < 520) {\n        this.transformCalendarTable();\n      }\n    }\n  }, {\n    key: \"transformCalendarTable\",\n    value: function transformCalendarTable() {}\n  }, {\n    key: \"appendSidebarLeftToNavbar\",\n    value: function appendSidebarLeftToNavbar() {\n      var className = 'sidebar-left';\n      var sidebarLeft = document.querySelector(\".\".concat(className));\n\n      if (sidebarLeft) {\n        var logo = document.querySelector('.logo');\n        logo.after(sidebarLeft);\n        sidebarLeft.classList.add('menu');\n        sidebarLeft.classList.remove(className);\n      }\n    }\n  }, {\n    key: \"displayMediumScreen\",\n    value: function displayMediumScreen() {\n      this.mediumCount++;\n\n      if (this.mediumCount === 1) {\n        this.content.style.width = '100%';\n      }\n\n      this.handleLeftAndRightButtonsInteractions();\n      this.renderMenuBackToSidebarLeftIfNecessary();\n    }\n  }, {\n    key: \"displayLargeScreen\",\n    value: function displayLargeScreen() {\n      this.mediumCount = 0;\n\n      if (this.thereAreButtons()) {\n        this.removeButtonsForHiddenSidebars();\n        this.removeVisibleClassnameInSidebars();\n        this.content.style.width = '74%';\n      }\n    }\n  }, {\n    key: \"handleLeftAndRightButtonsInteractions\",\n    value: function handleLeftAndRightButtonsInteractions() {\n      if (!this.thereAreButtons()) {\n        var _this$sidebarLeftButt, _this$userProfileButt;\n\n        this.sidebarLeftButton = (0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .createElement */ .az)('div', 'buttons_for_hidden_sidebars sidebar_left_button');\n        this.userProfileButton = (0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .createElement */ .az)('div', 'buttons_for_hidden_sidebars user_profile_button');\n        this.sidebarLeftButton.innerHTML = \"\\n            <i class='fas fa-arrow-right'></i>\\n            \";\n        this.userProfileButton.innerHTML = \"\\n            <i class='fas fa-arrow-left'></i>\\n            \";\n        this.home.appendChild(this.sidebarLeftButton);\n        this.home.appendChild(this.userProfileButton);\n        (_this$sidebarLeftButt = this.sidebarLeftButton) === null || _this$sidebarLeftButt === void 0 ? void 0 : _this$sidebarLeftButt.addEventListener('click', this.toggleSidebarLeft.bind(this));\n        (_this$userProfileButt = this.userProfileButton) === null || _this$userProfileButt === void 0 ? void 0 : _this$userProfileButt.addEventListener('click', this.toggleUserProfile.bind(this));\n      }\n    }\n  }, {\n    key: \"thereAreButtons\",\n    value: function thereAreButtons() {\n      return document.querySelectorAll('.buttons_for_hidden_sidebars').length !== 0;\n    }\n  }, {\n    key: \"toggleSidebarLeft\",\n    value: function toggleSidebarLeft() {\n      var sidebarLeft = document.querySelector('.sidebar-left');\n      var sidebarLeftVisibleClassName = 'visible_sidebar_left';\n      this.addOrRemoveElementClassName(sidebarLeft, sidebarLeftVisibleClassName);\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {*} percent \r\n     */\n\n  }, {\n    key: \"decreaseElementWidth\",\n    value: function decreaseElementWidth(element, percent) {\n      var elementWidthInPercent = this.convertToWindowPercent(element.offsetWidth);\n      var elementWidth;\n\n      if ((elementWidthInPercent - percent).toFixed(3).split('.')[1].charAt(0) === '0') {\n        elementWidth = Math.round(elementWidthInPercent - percent);\n      } else {\n        elementWidth = parseFloat((elementWidthInPercent - percent).toFixed(3));\n      }\n\n      element.style.width = elementWidth + '%';\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {*} percent \r\n     */\n\n  }, {\n    key: \"increaseElementWidth\",\n    value: function increaseElementWidth(element, percent) {\n      var elementWidthInPercent = this.convertToWindowPercent(element.clientWidth);\n      var elementWidth = elementWidthInPercent + percent > 99.9 ? 100 : parseFloat((elementWidthInPercent + percent).toFixed(3));\n\n      if ((elementWidthInPercent + percent).toFixed(3).split('.')[1].charAt(0) === '4') {\n        elementWidth = parseFloat((elementWidthInPercent + percent).toFixed(3).split('.')[0].concat('.4'));\n      }\n\n      element.style.width = elementWidth + '%';\n    }\n  }, {\n    key: \"convertToWindowPercent\",\n    value: function convertToWindowPercent(elementWidth) {\n      return parseFloat(100 / window.innerWidth * elementWidth);\n    }\n  }, {\n    key: \"toggleUserProfile\",\n    value: function toggleUserProfile() {\n      var userProfile = document.querySelector('.user-profile-right');\n      var userProfileVisibleClassName = 'visible_user_profile';\n      this.addOrRemoveElementClassName(userProfile, userProfileVisibleClassName);\n    }\n  }, {\n    key: \"addOrRemoveElementClassName\",\n    value: function addOrRemoveElementClassName(element, classNameToAddOrRemove) {\n      if (!(0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .elementHasClassName */ .cF)(element, classNameToAddOrRemove)) {\n        element.classList.add(classNameToAddOrRemove);\n\n        if (classNameToAddOrRemove === 'visible_sidebar_left') {\n          this.decreaseElementWidth(this.content, 7.414);\n        } else {\n          this.decreaseElementWidth(this.content, 18.586);\n        }\n      } else {\n        if (classNameToAddOrRemove === 'visible_sidebar_left') {\n          this.increaseElementWidth(this.content, 7.414);\n        } else {\n          this.increaseElementWidth(this.content, 18.586);\n        }\n\n        element.classList.remove(classNameToAddOrRemove);\n      }\n    }\n  }, {\n    key: \"renderMenuBackToSidebarLeftIfNecessary\",\n    value: function renderMenuBackToSidebarLeftIfNecessary() {\n      var menu = document.querySelector('.menu');\n\n      if (menu !== null) {\n        this.home.prepend(menu);\n        menu.classList.remove('menu');\n        menu.classList.add('sidebar-left');\n      }\n    }\n  }, {\n    key: \"toggleRevisionHeadLabels\",\n    value: function toggleRevisionHeadLabels() {\n      if (window.innerWidth < 700) {\n        this.replaceRevisionHeadLabelsToIcons();\n      } else {\n        this.reuseLettersForRevisionLabels();\n      }\n    }\n  }, {\n    key: \"replaceRevisionHeadLabelsToIcons\",\n    value: function replaceRevisionHeadLabelsToIcons() {\n      var _this = this;\n\n      var revisionHeads = (0,_Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__/* .createArray */ .Ri)(document.querySelectorAll('.revision_head'));\n      revisionHeads.forEach(function (revisionHead) {\n        var revisionHeadParagraphs = (0,_Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__/* .createConstArray */ .c4)(revisionHead.children);\n\n        if (_this.revisionHeadsChildren[revisionHeads.indexOf(revisionHead)] === undefined) {\n          _this.revisionHeadsChildren[revisionHeads.indexOf(revisionHead)] = revisionHeadParagraphs;\n        }\n\n        (0,_Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__/* .foreachArrayElements */ .$f)(revisionHeadParagraphs, _this.replaceToIcons);\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} paragraph \r\n     */\n\n  }, {\n    key: \"replaceToIcons\",\n    value: function replaceToIcons(paragraph) {\n      var icon = (0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .createElement */ .az)('i');\n\n      if ((0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .elementHasClassName */ .cF)(paragraph, 'subject')) {\n        icon.classList.add('fas');\n        icon.classList.add('fa-book');\n      } else if ((0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .elementHasClassName */ .cF)(paragraph, 'chapter')) {\n        icon.classList.add('fas');\n        icon.classList.add('fa-bookmark');\n      } else if ((0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .elementHasClassName */ .cF)(paragraph, 'time')) {\n        icon.innerHTML = \"\\n            <svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" class=\\\"feather feather-watch\\\">\\n            <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"7\\\"></circle>\\n            <polyline points=\\\"12 9 12 12 13.5 13.5\\\"></polyline>\\n            <path d=\\\"M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83\\\">\\n            </path>\\n            </svg>\";\n      } else {\n        return;\n      }\n\n      paragraph.replaceWith(icon);\n    }\n  }, {\n    key: \"reuseLettersForRevisionLabels\",\n    value: function reuseLettersForRevisionLabels() {\n      this.firstRevisionHeadParagraphsCopy = [];\n\n      if (this.revisionHeadsChildren !== null) {\n        // PEUT ETRE QU'ON DEVRAIT UTILISER LE revisionHeads EN HAUT MAIS GARDONS CELLE CI POUR LE MOMENT\n        this.revisionHeads = (0,_Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__/* .createArray */ .Ri)(document.querySelectorAll('.revision_head'));\n        this.appendLabelParagraphsForeachRevisionHead();\n      }\n    }\n  }, {\n    key: \"appendLabelParagraphsForeachRevisionHead\",\n    value: function appendLabelParagraphsForeachRevisionHead() {\n      var _this2 = this;\n\n      var _loop = function _loop(revisionHeadIndex) {\n        _this2.revisionHeadsChildren[revisionHeadIndex].forEach(function (revisionHeadParagraph) {\n          _this2.appendLabelParagraphsToARevisionHead(revisionHeadParagraph, revisionHeadIndex);\n        });\n      };\n\n      for (var revisionHeadIndex in this.revisionHeadsChildren) {\n        _loop(revisionHeadIndex);\n      }\n    }\n  }, {\n    key: \"appendLabelParagraphsToARevisionHead\",\n    value: function appendLabelParagraphsToARevisionHead(revisionHeadParagraph, revisionHeadIndex) {\n      var currentLoopRevisionHead = this.revisionHeads[revisionHeadIndex];\n\n      if ((0,_Functions_Tools_Tools__WEBPACK_IMPORTED_MODULE_1__/* .createArray */ .Ri)(currentLoopRevisionHead.children).length === 3) {\n        currentLoopRevisionHead.innerHTML = \"\";\n      }\n\n      if (revisionHeadParagraph.nodeName === 'P') {\n        this.firstRevisionHeadParagraphsCopy.push(revisionHeadParagraph.cloneNode(true));\n        currentLoopRevisionHead.appendChild(revisionHeadParagraph);\n      } else {\n        var paragraphIndex = this.revisionHeadsChildren[revisionHeadIndex].indexOf(revisionHeadParagraph);\n        currentLoopRevisionHead.appendChild(this.firstRevisionHeadParagraphsCopy[paragraphIndex]);\n      }\n\n      if (this.revisionHeads.length === 2 && this.revisionHeadsChildren.length === 1) {\n        this.revisionHeads[1].appendChild(revisionHeadParagraph);\n      }\n    }\n  }, {\n    key: \"removeButtonsForHiddenSidebars\",\n    value: function removeButtonsForHiddenSidebars() {\n      (0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .removeElementFromDOM */ .e5)(this.sidebarLeftButton);\n      (0,_Functions_Tools_DOMTools__WEBPACK_IMPORTED_MODULE_0__/* .removeElementFromDOM */ .e5)(this.userProfileButton);\n    }\n  }, {\n    key: \"removeVisibleClassnameInSidebars\",\n    value: function removeVisibleClassnameInSidebars() {\n      var visibleSidebarLeft = document.querySelector('.visible_sidebar_left');\n      var visibleUserProfile = document.querySelector('.visible_user_profile');\n\n      if (visibleSidebarLeft) {\n        visibleSidebarLeft.classList.remove('visible_sidebar_left');\n      }\n\n      if (visibleUserProfile) {\n        visibleUserProfile.classList.remove('visible_user_profile');\n      }\n    }\n  }]);\n\n  return HomeResponsive;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTgyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBOzs7QUFLQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFMQTs7QUFDQTtBQUFBO0FBS0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL2hvbWUtcmVzcG9uc2l2ZS5qcz8yYTYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zIGZyb20gXCIuL0Fic3RyYWN0Q2xhc3Nlcy9DYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zXCJcclxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgZWxlbWVudEhhc0NsYXNzTmFtZSwgcmVtb3ZlRWxlbWVudEZyb21ET00gfSBmcm9tIFwiLi9GdW5jdGlvbnMvVG9vbHMvRE9NVG9vbHNcIlxyXG5pbXBvcnQgeyBjcmVhdGVBcnJheSwgY3JlYXRlQ29uc3RBcnJheSwgZm9yZWFjaEFycmF5RWxlbWVudHMsIGlzVW5kZWZpbmVkIH0gZnJvbSBcIi4vRnVuY3Rpb25zL1Rvb2xzL1Rvb2xzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWVSZXNwb25zaXZlIHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5ob21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtbWFpbicpXHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5ob21lLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuICAgICAgICB0aGlzLmlzTWVkaXVtID0gZmFsc2VcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gZmFsc2VcclxuICAgICAgICB0aGlzLm1lZGl1bUNvdW50ID0gMFxyXG4gICAgICAgIHRoaXMubW9iaWxlQ291bnQgPSAwXHJcbiAgICAgICAgdGhpcy5tZWRpdW1TY3JlZW5XaWR0aCA9IDkwMVxyXG4gICAgICAgIHRoaXMubW9iaWxlU2NyZWVuV2lkdGggPSA2MDFcclxuICAgICAgICB0aGlzLnJldmlzaW9uSGVhZHNDaGlsZHJlbiA9IFtdXHJcbiAgICAgICAgdGhpcy5zaWRlYmFyTGVmdEJ1dHRvblxyXG4gICAgICAgIHRoaXMudXNlclByb2ZpbGVCdXR0b25cclxuICAgICAgICB0aGlzLnZpc2libGVTaWRlYmFyTGVmdFdpZHRoXHJcbiAgICAgICAgdGhpcy52aXNpYmxlVXNlclByb2ZpbGVXaWR0aFxyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZSgpXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7RXZlbnQgfCBudWxsfSBlIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVSZXNpemUoZSA9IG51bGwpe1xyXG4gICAgICAgIGU/LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWVkaXVtID0gd2luZG93LmlubmVyV2lkdGggPCB0aGlzLm1lZGl1bVNjcmVlbldpZHRoICYmIHdpbmRvdy5pbm5lcldpZHRoID49IHRoaXMubW9iaWxlU2NyZWVuV2lkdGhcclxuICAgICAgICBsZXQgbW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPCB0aGlzLm1vYmlsZVNjcmVlbldpZHRoXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYodGhpcy5pc01lZGl1bSAhPT0gbWVkaXVtKXtcclxuICAgICAgICAgICAgdGhpcy5pc01lZGl1bSA9IG1lZGl1bVxyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMuaXNNb2JpbGUgIT09IG1vYmlsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzTW9iaWxlID0gbW9iaWxlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmlzTW9iaWxlKXtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TW9iaWxlKClcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLmlzTWVkaXVtKXtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVkaXVtU2NyZWVuKClcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUxhcmdlU2NyZWVuKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudG9nZ2xlUmV2aXNpb25IZWFkTGFiZWxzKClcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5TW9iaWxlKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1lZGl1bUNvdW50ID0gMFxyXG4gICAgICAgIHRoaXMuY29udGVudC5zdHlsZS53aWR0aCA9ICcxMDAlJ1xyXG4gICAgICAgIHRoaXMuYXBwZW5kU2lkZWJhckxlZnRUb05hdmJhcigpXHJcbiAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPCA1MjApe1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNhbGVuZGFyVGFibGUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2Zvcm1DYWxlbmRhclRhYmxlKClcclxuICAgIHtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRTaWRlYmFyTGVmdFRvTmF2YmFyKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSAnc2lkZWJhci1sZWZ0J1xyXG4gICAgICAgIGxldCBzaWRlYmFyTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKVxyXG4gICAgICAgIGlmKHNpZGViYXJMZWZ0KXtcclxuICAgICAgICAgICAgbGV0IGxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9nbycpXHJcbiAgICAgICAgICAgIGxvZ28uYWZ0ZXIoc2lkZWJhckxlZnQpXHJcbiAgICAgICAgICAgIHNpZGViYXJMZWZ0LmNsYXNzTGlzdC5hZGQoJ21lbnUnKVxyXG4gICAgICAgICAgICBzaWRlYmFyTGVmdC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlNZWRpdW1TY3JlZW4oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubWVkaXVtQ291bnQrK1xyXG4gICAgICAgIGlmKHRoaXMubWVkaXVtQ291bnQgPT09IDEpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuc3R5bGUud2lkdGggPSAnMTAwJSdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlTGVmdEFuZFJpZ2h0QnV0dG9uc0ludGVyYWN0aW9ucygpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJNZW51QmFja1RvU2lkZWJhckxlZnRJZk5lY2Vzc2FyeSgpXHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUxhcmdlU2NyZWVuKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1lZGl1bUNvdW50ID0gMFxyXG4gICAgICAgIGlmKHRoaXMudGhlcmVBcmVCdXR0b25zKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVCdXR0b25zRm9ySGlkZGVuU2lkZWJhcnMoKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVZpc2libGVDbGFzc25hbWVJblNpZGViYXJzKClcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLndpZHRoID0gJzc0JSdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlTGVmdEFuZFJpZ2h0QnV0dG9uc0ludGVyYWN0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMudGhlcmVBcmVCdXR0b25zKCkpe1xyXG4gICAgICAgICAgICB0aGlzLnNpZGViYXJMZWZ0QnV0dG9uID0gY3JlYXRlRWxlbWVudCgnZGl2JywgJ2J1dHRvbnNfZm9yX2hpZGRlbl9zaWRlYmFycyBzaWRlYmFyX2xlZnRfYnV0dG9uJylcclxuICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZUJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICdidXR0b25zX2Zvcl9oaWRkZW5fc2lkZWJhcnMgdXNlcl9wcm9maWxlX2J1dHRvbicpXHJcbiAgICAgICAgICAgIHRoaXMuc2lkZWJhckxlZnRCdXR0b24uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8aSBjbGFzcz0nZmFzIGZhLWFycm93LXJpZ2h0Jz48L2k+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZUJ1dHRvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxpIGNsYXNzPSdmYXMgZmEtYXJyb3ctbGVmdCc+PC9pPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgICAgIHRoaXMuaG9tZS5hcHBlbmRDaGlsZCh0aGlzLnNpZGViYXJMZWZ0QnV0dG9uKVxyXG4gICAgICAgICAgICB0aGlzLmhvbWUuYXBwZW5kQ2hpbGQodGhpcy51c2VyUHJvZmlsZUJ1dHRvbilcclxuICAgICAgICAgICAgdGhpcy5zaWRlYmFyTGVmdEJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvZ2dsZVNpZGViYXJMZWZ0LmJpbmQodGhpcykpXHJcbiAgICAgICAgICAgIHRoaXMudXNlclByb2ZpbGVCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVVc2VyUHJvZmlsZS5iaW5kKHRoaXMpKVxyXG4gICAgICAgIH0gIFxyXG4gICAgfVxyXG5cclxuICAgIHRoZXJlQXJlQnV0dG9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXR0b25zX2Zvcl9oaWRkZW5fc2lkZWJhcnMnKS5sZW5ndGggIT09IDBcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVTaWRlYmFyTGVmdCgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHNpZGViYXJMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItbGVmdCcpXHJcbiAgICAgICAgY29uc3Qgc2lkZWJhckxlZnRWaXNpYmxlQ2xhc3NOYW1lID0gJ3Zpc2libGVfc2lkZWJhcl9sZWZ0J1xyXG4gICAgICAgIHRoaXMuYWRkT3JSZW1vdmVFbGVtZW50Q2xhc3NOYW1lKHNpZGViYXJMZWZ0LCBzaWRlYmFyTGVmdFZpc2libGVDbGFzc05hbWUpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgXHJcbiAgICAgKiBAcGFyYW0geyp9IHBlcmNlbnQgXHJcbiAgICAgKi9cclxuICAgIGRlY3JlYXNlRWxlbWVudFdpZHRoKGVsZW1lbnQsIHBlcmNlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudFdpZHRoSW5QZXJjZW50ID0gdGhpcy5jb252ZXJ0VG9XaW5kb3dQZXJjZW50KGVsZW1lbnQub2Zmc2V0V2lkdGgpXHJcbiAgICAgICAgbGV0IGVsZW1lbnRXaWR0aFxyXG4gICAgICAgIGlmKChlbGVtZW50V2lkdGhJblBlcmNlbnQgLSBwZXJjZW50KS50b0ZpeGVkKDMpLnNwbGl0KCcuJylbMV0uY2hhckF0KDApID09PSAnMCcpIHtcclxuICAgICAgICAgICAgZWxlbWVudFdpZHRoID0gIE1hdGgucm91bmQoZWxlbWVudFdpZHRoSW5QZXJjZW50IC0gcGVyY2VudClcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRXaWR0aCA9IHBhcnNlRmxvYXQoKGVsZW1lbnRXaWR0aEluUGVyY2VudCAtIHBlcmNlbnQpLnRvRml4ZWQoMykpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50V2lkdGggKyAnJSdcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBcclxuICAgICAqIEBwYXJhbSB7Kn0gcGVyY2VudCBcclxuICAgICAqL1xyXG4gICAgaW5jcmVhc2VFbGVtZW50V2lkdGgoZWxlbWVudCwgcGVyY2VudClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50V2lkdGhJblBlcmNlbnQgPSB0aGlzLmNvbnZlcnRUb1dpbmRvd1BlcmNlbnQoZWxlbWVudC5jbGllbnRXaWR0aClcclxuICAgICAgICBsZXQgZWxlbWVudFdpZHRoID0gZWxlbWVudFdpZHRoSW5QZXJjZW50ICsgcGVyY2VudCA+IDk5LjkgPyAxMDAgOiBwYXJzZUZsb2F0KChlbGVtZW50V2lkdGhJblBlcmNlbnQgKyBwZXJjZW50KS50b0ZpeGVkKDMpKVxyXG4gICAgICAgIGlmKChlbGVtZW50V2lkdGhJblBlcmNlbnQgKyBwZXJjZW50KS50b0ZpeGVkKDMpLnNwbGl0KCcuJylbMV0uY2hhckF0KDApID09PSAnNCcpe1xyXG4gICAgICAgICAgICBlbGVtZW50V2lkdGggPSAgcGFyc2VGbG9hdCgoZWxlbWVudFdpZHRoSW5QZXJjZW50ICsgcGVyY2VudCkudG9GaXhlZCgzKS5zcGxpdCgnLicpWzBdLmNvbmNhdCgnLjQnKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnRXaWR0aCArICclJ1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnZlcnRUb1dpbmRvd1BlcmNlbnQoZWxlbWVudFdpZHRoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KDEwMCAvIHdpbmRvdy5pbm5lcldpZHRoICogZWxlbWVudFdpZHRoKVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVVzZXJQcm9maWxlKClcclxuICAgIHtcclxuICAgICAgICBsZXQgdXNlclByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlci1wcm9maWxlLXJpZ2h0JylcclxuICAgICAgICBjb25zdCB1c2VyUHJvZmlsZVZpc2libGVDbGFzc05hbWUgPSAndmlzaWJsZV91c2VyX3Byb2ZpbGUnXHJcbiAgICAgICAgdGhpcy5hZGRPclJlbW92ZUVsZW1lbnRDbGFzc05hbWUodXNlclByb2ZpbGUsIHVzZXJQcm9maWxlVmlzaWJsZUNsYXNzTmFtZSlcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhZGRPclJlbW92ZUVsZW1lbnRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lVG9BZGRPclJlbW92ZSlcclxuICAgIHtcclxuICAgICAgICBpZighZWxlbWVudEhhc0NsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWVUb0FkZE9yUmVtb3ZlKSl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWVUb0FkZE9yUmVtb3ZlKVxyXG4gICAgICAgICAgICBpZihjbGFzc05hbWVUb0FkZE9yUmVtb3ZlID09PSAndmlzaWJsZV9zaWRlYmFyX2xlZnQnKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVjcmVhc2VFbGVtZW50V2lkdGgodGhpcy5jb250ZW50LCA3LjQxNClcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlY3JlYXNlRWxlbWVudFdpZHRoKHRoaXMuY29udGVudCwgMTguNTg2KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgaWYoY2xhc3NOYW1lVG9BZGRPclJlbW92ZSA9PT0gJ3Zpc2libGVfc2lkZWJhcl9sZWZ0Jyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlRWxlbWVudFdpZHRoKHRoaXMuY29udGVudCwgNy40MTQpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZUVsZW1lbnRXaWR0aCh0aGlzLmNvbnRlbnQsIDE4LjU4NilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lVG9BZGRPclJlbW92ZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICByZW5kZXJNZW51QmFja1RvU2lkZWJhckxlZnRJZk5lY2Vzc2FyeSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpXHJcbiAgICAgICAgaWYobWVudSAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMuaG9tZS5wcmVwZW5kKG1lbnUpXHJcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnbWVudScpXHJcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1sZWZ0JylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlUmV2aXNpb25IZWFkTGFiZWxzKClcclxuICAgIHtcclxuICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDcwMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VSZXZpc2lvbkhlYWRMYWJlbHNUb0ljb25zKClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5yZXVzZUxldHRlcnNGb3JSZXZpc2lvbkxhYmVscygpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VSZXZpc2lvbkhlYWRMYWJlbHNUb0ljb25zKClcclxuICAgIHtcclxuICAgICAgICBsZXQgcmV2aXNpb25IZWFkcyA9IGNyZWF0ZUFycmF5KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpc2lvbl9oZWFkJykpXHJcbiAgICAgICAgcmV2aXNpb25IZWFkcy5mb3JFYWNoKHJldmlzaW9uSGVhZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXZpc2lvbkhlYWRQYXJhZ3JhcGhzID0gY3JlYXRlQ29uc3RBcnJheShyZXZpc2lvbkhlYWQuY2hpbGRyZW4pXHJcbiAgICAgICAgICAgIGlmKHRoaXMucmV2aXNpb25IZWFkc0NoaWxkcmVuW3JldmlzaW9uSGVhZHMuaW5kZXhPZihyZXZpc2lvbkhlYWQpXSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICB0aGlzLnJldmlzaW9uSGVhZHNDaGlsZHJlbltyZXZpc2lvbkhlYWRzLmluZGV4T2YocmV2aXNpb25IZWFkKV0gPSByZXZpc2lvbkhlYWRQYXJhZ3JhcGhzIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcmVhY2hBcnJheUVsZW1lbnRzKHJldmlzaW9uSGVhZFBhcmFncmFwaHMsIHRoaXMucmVwbGFjZVRvSWNvbnMpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyYWdyYXBoIFxyXG4gICAgICovXHJcbiAgICByZXBsYWNlVG9JY29ucyhwYXJhZ3JhcGgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGljb24gPSBjcmVhdGVFbGVtZW50KCdpJylcclxuICAgICAgICBcclxuICAgICAgICBpZihlbGVtZW50SGFzQ2xhc3NOYW1lKHBhcmFncmFwaCwgJ3N1YmplY3QnKSl7XHJcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmFzJylcclxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1ib29rJylcclxuICAgICAgICB9ZWxzZSBpZihlbGVtZW50SGFzQ2xhc3NOYW1lKHBhcmFncmFwaCwgJ2NoYXB0ZXInKSl7XHJcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmFzJylcclxuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1ib29rbWFyaycpXHJcbiAgICAgICAgfWVsc2UgaWYoZWxlbWVudEhhc0NsYXNzTmFtZShwYXJhZ3JhcGgsICd0aW1lJykpIHtcclxuICAgICAgICAgICAgaWNvbi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwiZmVhdGhlciBmZWF0aGVyLXdhdGNoXCI+XHJcbiAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiN1wiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTIgOSAxMiAxMiAxMy41IDEzLjVcIj48L3BvbHlsaW5lPlxyXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTE2LjUxIDE3LjM1bC0uMzUgMy44M2EyIDIgMCAwIDEtMiAxLjgySDkuODNhMiAyIDAgMCAxLTItMS44MmwtLjM1LTMuODNtLjAxLTEwLjdsLjM1LTMuODNBMiAyIDAgMCAxIDkuODMgMWg0LjM1YTIgMiAwIDAgMSAyIDEuODJsLjM1IDMuODNcIj5cclxuICAgICAgICAgICAgPC9wYXRoPlxyXG4gICAgICAgICAgICA8L3N2Zz5gXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcGFyYWdyYXBoLnJlcGxhY2VXaXRoKGljb24pXHJcbiAgICB9XHJcblxyXG4gICAgcmV1c2VMZXR0ZXJzRm9yUmV2aXNpb25MYWJlbHMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZmlyc3RSZXZpc2lvbkhlYWRQYXJhZ3JhcGhzQ29weSA9IFtdXHJcbiAgICAgICAgaWYodGhpcy5yZXZpc2lvbkhlYWRzQ2hpbGRyZW4gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gUEVVVCBFVFJFIFFVJ09OIERFVlJBSVQgVVRJTElTRVIgTEUgcmV2aXNpb25IZWFkcyBFTiBIQVVUIE1BSVMgR0FSRE9OUyBDRUxMRSBDSSBQT1VSIExFIE1PTUVOVFxyXG4gICAgICAgICAgICB0aGlzLnJldmlzaW9uSGVhZHMgPSBjcmVhdGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aXNpb25faGVhZCcpKVxyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZExhYmVsUGFyYWdyYXBoc0ZvcmVhY2hSZXZpc2lvbkhlYWQoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRMYWJlbFBhcmFncmFwaHNGb3JlYWNoUmV2aXNpb25IZWFkKClcclxuICAgIHtcclxuICAgICAgICBmb3IoY29uc3QgcmV2aXNpb25IZWFkSW5kZXggaW4gdGhpcy5yZXZpc2lvbkhlYWRzQ2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnJldmlzaW9uSGVhZHNDaGlsZHJlbltyZXZpc2lvbkhlYWRJbmRleF0uZm9yRWFjaChyZXZpc2lvbkhlYWRQYXJhZ3JhcGggPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRMYWJlbFBhcmFncmFwaHNUb0FSZXZpc2lvbkhlYWQocmV2aXNpb25IZWFkUGFyYWdyYXBoLCByZXZpc2lvbkhlYWRJbmRleClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kTGFiZWxQYXJhZ3JhcGhzVG9BUmV2aXNpb25IZWFkKHJldmlzaW9uSGVhZFBhcmFncmFwaCwgcmV2aXNpb25IZWFkSW5kZXgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRMb29wUmV2aXNpb25IZWFkID0gdGhpcy5yZXZpc2lvbkhlYWRzW3JldmlzaW9uSGVhZEluZGV4XVxyXG4gICAgICAgIGlmKGNyZWF0ZUFycmF5KGN1cnJlbnRMb29wUmV2aXNpb25IZWFkLmNoaWxkcmVuKS5sZW5ndGggPT09IDMpe1xyXG4gICAgICAgICAgICBjdXJyZW50TG9vcFJldmlzaW9uSGVhZC5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihyZXZpc2lvbkhlYWRQYXJhZ3JhcGgubm9kZU5hbWUgPT09ICdQJyl7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSZXZpc2lvbkhlYWRQYXJhZ3JhcGhzQ29weS5wdXNoKHJldmlzaW9uSGVhZFBhcmFncmFwaC5jbG9uZU5vZGUodHJ1ZSkpXHJcbiAgICAgICAgICAgIGN1cnJlbnRMb29wUmV2aXNpb25IZWFkLmFwcGVuZENoaWxkKHJldmlzaW9uSGVhZFBhcmFncmFwaClcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmFncmFwaEluZGV4ID0gdGhpcy5yZXZpc2lvbkhlYWRzQ2hpbGRyZW5bcmV2aXNpb25IZWFkSW5kZXhdLmluZGV4T2YocmV2aXNpb25IZWFkUGFyYWdyYXBoKVxyXG4gICAgICAgICAgICBjdXJyZW50TG9vcFJldmlzaW9uSGVhZC5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0UmV2aXNpb25IZWFkUGFyYWdyYXBoc0NvcHlbcGFyYWdyYXBoSW5kZXhdKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZih0aGlzLnJldmlzaW9uSGVhZHMubGVuZ3RoID09PSAyICYmIHRoaXMucmV2aXNpb25IZWFkc0NoaWxkcmVuLmxlbmd0aCA9PT0gMSl7XHJcbiAgICAgICAgICAgIHRoaXMucmV2aXNpb25IZWFkc1sxXS5hcHBlbmRDaGlsZChyZXZpc2lvbkhlYWRQYXJhZ3JhcGgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUJ1dHRvbnNGb3JIaWRkZW5TaWRlYmFycygpXHJcbiAgICB7XHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00odGhpcy5zaWRlYmFyTGVmdEJ1dHRvbilcclxuICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTSh0aGlzLnVzZXJQcm9maWxlQnV0dG9uKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVZpc2libGVDbGFzc25hbWVJblNpZGViYXJzKClcclxuICAgIHtcclxuICAgICAgICBsZXQgdmlzaWJsZVNpZGViYXJMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpc2libGVfc2lkZWJhcl9sZWZ0JylcclxuICAgICAgICBsZXQgdmlzaWJsZVVzZXJQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpc2libGVfdXNlcl9wcm9maWxlJylcclxuICAgICAgICBpZih2aXNpYmxlU2lkZWJhckxlZnQpe1xyXG4gICAgICAgICAgICB2aXNpYmxlU2lkZWJhckxlZnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZV9zaWRlYmFyX2xlZnQnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih2aXNpYmxlVXNlclByb2ZpbGUpe1xyXG4gICAgICAgICAgICB2aXNpYmxlVXNlclByb2ZpbGUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZV91c2VyX3Byb2ZpbGUnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///582\n")}}]);