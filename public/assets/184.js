"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[184],{184:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ SidebraLeft)\n});\n\n// EXTERNAL MODULE: ./src/Functions/Request/ajax.js\nvar ajax = __webpack_require__(54);\n// EXTERNAL MODULE: ./node_modules/jquery/dist/jquery.js\nvar jquery = __webpack_require__(755);\n// EXTERNAL MODULE: ./src/Functions/Tools/DOMTools.js\nvar DOMTools = __webpack_require__(804);\n// EXTERNAL MODULE: ./src/Functions/Tools/Tools.js\nvar Tools = __webpack_require__(337);\n;// CONCATENATED MODULE: ./src/responsives/modalResize.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar modalResize = /*#__PURE__*/function () {\n  function modalResize(CalendarCreationDOM) {\n    _classCallCheck(this, modalResize);\n\n    /**\r\n     * @type CalendarCreationDOMInteractions\r\n     */\n    this.calendarCreationDOM = CalendarCreationDOM;\n    this.isRowActionButtonsHidden = false;\n    this.handleWindowResize();\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n  }\n\n  _createClass(modalResize, [{\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      var hideRowActionButtons = window.innerWidth <= 800;\n\n      if (hideRowActionButtons && this.calendarCreationDOM.modal) {\n        this.isRowActionButtonsHidden = true;\n        this.calendarCreationDOM.appendRowActionButtonsIntoAMenu();\n      } else if (!hideRowActionButtons && this.calendarCreationDOM.modal && this.isRowActionButtonsHidden) {\n        this.calendarCreationDOM.getRowActionButtonsOutOfMenu();\n        this.isRowActionButtonsHidden = false;\n      }\n    }\n  }]);\n\n  return modalResize;\n}();\n// EXTERNAL MODULE: ./src/AbstractClasses/DOMInteractions.js\nvar DOMInteractions = __webpack_require__(941);\n;// CONCATENATED MODULE: ./src/AbstractClasses/Tools/calendarGenerationTools.js\nfunction calendarGenerationTools_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction calendarGenerationTools_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction calendarGenerationTools_createClass(Constructor, protoProps, staticProps) { if (protoProps) calendarGenerationTools_defineProperties(Constructor.prototype, protoProps); if (staticProps) calendarGenerationTools_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar calendarGenerationTools = /*#__PURE__*/function () {\n  /**\r\n   * \r\n   * @param {calendarGeneration} calendarGeneration \r\n   */\n  function calendarGenerationTools() {\n    calendarGenerationTools_classCallCheck(this, calendarGenerationTools);\n\n    this.modal = document.querySelector('.calendar_creation_modal');\n    this.dateTypeInputs = [];\n    this.inputsWithSameDate = {};\n    this.currentDateTypeInput;\n    this.linesToRepeat = {};\n    this.linesOfInputsWithSameDate = {};\n    this.linesOfInputsWithSameDatetime = {};\n    this.currentObjToLoopForSpacing;\n    this.nextDateTypeInput;\n    this.numberOfLinesOfExercise = 0;\n    this.numberOfLinesOfExercisePerDate = [];\n    this.spaceIsUnder2H = false;\n  }\n\n  calendarGenerationTools_createClass(calendarGenerationTools, [{\n    key: \"fillInputsWithSameDate\",\n    value: function fillInputsWithSameDate() {\n      this.inputs = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('input'));\n      this.fillDateTypeInputs();\n      this.fillInputsWithSameByDateTypeInputs();\n    }\n  }, {\n    key: \"fillDateTypeInputs\",\n    value: function fillDateTypeInputs() {\n      var _this = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(this.inputs, function (input) {\n        if (input.id === 'date-input') {\n          (0,Tools/* pushElementToArray */.n6)(input, _this.dateTypeInputs);\n        }\n      });\n    }\n  }, {\n    key: \"fillInputsWithSameByDateTypeInputs\",\n    value: function fillInputsWithSameByDateTypeInputs() {\n      var _this2 = this;\n\n      (0,Tools/* classicForLoop */.Sw)(this.dateTypeInputs, function (currentDateTypeInput, nextDateTypeInput) {\n        _this2.currentDateTypeInput = currentDateTypeInput;\n        _this2.nextDateTypeInput = nextDateTypeInput;\n\n        if (!(0,Tools/* isUndefined */.o8)(nextDateTypeInput)) {\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreSame();\n\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreDifferents();\n        } else {\n          _this2.pushCurrentDateTypeInput();\n        }\n      });\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreSame\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreSame() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput === dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInSameArray(dateInCurrentInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInSameArray\",\n    value: function pushCurrentAndNextDateTypeInputInSameArray(date) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[date])) {\n        this.inputsWithSameDate[date] = [];\n        this.inputsWithSameDate[date].push(this.currentDateTypeInput);\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      } else {\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      }\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreDifferents\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreDifferents() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput !== dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInDifferentArrays\",\n    value: function pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInNextInput])) {\n          this.inputsWithSameDate[dateInNextInput] = [];\n          this.inputsWithSameDate[dateInNextInput].push(this.nextDateTypeInput);\n        }\n      }\n    }\n  }, {\n    key: \"pushCurrentDateTypeInput\",\n    value: function pushCurrentDateTypeInput() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      }\n    }\n  }, {\n    key: \"fetchLinesToRepeat\",\n    value: function fetchLinesToRepeat() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.inputsWithSameDate, function (date, inputs) {\n        (0,Tools/* foreachArrayElements */.$f)(inputs, function (input) {\n          _this3.pushIntoLinesToRepeatLinesWichAreNotExercise(input, date);\n        });\n      });\n    }\n  }, {\n    key: \"pushIntoLinesToRepeatLinesWichAreNotExercise\",\n    value: function pushIntoLinesToRepeatLinesWichAreNotExercise(input, date) {\n      var inputLine = input.parentElement.parentElement;\n      var inputTypeChapter = inputLine.querySelector('#chapter-input');\n      var inputValue = inputTypeChapter.value;\n\n      if (inputValue.includes(\"exercice\")) {\n        this.numberOfLinesOfExercise++;\n        this.numberOfLinesOfExercisePerDate[date] = this.numberOfLinesOfExercise;\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.linesToRepeat[date])) {\n          this.linesToRepeat[date] = [];\n        }\n\n        this.linesToRepeat[date].push(inputTypeChapter.parentElement.parentElement);\n      }\n    }\n  }, {\n    key: \"fetchLinesWithSemblablesTimes\",\n    value: function fetchLinesWithSemblablesTimes() {\n      var _this4 = this;\n\n      var tableLines = (0,Tools/* createArray */.Ri)(this.modal.querySelector('tbody').querySelectorAll('tr'));\n      tableLines.forEach(function (line) {\n        var date = line.querySelector('#date-input').value;\n        var hour = line.querySelector('#hour-input').value;\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDate[date])) {\n          _this4.linesOfInputsWithSameDate[date] = [];\n        }\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDatetime[date + hour])) {\n          _this4.linesOfInputsWithSameDatetime[date + hour] = [];\n        }\n\n        _this4.linesOfInputsWithSameDatetime[date + hour].push(line);\n\n        _this4.linesOfInputsWithSameDate[date].push(line);\n      });\n    }\n  }, {\n    key: \"spaceEveryRevisionsWithSameHour\",\n    value: function spaceEveryRevisionsWithSameHour() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDatetime;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceEveryRevisionsSpacedUnder2H\",\n    value: function spaceEveryRevisionsSpacedUnder2H() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDate;\n      this.spaceIsUnder2H = true;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceRevisions\",\n    value: function spaceRevisions() {\n      for (var date in this.currentObjToLoopForSpacing) {\n        var linesOfInputsPerDateLength = this.currentObjToLoopForSpacing[date].length;\n        this.addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength);\n      }\n    }\n  }, {\n    key: \"addHourIfThereIsMultipleLinesWithSemblablesTime\",\n    value: function addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength) {\n      this.lastHour = 0;\n      this.lastHourInput;\n\n      if (linesOfInputsPerDateLength > 1) {\n        for (var i = 0; i < linesOfInputsPerDateLength; i++) {\n          this.hourInputInCurrentLine = this.currentObjToLoopForSpacing[date][i].querySelector('#hour-input');\n          this.splittedHour = this.hourInputInCurrentLine.value.split(':');\n          this.hourInLine = parseInt(this.splittedHour[0]);\n          this.handleSameHour(linesOfInputsPerDateLength, i);\n          this.handleSpaceUnder2H();\n        }\n      }\n    }\n  }, {\n    key: \"handleSameHour\",\n    value: function handleSameHour(linesOfInputsPerDateLength, indexOfLine) {\n      if (!this.spaceIsUnder2H && indexOfLine >= Math.floor(linesOfInputsPerDateLength / 2)) {\n        this.AddNewHourValue({\n          hourValue: this.hourInLine,\n          valueToAdd: 2\n        }, this.hourInputInCurrentLine);\n      }\n    }\n  }, {\n    key: \"AddNewHourValue\",\n    value: function AddNewHourValue(hourProperties, hourInput) {\n      var newHour = hourProperties.hourValue + hourProperties.valueToAdd;\n      hourInput.value = newHour + ':' + this.splittedHour[1];\n    }\n  }, {\n    key: \"handleSpaceUnder2H\",\n    value: function handleSpaceUnder2H() {\n      if (this.spaceIsUnder2H) {\n        if (this.lastHour > 0) {\n          if (this.hourInLine > this.lastHour) {\n            if (this.hourInLine - this.lastHour < 2 && this.hourInLine - this.lastHour > 0) {\n              this.AddNewHourValue({\n                hourValue: this.hourInLine,\n                valueToAdd: 1\n              }, this.hourInputInCurrentLine);\n            }\n          } else if (this.lastHour > this.hourInLine) {\n            if (this.lastHour - this.hourInLine < 2 && this.lastHour - this.hourInLine > 0) {\n              this.AddNewHourValue({\n                hourValue: this.lastHour,\n                valueToAdd: 1\n              }, this.lastHourInput);\n            }\n          }\n        }\n\n        this.lastHour = this.hourInLine;\n        this.lastHourInput = this.hourInputInCurrentLine;\n      }\n    }\n  }, {\n    key: \"pushRemoveButtonIfInRowActionButtonsToArray\",\n    value: function pushRemoveButtonIfInRowActionButtonsToArray(rowActionButtons, array) {\n      if (document.querySelector('.remove_line_button') in rowActionButtons) {\n        console.log('ok it\\'s in');\n      }\n    }\n  }]);\n\n  return calendarGenerationTools;\n}();\n\n\n;// CONCATENATED MODULE: ./src/AbstractClasses/CalendarCreationDOMInteractions.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction CalendarCreationDOMInteractions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction CalendarCreationDOMInteractions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction CalendarCreationDOMInteractions_createClass(Constructor, protoProps, staticProps) { if (protoProps) CalendarCreationDOMInteractions_defineProperties(Constructor.prototype, protoProps); if (staticProps) CalendarCreationDOMInteractions_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\nvar CalendarCreationDOMInteractions = /*#__PURE__*/function (_DOMInteractions) {\n  _inherits(CalendarCreationDOMInteractions, _DOMInteractions);\n\n  var _super = _createSuper(CalendarCreationDOMInteractions);\n\n  function CalendarCreationDOMInteractions() {\n    var _this;\n\n    CalendarCreationDOMInteractions_classCallCheck(this, CalendarCreationDOMInteractions);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"formAction\", '/create-calendar');\n\n    _defineProperty(_assertThisInitialized(_this), \"notificationClassName\", 'calendar_creation_notification');\n\n    _this.actionsButtonsPerRow = {};\n    _this.atLeastOneRowIsExercise = 4;\n    _this.atLeastTwoRowsAreExercises = 5;\n    _this.repetitionLinesHaveBeenCreated = false;\n    _this.tableLinesLengthOfCalendarCreationLines = 1;\n    _this.normalDailyNumberOfSubjects = 3;\n    _this.isQuotaError = false;\n    _this.isWarning = false;\n    _this.messageForQuotaErrorOne = \"Erreur du quota 3 matières/j. Il faut au moins que l'une d'entre elles soient un exercice.\";\n    _this.messageForQuotaErrorTwo = \"Erreur du quota 3 matières/j. Il faut au moins que deux d'entre elles soient un exercice.\";\n    _this.currentQuotaErrorMessageToShow;\n    return _this;\n  }\n\n  CalendarCreationDOMInteractions_createClass(CalendarCreationDOMInteractions, [{\n    key: \"handleActionsInModalForm\",\n    value: function handleActionsInModalForm() {\n      _get(_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"handleActionsInModalForm\", this).call(this);\n\n      this.toolsForCalendarGeneration = new calendarGenerationTools();\n      this.handleAddLineButtonClick();\n      this.handleCalendarGeneration();\n    }\n  }, {\n    key: \"handleAddLineButtonClick\",\n    value: function handleAddLineButtonClick() {\n      this.tableLinesLengthOfCalendarCreationLines++;\n      var addLineButton = this.modal.querySelector('.add-line');\n      addLineButton.addEventListener('click', this.appendNewLineToCalendarCreationTable.bind(this));\n    }\n  }, {\n    key: \"appendNewLineToCalendarCreationTable\",\n    value: function appendNewLineToCalendarCreationTable(e) {\n      this.createLine();\n      this.handleRemoveLineButtonClick();\n      this.removeRowActionMenuIfExists(e);\n      this.handleCalendarGeneration();\n      this.handleAddLineButtonClick();\n    }\n  }, {\n    key: \"createLine\",\n    value: function createLine() {\n      this.currentCreatedLine = this.createElement('tr', 'subject-line');\n      var removeLineButton = this.modal.querySelector('.remove-line');\n      var addLineButton = this.modal.querySelector('.add-line');\n      var subjectLine;\n      var generateCalendarButton;\n\n      if (addLineButton) {\n        this.addLineButtonContainer = addLineButton.parentElement;\n        subjectLine = this.addLineButtonContainer.parentElement;\n        generateCalendarButton = subjectLine.querySelector('.generate-calendar');\n        this.generateCalendarButtonContainer = generateCalendarButton.parentElement;\n      }\n\n      this.calendarCreationTbody = this.modal.querySelector('.calendar-creation-tbody');\n\n      if (removeLineButton !== null) {\n        removeLineButton.parentElement.parentElement.removeChild(removeLineButton.parentElement);\n      }\n\n      this.calendarCreationTbody.appendChild(this.currentCreatedLine);\n      var currentCreatedLineInnerHTML = \"\\n        <td><input type='text' name='subject-\".concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='subject-input'></td>\\n        <td><input type='text' name='chapter-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='chapter-input'></td>\\n        <td><input type='date' name='date-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='date-input'></td>\\n        <td><input type='time' name='hour-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='hour-input'></td>\\n        \");\n\n      if (!this.repetitionLinesHaveBeenCreated) {\n        currentCreatedLineInnerHTML += \"\\n            <td class='row_action_button add_line_button'><i class='fas fa-plus add-line'></i></td>\\n            <td class='row_action_button generate_calendar_button'><i class='fas fa-check generate-calendar'></i></td>\\n            <td class='row_action_button remove_line_button'><i class='fas fa-window-close remove-line'></i></td>\\n            \";\n      }\n\n      this.currentCreatedLine.innerHTML = currentCreatedLineInnerHTML;\n\n      if (window.innerWidth <= 800) {\n        this.appendRowActionButtonsIntoAMenu();\n      } else {\n        if (!(0,Tools/* isUndefined */.o8)(subjectLine)) {\n          subjectLine.removeChild(this.addLineButtonContainer);\n          subjectLine.removeChild(this.generateCalendarButtonContainer);\n        }\n      }\n\n      this.growFormHeight();\n      this.growModalHeight();\n      this.growBodyHeightIfModalCollapse();\n    }\n  }, {\n    key: \"handleRemoveLineButtonClick\",\n    value: function handleRemoveLineButtonClick() {\n      this.removeLineButton = this.modal.querySelector('.remove-line');\n\n      if (this.removeLineButton !== null) {\n        this.handleClickOnRemoveLineButton();\n      }\n    }\n  }, {\n    key: \"handleClickOnRemoveLineButton\",\n    value: function handleClickOnRemoveLineButton() {\n      var _this2 = this;\n\n      this.removeLineButton.addEventListener('click', function (e) {\n        _this2.tableLinesLengthOfCalendarCreationLines--;\n        _this2.removeLineButtonContainer = _this2.removeLineButton.parentNode;\n        var removeLineButtonContainerParent = _this2.removeLineButtonContainer.parentNode;\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(removeLineButtonContainerParent, 'action_menu')) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.previousElementSibling);\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.parentElement);\n\n          _this2.removeRowActionMenu(removeLineButtonContainerParent);\n\n          _this2.appendToLastRowActionButtons();\n\n          _this2.appendRowActionButtonsIntoAMenu();\n        } else {\n          removeLineButtonContainerParent.classList.add('invisible-subject-line');\n          removeLineButtonContainerParent.addEventListener('animationend', function () {\n            _this2.calendarCreationTbody.removeChild(removeLineButtonContainerParent);\n\n            _this2.appendToLastRowActionButtons();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"appendToLastRowActionButtons\",\n    value: function appendToLastRowActionButtons() {\n      this.calendarCreationTbody.lastElementChild.appendChild(this.addLineButtonContainer);\n      this.calendarCreationTbody.lastElementChild.appendChild(this.generateCalendarButtonContainer);\n\n      if (this.calendarCreationTbody.firstElementChild !== this.calendarCreationTbody.lastElementChild) {\n        this.calendarCreationTbody.lastElementChild.appendChild(this.removeLineButtonContainer);\n      }\n\n      this.reduceFormHeightUntilNormal();\n      this.reduceModalHeightUntilNormal();\n      this.reduceBodyHeigthUntilNormal();\n    }\n  }, {\n    key: \"growFormHeight\",\n    value: function growFormHeight() {\n      this.growElementSize(this.modalForm, {\n        attribute: 'height',\n        value: this.modalForm.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n  }, {\n    key: \"growModalHeight\",\n    value: function growModalHeight() {\n      this.growElementSize(this.modal, {\n        attribute: 'height',\n        value: this.modal.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {{attribute: string, value: number}} options \r\n     */\n\n  }, {\n    key: \"growElementSize\",\n    value: function growElementSize(element, options) {\n      if (options.attribute === 'width') {\n        element.style.width = options.value + 'px';\n      } else {\n        element.style.height = options.value + 'px';\n      }\n    }\n  }, {\n    key: \"growBodyHeightIfModalCollapse\",\n    value: function growBodyHeightIfModalCollapse() {\n      if (this.modal.offsetHeight >= 470) {\n        this.growElementSize(document.body, {\n          attribute: 'height',\n          value: document.body.offsetHeight + this.currentCreatedLine.offsetHeight\n        });\n      }\n    }\n  }, {\n    key: \"reduceFormHeightUntilNormal\",\n    value: function reduceFormHeightUntilNormal() {\n      var modalFormHeight = this.modalForm.offsetHeight;\n\n      if (modalFormHeight > this.originalModalFormHeigth) {\n        this.modalForm.style.height = modalFormHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceModalHeightUntilNormal\",\n    value: function reduceModalHeightUntilNormal() {\n      if (this.modal.offsetHeight > this.originalModalHeigth) {\n        this.modal.style.height = this.modal.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceBodyHeigthUntilNormal\",\n    value: function reduceBodyHeigthUntilNormal() {\n      if (document.body.offsetHeight > this.originalBodyHeight) {\n        document.body.style.height = document.body.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"handleCalendarGeneration\",\n    value: function handleCalendarGeneration() {\n      var generateCalendarButton = this.modal.querySelector('.generate-calendar');\n      generateCalendarButton === null || generateCalendarButton === void 0 ? void 0 : generateCalendarButton.addEventListener('click', this.generateCalendar.bind(this));\n    }\n  }, {\n    key: \"generateCalendar\",\n    value: function generateCalendar(e) {\n      this.toolsForCalendarGeneration.fillInputsWithSameDate();\n      this.toolsForCalendarGeneration.fetchLinesToRepeat();\n      this.generateLinesOfRepetitions();\n      this.removeRowActionMenuIfExists(e);\n      this.toolsForCalendarGeneration.fetchLinesWithSemblablesTimes();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsWithSameHour();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsSpacedUnder2H();\n    }\n  }, {\n    key: \"generateLinesOfRepetitions\",\n    value: function generateLinesOfRepetitions() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.toolsForCalendarGeneration.inputsWithSameDate, function (date, inputs) {\n        _this3.numberOfSubjectsIsNormal(inputs, date);\n\n        _this3.numberOfSubjectsMoreThanNormal(inputs, date);\n      });\n    }\n  }, {\n    key: \"numberOfSubjectsIsNormal\",\n    value: function numberOfSubjectsIsNormal(inputs, date) {\n      var _this4 = this;\n\n      if (inputs.length < this.atLeastOneRowIsExercise && this.toolsForCalendarGeneration.linesToRepeat[date] !== undefined) {\n        this.toolsForCalendarGeneration.linesToRepeat[date].forEach(function (element) {\n          _this4.generateRepetitionsCalendar(element);\n        });\n      }\n    }\n  }, {\n    key: \"numberOfSubjectsMoreThanNormal\",\n    value: function numberOfSubjectsMoreThanNormal(inputs, date) {\n      switch (inputs.length) {\n        case this.atLeastOneRowIsExercise:\n          this.generateRepetitionsOrShowWarningOne(date);\n          break;\n\n        case this.atLeastTwoRowsAreExercises:\n          this.generateRepetitionsOrShowWarningTwo(date);\n          break;\n      }\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningOne\",\n    value: function generateRepetitionsOrShowWarningOne(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorOne;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningTwo\",\n    value: function generateRepetitionsOrShowWarningTwo(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorTwo;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarning\",\n    value: function generateRepetitionsOrShowWarning(date) {\n      var _this5 = this;\n\n      if (this.toolsForCalendarGeneration.numberOfLinesOfExercisePerDate[date] >= 1) {\n        if (!this.isQuotaError) {\n          (0,Tools/* foreachArrayElements */.$f)(this.toolsForCalendarGeneration.linesToRepeat[date], function (element) {\n            _this5.generateRepetitionsCalendar(element);\n          });\n        }\n      } else {\n        this.showWarning(date);\n      }\n    }\n  }, {\n    key: \"showWarning\",\n    value: function showWarning(date) {\n      this.isQuotaError = true;\n      this.focusChapterInputOn(this.toolsForCalendarGeneration.linesToRepeat[date]);\n      this.createWarning(this.currentQuotaErrorMessageToShow);\n    }\n    /**\r\n     * \r\n     * @param {*} linesToRepeatOfADate \r\n     */\n\n  }, {\n    key: \"focusChapterInputOn\",\n    value: function focusChapterInputOn(linesToRepeatOfADate) {\n      var _this6 = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(linesToRepeatOfADate, function (line) {\n        _this6.alertFocusOnElement(line.querySelector('#chapter-input'));\n      });\n    }\n  }, {\n    key: \"generateRepetitionsCalendar\",\n    value: function generateRepetitionsCalendar(element) {\n      var elementInputs = element.querySelectorAll('input');\n      var emptyInputExists = false;\n      elementInputs.forEach(function (i) {\n        if (i.value === '') {\n          emptyInputExists = true;\n        }\n      });\n\n      if (!emptyInputExists) {\n        this.repetitionLinesHaveBeenCreated = true;\n        this.createLine();\n        this.generateLines(element);\n      } else {\n        if (document.querySelector('.warning') === null) {\n          this.isWarning = true;\n          this.createWarning(\"Impossible de générer les répétitions si les champs sont vides.\");\n        }\n      }\n    }\n  }, {\n    key: \"generateLines\",\n    value: function generateLines(element) {\n      var tbody = document.querySelector('tbody');\n      var subjectInput = tbody.lastElementChild.querySelector('#subject-input');\n      var chapterInput = tbody.lastElementChild.querySelector('#chapter-input');\n      var dateInput = tbody.lastElementChild.querySelector('#date-input');\n      var hourInput = tbody.lastElementChild.querySelector('#hour-input');\n      subjectInput.value = element.querySelector('#subject-input').value;\n      chapterInput.value = element.querySelector('#chapter-input').value;\n      var splittedHour = element.querySelector('#hour-input').value.split(':');\n      var splittedDate = element.querySelector('#date-input').value.split('-');\n      var year = splittedDate[0];\n      var month = splittedDate[1];\n      var day = splittedDate[2];\n      var newHourValue = parseInt(splittedHour[0]) + 8;\n\n      if (newHourValue < 20) {\n        dateInput.value = element.querySelector('#date-input').value;\n        hourInput.value = newHourValue + ':' + splittedHour[1];\n      } else {\n        var intNewDayValue = parseInt(day) + 1;\n        var newDayValue = intNewDayValue.toString().length === 1 ? '0' + intNewDayValue.toString() : parseInt(day) + 1;\n        newHourValue = 8;\n        dateInput.value = year + '-' + month + '-' + newDayValue;\n\n        if (dateInput.value === '') {\n          var intMonth = parseInt(month);\n\n          if (intMonth < 12) {\n            dateInput.value = year + '-0' + (intMonth + 1) + '-' + '01';\n          } else {\n            dateInput.value = parseInt(year) + 1 + '-' + '01' + '-' + '01';\n          }\n        }\n\n        hourInput.value = '0' + newHourValue + ':' + splittedHour[1];\n      }\n    }\n  }, {\n    key: \"createWarning\",\n    value: function createWarning(message) {\n      var warningParagraph = this.createElement('p', 'warning');\n      var i = this.createElement('i', 'fas fa-exclamation-triangle');\n      var span = this.createElement('span', 'warning-message');\n      warningParagraph.appendChild(i);\n      warningParagraph.appendChild(span);\n      span.innerHTML = message;\n      this.modal.querySelector('button').before(warningParagraph);\n      warningParagraph.offsetWidth;\n      warningParagraph.classList.add('active_warning');\n      var marginBottom = 30;\n      this.modal.style.height = this.modal.offsetHeight + warningParagraph.offsetHeight + marginBottom + 'px';\n      this.removeElementAfterMilliseconds(warningParagraph, 5000, {\n        classNameToRemove: 'active_warning',\n        elementWithHeightToDecrease: [this.modal, warningParagraph.offsetHeight + marginBottom]\n      });\n    }\n  }, {\n    key: \"postContentWithNotificationThenReload\",\n    value: function postContentWithNotificationThenReload() {\n      var _this7 = this;\n\n      (0,ajax/* post */.v)(this.formAction, this.dataToPostObj).then(function (response) {\n        _this7.handleRequestResponse(response);\n      }).catch(function (error) {\n        console.error(\"Il y a eu une erreur :\" + error);\n      });\n    }\n  }, {\n    key: \"handleRequestResponse\",\n    value: function handleRequestResponse(response) {\n      var responseJson = JSON.parse(response);\n      var message = responseJson.success !== undefined ? responseJson.success : responseJson.fail;\n      this.showNotificationWithDataInMilliseconds({\n        className: this.notificationClassName,\n        content: message\n      }, 2000);\n      this.reloadPage();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      _get(_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"closeModal\", this).call(this);\n\n      document.body.style.height = this.originalBodyHeight + 'px';\n    }\n  }, {\n    key: \"removeRowActionMenuIfExists\",\n    value: function removeRowActionMenuIfExists(e) {\n      var clickedButtonGrandParent = e.currentTarget.parentElement.parentElement;\n\n      if (clickedButtonGrandParent && (0,DOMTools/* elementHasClassName */.cF)(clickedButtonGrandParent, 'action_menu') && !this.isWarning) {\n        this.removeRowActionMenu(clickedButtonGrandParent);\n      }\n    }\n  }, {\n    key: \"removeRowActionMenu\",\n    value: function removeRowActionMenu(rowActionMenu) {\n      this.hideRowActionMenu(rowActionMenu);\n      var rowActionMenuButton = rowActionMenu.parentNode.querySelector('.action_menu_button');\n\n      if (rowActionMenuButton) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenuButton);\n      }\n\n      (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenu);\n    }\n  }, {\n    key: \"handleModalResponsive\",\n    value: function handleModalResponsive() {\n      new modalResize(this);\n    }\n  }, {\n    key: \"appendRowActionButtonsIntoAMenu\",\n    value: function appendRowActionButtonsIntoAMenu() {\n      if ((this.modal.querySelector('.action_menu_button') === null || this.lastSubjectRow !== null) && !this.repetitionLinesHaveBeenCreated) {\n        this.subjectRows = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('.subject-line'));\n        this.lastSubjectRowIndex = this.subjectRows.length - 1;\n        this.lastSubjectRow = this.subjectRows[this.lastSubjectRowIndex];\n        var rowActionButtons = (0,Tools/* createArray */.Ri)(this.lastSubjectRow.querySelectorAll('.row_action_button'));\n        this.actionsButtonsPerRow[this.lastSubjectRowIndex] = rowActionButtons;\n        this.createMenuForLastRow();\n      } else if (this.repetitionLinesHaveBeenCreated) {\n        this.lastSubjectRow = null;\n        this.rowActionMenuButton = null;\n        this.actionMenu = null;\n      }\n    }\n  }, {\n    key: \"createMenuForLastRow\",\n    value: function createMenuForLastRow() {\n      this.createActionMenuButton(this.lastSubjectRow);\n      this.createMenuInRowThenAppendChildren(this.lastSubjectRow, this.actionsButtonsPerRow[this.lastSubjectRowIndex]);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createActionMenuButton\",\n    value: function createActionMenuButton(row) {\n      this.rowActionMenuButton = row.querySelector('.action_menu_button');\n\n      if ((0,Tools/* isUndefined */.o8)(this.rowActionMenuButton) || this.rowActionMenuButton === null) {\n        this.rowActionMenuButton = this.createElement('td', 'action_menu_button');\n        this.rowActionMenuButton.innerHTML = \"<p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\";\n        row.appendChild(this.rowActionMenuButton);\n        this.rowActionMenuButton.addEventListener('click', this.toggleActionMenuOfTheRow.bind(this, row));\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createMenuInRowThenAppendChildren\",\n    value: function createMenuInRowThenAppendChildren(row, futurChildren) {\n      var _this8 = this;\n\n      this.actionMenu = this.createElement('div', 'action_menu');\n      futurChildren.forEach(function (futurChild) {\n        _this8.actionMenu.appendChild(futurChild);\n      });\n      this.actionMenu.setAttribute('hidden', 'true');\n      row.appendChild(this.actionMenu);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"toggleActionMenuOfTheRow\",\n    value: function toggleActionMenuOfTheRow(row) {\n      var rowActionMenu = row.lastElementChild;\n\n      if (rowActionMenu.hasAttribute('hidden')) {\n        this.showRowActionMenu(rowActionMenu);\n      } else {\n        this.hideRowActionMenu(rowActionMenu);\n      }\n    }\n  }, {\n    key: \"showRowActionMenu\",\n    value: function showRowActionMenu(rowActionMenu) {\n      rowActionMenu.removeAttribute('hidden');\n      rowActionMenu.offsetWidth;\n      rowActionMenu.classList.add('visible_action_menu');\n\n      if (rowActionMenu.children.length === 3) {\n        rowActionMenu.classList.add('three_children');\n      }\n    }\n  }, {\n    key: \"hideRowActionMenu\",\n    value: function hideRowActionMenu(rowActionMenu) {\n      rowActionMenu.classList.remove('visible_action_menu');\n\n      var handleTransitionEnd = function handleTransitionEnd() {\n        rowActionMenu.setAttribute('hidden', 'true');\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(rowActionMenu, 'three_children')) {\n          rowActionMenu.classList.remove('three_children');\n        }\n\n        rowActionMenu.removeEventListener('transitionend', handleTransitionEnd);\n      };\n\n      rowActionMenu.addEventListener('transitionend', handleTransitionEnd);\n    }\n  }, {\n    key: \"getRowActionButtonsOutOfMenu\",\n    value: function getRowActionButtonsOutOfMenu() {\n      if (this.actionMenuExists()) {\n        this.appendActionButtonsInParentRow();\n\n        if (this.actionMenu !== null && !(0,Tools/* isUndefined */.o8)(this.actionMenu)) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.actionMenu);\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.rowActionMenuButton);\n        }\n      }\n    }\n  }, {\n    key: \"actionMenuExists\",\n    value: function actionMenuExists() {\n      return this.lastSubjectRow !== null && this.rowActionMenuButton !== null && this.actionMenu !== null;\n    }\n  }, {\n    key: \"appendActionButtonsInParentRow\",\n    value: function appendActionButtonsInParentRow() {\n      var _this9 = this;\n\n      this.actionsButtonsPerRow[this.lastSubjectRowIndex].forEach(function (actionButton) {\n        _this9.subjectRows[_this9.lastSubjectRowIndex].appendChild(actionButton);\n      });\n    }\n  }, {\n    key: \"alertEmptyInputs\",\n    value: function alertEmptyInputs() {\n      var _this10 = this;\n\n      this.modalInputs.forEach(function (input) {\n        if (_this10.isMessageCorrespondsTo(input.name)) {\n          _this10.alertFocusOnElement(input);\n\n          _this10.removeAlertFocusWhenclick(input);\n        }\n      });\n    }\n  }]);\n\n  return CalendarCreationDOMInteractions;\n}(DOMInteractions/* default */.Z);\n\n\n;// CONCATENATED MODULE: ./src/Functions/handleAddCalendar.js\n\n/**\r\n* crée un nouvel emploi du temps\r\n*/\n\nfunction handleAddCalendar(e) {\n  var number = 1;\n  var content = document.querySelector('.content');\n  var domInteractions = new CalendarCreationDOMInteractions();\n  var form = domInteractions.createForm('POST', 'create-calendar');\n  var formContent = \"\\n       <table class=\\\"create_calendar_table\\\">\\n           <thead>\\n               <tr>\\n                   <th>Mati\\xE8re</th>\\n                   <th>Chapitre \\xE0 \\xE9tudier</th>\\n                   <th>Date</th>\\n                   <th>Heure</th>\\n               </tr>\\n           </thead>\\n           <tbody class='calendar-creation-tbody'>\\n               <tr class='subject-line'>\\n                   <td><input type='text' name='subject-\".concat(number, \"' id='subject-input'></td>\\n                   <td><input type='text' name='chapter-\").concat(number, \"' id='chapter-input'></td>\\n                   <td><input type='date' name='date-\").concat(number, \"' id='date-input'></td>\\n                   <td><input type='time' name='hour-\").concat(number, \"' id='hour-input'></td>\\n                   <td class='row_action_button add_line_button'><i class='fas fa-plus add-line'></i></td>\\n                   <td class='row_action_button generate_calendar_button'><i class='fas fa-check generate-calendar'></i></td>\\n               </tr>\\n           </tbody>\\n       </table>\\n       <button type='submit' class='submitBtn modal-add' id='submit-calendar'>Cr\\xE9er l'amploi du temps</button>\\n   \");\n  content.querySelector('.calendar-creation-instructions').classList.add('slide-instructions-top');\n  content.appendChild(form);\n  form.innerHTML = formContent;\n  domInteractions.createModal('calendar_creation_modal', form, {\n    defaultModalContent: true\n  });\n  domInteractions.handleModalResponsive();\n  domInteractions.handleActionsInModalContent();\n}\n// EXTERNAL MODULE: ./src/home.js + 1 modules\nvar home = __webpack_require__(877);\n// EXTERNAL MODULE: ./src/AbstractClasses/ThereAreDataToSendWithGETRequest.js\nvar ThereAreDataToSendWithGETRequest = __webpack_require__(281);\n;// CONCATENATED MODULE: ./src/AbstractClasses/deleteCalendarDOMInteractions.js\nfunction deleteCalendarDOMInteractions_typeof(obj) { \"@babel/helpers - typeof\"; return deleteCalendarDOMInteractions_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, deleteCalendarDOMInteractions_typeof(obj); }\n\nfunction deleteCalendarDOMInteractions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction deleteCalendarDOMInteractions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction deleteCalendarDOMInteractions_createClass(Constructor, protoProps, staticProps) { if (protoProps) deleteCalendarDOMInteractions_defineProperties(Constructor.prototype, protoProps); if (staticProps) deleteCalendarDOMInteractions_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction deleteCalendarDOMInteractions_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) deleteCalendarDOMInteractions_setPrototypeOf(subClass, superClass); }\n\nfunction deleteCalendarDOMInteractions_setPrototypeOf(o, p) { deleteCalendarDOMInteractions_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return deleteCalendarDOMInteractions_setPrototypeOf(o, p); }\n\nfunction deleteCalendarDOMInteractions_createSuper(Derived) { var hasNativeReflectConstruct = deleteCalendarDOMInteractions_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = deleteCalendarDOMInteractions_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = deleteCalendarDOMInteractions_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return deleteCalendarDOMInteractions_possibleConstructorReturn(this, result); }; }\n\nfunction deleteCalendarDOMInteractions_possibleConstructorReturn(self, call) { if (call && (deleteCalendarDOMInteractions_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return deleteCalendarDOMInteractions_assertThisInitialized(self); }\n\nfunction deleteCalendarDOMInteractions_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction deleteCalendarDOMInteractions_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deleteCalendarDOMInteractions_getPrototypeOf(o) { deleteCalendarDOMInteractions_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return deleteCalendarDOMInteractions_getPrototypeOf(o); }\n\n\n\n\n\n\nvar deleteCalendarDOMInteractions = /*#__PURE__*/function (_ThereAreDataToSendWi) {\n  deleteCalendarDOMInteractions_inherits(deleteCalendarDOMInteractions, _ThereAreDataToSendWi);\n\n  var _super = deleteCalendarDOMInteractions_createSuper(deleteCalendarDOMInteractions);\n\n  function deleteCalendarDOMInteractions() {\n    deleteCalendarDOMInteractions_classCallCheck(this, deleteCalendarDOMInteractions);\n\n    return _super.call(this);\n  }\n\n  deleteCalendarDOMInteractions_createClass(deleteCalendarDOMInteractions, [{\n    key: \"processSendingDataToServer\",\n    value: function processSendingDataToServer() {\n      var _this = this;\n\n      (0,jquery.get)('/drop-calendar').then(function (res) {\n        _this.closeModal();\n\n        _this.showNotificationWithDataInMilliseconds({\n          className: \"calendar_deletion_notification\",\n          content: JSON.parse(res).message\n        }, 2000);\n\n        new SidebraLeft();\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }]);\n\n  return deleteCalendarDOMInteractions;\n}(ThereAreDataToSendWithGETRequest/* ThereAreDataToSendWithGETRequest */.F);\n\n\n;// CONCATENATED MODULE: ./src/user/handleDeleteCalendar.js\n\nfunction handleDeleteCalendar(e) {\n  e.preventDefault();\n  var domInteractions = new deleteCalendarDOMInteractions();\n  domInteractions.createModal('delete_calendar_modal', \"\\n    <p>Vous \\xEAtes s\\xFBr de vouloir supprimer cet emploi du temps?</p>\\n    <button class='sure'>Oui, supprimer l'emploi <br>du temps</button><button class='no'>Annuler</button>\\n    \");\n  domInteractions.handleActionsInModalContent(e.currentTarget, true);\n}\n;// CONCATENATED MODULE: ./src/Modules/Content.js\nfunction Content_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction Content_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction Content_createClass(Constructor, protoProps, staticProps) { if (protoProps) Content_defineProperties(Constructor.prototype, protoProps); if (staticProps) Content_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\nvar Content = /*#__PURE__*/function () {\n  function Content(content) {\n    Content_classCallCheck(this, Content);\n\n    this.root = document.querySelector('.content');\n    this.root.innerHTML = content;\n    this.addCalendarButtonClick();\n    this.playButtonClick();\n    this.anotherTimeButtonClick();\n    this.calendarTableInteractions();\n  }\n\n  Content_createClass(Content, [{\n    key: \"addCalendarButtonClick\",\n    value: function addCalendarButtonClick() {\n      var addCalendar = this.root.querySelector('.add-calendar');\n\n      if (addCalendar !== null) {\n        addCalendar.addEventListener('click', handleAddCalendar);\n      }\n    }\n  }, {\n    key: \"playButtonClick\",\n    value: function playButtonClick() {\n      var playButton = this.root.querySelector('.revision-play');\n\n      if (playButton !== null) {\n        __webpack_require__.e(/* import() */ 802).then(__webpack_require__.bind(__webpack_require__, 802)).then(function (module) {\n          var playSubject = module.default;\n          playButton.addEventListener('click', playSubject);\n        });\n      }\n    }\n  }, {\n    key: \"anotherTimeButtonClick\",\n    value: function anotherTimeButtonClick() {\n      var anotherTimeButton = this.root.querySelectorAll('.another-time-revision-button');\n\n      if (anotherTimeButton !== null) {\n        anotherTimeButton.forEach(function (button) {\n          __webpack_require__.e(/* import() */ 411).then(__webpack_require__.bind(__webpack_require__, 411)).then(function (module) {\n            var anotherTimeRevisionButtonClick = module.default;\n            button.addEventListener('click', anotherTimeRevisionButtonClick);\n          });\n        });\n      }\n    }\n  }, {\n    key: \"calendarTableInteractions\",\n    value: function calendarTableInteractions() {\n      var tbody = this.root.querySelector('tbody');\n\n      if (tbody !== null) {\n        var _this$root$querySelec;\n\n        var subjectDate = tbody.querySelectorAll('.subject-date');\n        var date = new Date();\n        subjectDate.forEach(function (sd) {\n          var splittedDate = sd.innerHTML.split('-');\n          var day = parseInt(splittedDate[0]);\n          var month = splittedDate[1];\n\n          if (day < date.getDate() && month <= date.getMonth() || month < date.getMonth() + 1) {\n            //on supprime l'emploi du temps\n            (0,jquery.get)('/drop-calendar');\n            new SidebraLeft();\n          }\n        });\n        (_this$root$querySelec = this.root.querySelector('.delete_button')) === null || _this$root$querySelec === void 0 ? void 0 : _this$root$querySelec.addEventListener('click', handleDeleteCalendar);\n      }\n    }\n  }]);\n\n  return Content;\n}();\n\n\n;// CONCATENATED MODULE: ./src/Modules/SidebarLeft.js\nfunction SidebarLeft_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction SidebarLeft_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SidebarLeft_createClass(Constructor, protoProps, staticProps) { if (protoProps) SidebarLeft_defineProperties(Constructor.prototype, protoProps); if (staticProps) SidebarLeft_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar SidebraLeft = /*#__PURE__*/function () {\n  function SidebraLeft() {\n    var _this = this;\n\n    SidebarLeft_classCallCheck(this, SidebraLeft);\n\n    this.contentElement = document.querySelector('.content');\n    this.sidebarLeftChildren = document.querySelectorAll('.sidebar-left i');\n\n    if (this.sidebarLeftChildren !== null) {\n      this.sidebarLeftChildren.forEach(function (child) {\n        if (child.classList.contains('active-item')) {\n          _this.loadContent();\n        }\n      });\n    }\n  }\n\n  SidebarLeft_createClass(SidebraLeft, [{\n    key: \"sidebarLeftChildrenclick\",\n    value: function sidebarLeftChildrenclick() {\n      var _this2 = this;\n\n      this.sidebarLeftChildren.forEach(function (child) {\n        child.addEventListener('click', function (e) {\n          _this2.contentElement.innerHTML = \"\";\n\n          _this2.sidebarLeftChildren.forEach(function (s) {\n            s.classList.remove('active-item');\n          });\n\n          if (!child.classList.contains('active-item')) {\n            child.classList.add('active-item');\n          }\n\n          _this2.loadContent();\n        });\n      });\n    }\n  }, {\n    key: \"loadContent\",\n    value: function loadContent() {\n      var className = document.querySelector('.active-item').classList.value.split(\" \")[2];\n      var route = \"/\" + className.replace(\"-logo\", \"\");\n      (0,ajax/* get */.U)(route).then(function (res) {\n        new Content(res);\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }]);\n\n  return SidebraLeft;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBWEE7QUFBQTtBQUFBO0FBZUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTs7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FDREE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7O0FBSUE7QUFDQTs7QUFBQTs7QUFDQTs7QUFEQTs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFhQTs7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQU1BO0FBQ0E7QUFLQTs7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBOztBQUNBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUF4aUJBOzs7O0FDUEE7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFFQTtBQUNBOztBQUFBO0FBRUE7Ozs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQW5CQTs7OztBQ0xBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOzs7Ozs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBOztBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUN0RUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQUE7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3Jlc3BvbnNpdmVzL21vZGFsUmVzaXplLmpzP2I0NGIiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0Fic3RyYWN0Q2xhc3Nlcy9Ub29scy9jYWxlbmRhckdlbmVyYXRpb25Ub29scy5qcz9lOThiIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9BYnN0cmFjdENsYXNzZXMvQ2FsZW5kYXJDcmVhdGlvbkRPTUludGVyYWN0aW9ucy5qcz9iZDQxIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9GdW5jdGlvbnMvaGFuZGxlQWRkQ2FsZW5kYXIuanM/MmQ5YiIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvQWJzdHJhY3RDbGFzc2VzL2RlbGV0ZUNhbGVuZGFyRE9NSW50ZXJhY3Rpb25zLmpzPzJhZTAiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3VzZXIvaGFuZGxlRGVsZXRlQ2FsZW5kYXIuanM/ZDRlMCIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvTW9kdWxlcy9Db250ZW50LmpzP2M2NDAiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL01vZHVsZXMvU2lkZWJhckxlZnQuanM/MjEzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGNsYXNzIG1vZGFsUmVzaXplIHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoQ2FsZW5kYXJDcmVhdGlvbkRPTSkgXHJcbiAgICB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUgQ2FsZW5kYXJDcmVhdGlvbkRPTUludGVyYWN0aW9uc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTSA9IENhbGVuZGFyQ3JlYXRpb25ET01cclxuICAgICAgICB0aGlzLmlzUm93QWN0aW9uQnV0dG9uc0hpZGRlbiA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUoKVxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVdpbmRvd1Jlc2l6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGhpZGVSb3dBY3Rpb25CdXR0b25zID0gd2luZG93LmlubmVyV2lkdGggPD0gODAwXHJcbiAgICAgICAgaWYoaGlkZVJvd0FjdGlvbkJ1dHRvbnMgJiYgdGhpcy5jYWxlbmRhckNyZWF0aW9uRE9NLm1vZGFsKXtcclxuICAgICAgICAgICAgdGhpcy5pc1Jvd0FjdGlvbkJ1dHRvbnNIaWRkZW4gPSB0cnVlXHJcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5hcHBlbmRSb3dBY3Rpb25CdXR0b25zSW50b0FNZW51KClcclxuICAgICAgICB9ZWxzZSBpZighaGlkZVJvd0FjdGlvbkJ1dHRvbnMgJiYgdGhpcy5jYWxlbmRhckNyZWF0aW9uRE9NLm1vZGFsICYmIHRoaXMuaXNSb3dBY3Rpb25CdXR0b25zSGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5nZXRSb3dBY3Rpb25CdXR0b25zT3V0T2ZNZW51KClcclxuICAgICAgICAgICAgdGhpcy5pc1Jvd0FjdGlvbkJ1dHRvbnNIaWRkZW4gPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IGNsYXNzaWNGb3JMb29wLCBjcmVhdGVBcnJheSwgZm9yZWFjaEFycmF5RWxlbWVudHMsIGlzVW5kZWZpbmVkLCBsb29wT3Zlck9iamVjdCwgcHVzaEVsZW1lbnRUb0FycmF5IH0gZnJvbSBcIi4uLy4uL0Z1bmN0aW9ucy9Ub29scy9Ub29sc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBjYWxlbmRhckdlbmVyYXRpb25Ub29scyB7XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtjYWxlbmRhckdlbmVyYXRpb259IGNhbGVuZGFyR2VuZXJhdGlvbiBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXJfY3JlYXRpb25fbW9kYWwnKVxyXG4gICAgICAgIHRoaXMuZGF0ZVR5cGVJbnB1dHMgPSBbXVxyXG4gICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlID0ge31cclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0XHJcbiAgICAgICAgdGhpcy5saW5lc1RvUmVwZWF0ID0ge31cclxuICAgICAgICB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGUgPSB7fVxyXG4gICAgICAgIHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZXRpbWUgPSB7fVxyXG4gICAgICAgIHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmdcclxuICAgICAgICB0aGlzLm5leHREYXRlVHlwZUlucHV0XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZSA9IDBcclxuICAgICAgICB0aGlzLm51bWJlck9mTGluZXNPZkV4ZXJjaXNlUGVyRGF0ZSA9IFtdXHJcbiAgICAgICAgdGhpcy5zcGFjZUlzVW5kZXIySCA9IGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgZmlsbElucHV0c1dpdGhTYW1lRGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5pbnB1dHMgPSBjcmVhdGVBcnJheSh0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpXHJcbiAgICAgICAgdGhpcy5maWxsRGF0ZVR5cGVJbnB1dHMoKVxyXG4gICAgICAgIHRoaXMuZmlsbElucHV0c1dpdGhTYW1lQnlEYXRlVHlwZUlucHV0cygpXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZmlsbERhdGVUeXBlSW5wdXRzKClcclxuICAgIHtcclxuICAgICAgICBmb3JlYWNoQXJyYXlFbGVtZW50cyh0aGlzLmlucHV0cywgKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGlucHV0LmlkID09PSAnZGF0ZS1pbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgIHB1c2hFbGVtZW50VG9BcnJheShpbnB1dCwgdGhpcy5kYXRlVHlwZUlucHV0cylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZmlsbElucHV0c1dpdGhTYW1lQnlEYXRlVHlwZUlucHV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgY2xhc3NpY0Zvckxvb3AodGhpcy5kYXRlVHlwZUlucHV0cywgKGN1cnJlbnREYXRlVHlwZUlucHV0LCBuZXh0RGF0ZVR5cGVJbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0ID0gY3VycmVudERhdGVUeXBlSW5wdXRcclxuICAgICAgICAgICAgdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dCA9IG5leHREYXRlVHlwZUlucHV0XHJcbiAgICAgICAgICAgIGlmKCFpc1VuZGVmaW5lZChuZXh0RGF0ZVR5cGVJbnB1dCkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEYXRlSW5DdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRzQXJlU2FtZSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURhdGVJbkN1cnJlbnRBbmROZXh0RGF0ZVR5cGVJbnB1dHNBcmVEaWZmZXJlbnRzKClcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hDdXJyZW50RGF0ZVR5cGVJbnB1dCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURhdGVJbkN1cnJlbnRBbmROZXh0RGF0ZVR5cGVJbnB1dHNBcmVTYW1lKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBkYXRlSW5DdXJyZW50SW5wdXQgPSB0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0LnZhbHVlXHJcbiAgICAgICAgY29uc3QgZGF0ZUluTmV4dElucHV0ID0gdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGlmKGRhdGVJbkN1cnJlbnRJbnB1dCA9PT0gZGF0ZUluTmV4dElucHV0KXtcclxuICAgICAgICAgICB0aGlzLnB1c2hDdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRJblNhbWVBcnJheShkYXRlSW5DdXJyZW50SW5wdXQpICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1c2hDdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRJblNhbWVBcnJheShkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdID0gW11cclxuICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZV0ucHVzaCh0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXS5wdXNoKHRoaXMubmV4dERhdGVUeXBlSW5wdXQpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdLnB1c2godGhpcy5uZXh0RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRGF0ZUluQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0c0FyZURpZmZlcmVudHMoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRhdGVJbkN1cnJlbnRJbnB1dCA9IHRoaXMuY3VycmVudERhdGVUeXBlSW5wdXQudmFsdWVcclxuICAgICAgICBjb25zdCBkYXRlSW5OZXh0SW5wdXQgPSB0aGlzLm5leHREYXRlVHlwZUlucHV0LnZhbHVlXHJcbiAgICAgICAgaWYoZGF0ZUluQ3VycmVudElucHV0ICE9PSBkYXRlSW5OZXh0SW5wdXQpe1xyXG4gICAgICAgICAgICB0aGlzLnB1c2hDdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRJbkRpZmZlcmVudEFycmF5cyhkYXRlSW5DdXJyZW50SW5wdXQsIGRhdGVJbk5leHRJbnB1dClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaEN1cnJlbnRBbmROZXh0RGF0ZVR5cGVJbnB1dEluRGlmZmVyZW50QXJyYXlzKGRhdGVJbkN1cnJlbnRJbnB1dCwgZGF0ZUluTmV4dElucHV0KVxyXG4gICAge1xyXG4gICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0pKXtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluQ3VycmVudElucHV0XSA9IFtdXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0ucHVzaCh0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5OZXh0SW5wdXRdKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5OZXh0SW5wdXRdID0gW11cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbk5leHRJbnB1dF0ucHVzaCh0aGlzLm5leHREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1c2hDdXJyZW50RGF0ZVR5cGVJbnB1dCgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZGF0ZUluQ3VycmVudElucHV0ID0gdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0pKXtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluQ3VycmVudElucHV0XSA9IFtdXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0ucHVzaCh0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgIH0gIFxyXG4gICAgfVxyXG5cclxuICAgIGZldGNoTGluZXNUb1JlcGVhdCgpXHJcbiAgICB7XHJcbiAgICAgICAgbG9vcE92ZXJPYmplY3QodGhpcy5pbnB1dHNXaXRoU2FtZURhdGUsIChkYXRlLCBpbnB1dHMpPT57XHJcbiAgICAgICAgICAgIGZvcmVhY2hBcnJheUVsZW1lbnRzKGlucHV0cywgKGlucHV0KT0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHVzaEludG9MaW5lc1RvUmVwZWF0TGluZXNXaWNoQXJlTm90RXhlcmNpc2UoaW5wdXQsIGRhdGUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdXNoSW50b0xpbmVzVG9SZXBlYXRMaW5lc1dpY2hBcmVOb3RFeGVyY2lzZShpbnB1dCwgZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgaW5wdXRMaW5lID0gaW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgbGV0IGlucHV0VHlwZUNoYXB0ZXIgPSBpbnB1dExpbmUucXVlcnlTZWxlY3RvcignI2NoYXB0ZXItaW5wdXQnKVxyXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dFR5cGVDaGFwdGVyLnZhbHVlXHJcbiAgICAgICAgaWYoaW5wdXRWYWx1ZS5pbmNsdWRlcyhcImV4ZXJjaWNlXCIpKXtcclxuICAgICAgICAgICAgdGhpcy5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZSsrXHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2VQZXJEYXRlW2RhdGVdID0gdGhpcy5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZVxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5saW5lc1RvUmVwZWF0W2RhdGVdKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzVG9SZXBlYXRbZGF0ZV0gPSBbXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubGluZXNUb1JlcGVhdFtkYXRlXS5wdXNoKGlucHV0VHlwZUNoYXB0ZXIucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZmV0Y2hMaW5lc1dpdGhTZW1ibGFibGVzVGltZXMoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB0YWJsZUxpbmVzID0gY3JlYXRlQXJyYXkodGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykpXHJcbiAgICAgICAgdGFibGVMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbGluZS5xdWVyeVNlbGVjdG9yKCcjZGF0ZS1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBsaW5lLnF1ZXJ5U2VsZWN0b3IoJyNob3VyLWlucHV0JykudmFsdWVcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGVbZGF0ZV0gPSBbXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGV0aW1lW2RhdGUgKyBob3VyXSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVtkYXRlICsgaG91cl0gPSBbXVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGV0aW1lW2RhdGUgKyBob3VyXS5wdXNoKGxpbmUpICBcclxuICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdLnB1c2gobGluZSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNwYWNlRXZlcnlSZXZpc2lvbnNXaXRoU2FtZUhvdXIoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmcgPSB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGV0aW1lXHJcbiAgICAgICAgdGhpcy5zcGFjZVJldmlzaW9ucygpXHJcbiAgICB9XHJcblxyXG4gICAgc3BhY2VFdmVyeVJldmlzaW9uc1NwYWNlZFVuZGVyMkgoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmcgPSB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGVcclxuICAgICAgICB0aGlzLnNwYWNlSXNVbmRlcjJIID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuc3BhY2VSZXZpc2lvbnMoKVxyXG4gICAgfVxyXG5cclxuICAgIHNwYWNlUmV2aXNpb25zKCl7XHJcbiAgICAgICAgZm9yKGxldCBkYXRlIGluIHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmcpe1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCA9IHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmdbZGF0ZV0ubGVuZ3RoXHJcbiAgICAgICAgICAgIHRoaXMuYWRkSG91cklmVGhlcmVJc011bHRpcGxlTGluZXNXaXRoU2VtYmxhYmxlc1RpbWUoZGF0ZSwgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGgpICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRIb3VySWZUaGVyZUlzTXVsdGlwbGVMaW5lc1dpdGhTZW1ibGFibGVzVGltZShkYXRlLCBsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmxhc3RIb3VyID0gMFxyXG4gICAgICAgIHRoaXMubGFzdEhvdXJJbnB1dFxyXG4gICAgICAgIGlmKGxpbmVzT2ZJbnB1dHNQZXJEYXRlTGVuZ3RoID4gMSl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG91cklucHV0SW5DdXJyZW50TGluZSA9IHRoaXMuY3VycmVudE9ialRvTG9vcEZvclNwYWNpbmdbZGF0ZV1baV0ucXVlcnlTZWxlY3RvcignI2hvdXItaW5wdXQnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdHRlZEhvdXIgPSB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmUudmFsdWUuc3BsaXQoJzonKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ob3VySW5MaW5lID0gcGFyc2VJbnQodGhpcy5zcGxpdHRlZEhvdXJbMF0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNhbWVIb3VyKGxpbmVzT2ZJbnB1dHNQZXJEYXRlTGVuZ3RoLCBpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTcGFjZVVuZGVyMkgoKVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTYW1lSG91cihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCwgaW5kZXhPZkxpbmUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMuc3BhY2VJc1VuZGVyMkggJiYgaW5kZXhPZkxpbmUgPj0gTWF0aC5mbG9vcihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCAvIDIpKXtcclxuICAgICAgICAgICAgdGhpcy5BZGROZXdIb3VyVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgaG91clZhbHVlOiB0aGlzLmhvdXJJbkxpbmUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZVRvQWRkOiAyXHJcbiAgICAgICAgICAgIH0sIHRoaXMuaG91cklucHV0SW5DdXJyZW50TGluZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIEFkZE5ld0hvdXJWYWx1ZShob3VyUHJvcGVydGllcywgaG91cklucHV0KXtcclxuICAgICAgICBsZXQgbmV3SG91ciA9IGhvdXJQcm9wZXJ0aWVzLmhvdXJWYWx1ZSArIGhvdXJQcm9wZXJ0aWVzLnZhbHVlVG9BZGRcclxuICAgICAgICBob3VySW5wdXQudmFsdWUgPSBuZXdIb3VyICsgJzonICsgdGhpcy5zcGxpdHRlZEhvdXJbMV1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTcGFjZVVuZGVyMkgoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuc3BhY2VJc1VuZGVyMkgpe1xyXG4gICAgICAgICAgICBpZih0aGlzLmxhc3RIb3VyID4gMCl7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhvdXJJbkxpbmUgPiB0aGlzLmxhc3RIb3VyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHRoaXMuaG91ckluTGluZSAtIHRoaXMubGFzdEhvdXIpIDwgMiAmJiAodGhpcy5ob3VySW5MaW5lIC0gdGhpcy5sYXN0SG91cikgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZE5ld0hvdXJWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyVmFsdWU6IHRoaXMuaG91ckluTGluZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9BZGQ6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5ob3VySW5wdXRJbkN1cnJlbnRMaW5lKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMubGFzdEhvdXIgPiB0aGlzLmhvdXJJbkxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZigodGhpcy5sYXN0SG91ciAtIHRoaXMuaG91ckluTGluZSkgPCAyICYmICh0aGlzLmxhc3RIb3VyIC0gdGhpcy5ob3VySW5MaW5lKSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZE5ld0hvdXJWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyVmFsdWU6IHRoaXMubGFzdEhvdXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQWRkOiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMubGFzdEhvdXJJbnB1dClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhc3RIb3VyID0gdGhpcy5ob3VySW5MaW5lXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEhvdXJJbnB1dCA9IHRoaXMuaG91cklucHV0SW5DdXJyZW50TGluZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdXNoUmVtb3ZlQnV0dG9uSWZJblJvd0FjdGlvbkJ1dHRvbnNUb0FycmF5KHJvd0FjdGlvbkJ1dHRvbnMsIGFycmF5KVxyXG4gICAge1xyXG4gICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmVfbGluZV9idXR0b24nKSBpbiByb3dBY3Rpb25CdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvayBpdFxcJ3MgaW4nKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IHBvc3QgfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1JlcXVlc3QvYWpheFwiO1xyXG5pbXBvcnQgeyBlbGVtZW50SGFzQ2xhc3NOYW1lLCByZW1vdmVFbGVtZW50RnJvbURPTSB9IGZyb20gXCIuLi9GdW5jdGlvbnMvVG9vbHMvRE9NVG9vbHNcIjtcclxuaW1wb3J0IHsgY3JlYXRlQXJyYXksIGZvcmVhY2hBcnJheUVsZW1lbnRzLCBpc1VuZGVmaW5lZCwgbG9vcE92ZXJPYmplY3QgfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1Rvb2xzL1Rvb2xzXCI7XHJcbmltcG9ydCB7IG1vZGFsUmVzaXplIH0gZnJvbSBcIi4uL3Jlc3BvbnNpdmVzL21vZGFsUmVzaXplXCI7XHJcbmltcG9ydCBET01JbnRlcmFjdGlvbnMgZnJvbSBcIi4vRE9NSW50ZXJhY3Rpb25zXCI7XHJcbmltcG9ydCBjYWxlbmRhckdlbmVyYXRpb25Ub29scyBmcm9tIFwiLi9Ub29scy9jYWxlbmRhckdlbmVyYXRpb25Ub29sc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsZW5kYXJDcmVhdGlvbkRPTUludGVyYWN0aW9ucyBleHRlbmRzIERPTUludGVyYWN0aW9ucyB7XHJcbiAgICBmb3JtQWN0aW9uID0gJy9jcmVhdGUtY2FsZW5kYXInXHJcbiAgICBub3RpZmljYXRpb25DbGFzc05hbWUgPSAnY2FsZW5kYXJfY3JlYXRpb25fbm90aWZpY2F0aW9uJ1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgdGhpcy5hY3Rpb25zQnV0dG9uc1BlclJvdyA9IHt9XHJcbiAgICAgICAgdGhpcy5hdExlYXN0T25lUm93SXNFeGVyY2lzZSA9IDRcclxuICAgICAgICB0aGlzLmF0TGVhc3RUd29Sb3dzQXJlRXhlcmNpc2VzID0gNVxyXG4gICAgICAgIHRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkID0gZmFsc2VcclxuICAgICAgICB0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lcyA9IDFcclxuICAgICAgICB0aGlzLm5vcm1hbERhaWx5TnVtYmVyT2ZTdWJqZWN0cyA9IDNcclxuICAgICAgICB0aGlzLmlzUXVvdGFFcnJvciA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5pc1dhcm5pbmcgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMubWVzc2FnZUZvclF1b3RhRXJyb3JPbmUgPSBcIkVycmV1ciBkdSBxdW90YSAzIG1hdGnDqHJlcy9qLiBJbCBmYXV0IGF1IG1vaW5zIHF1ZSBsJ3VuZSBkJ2VudHJlIGVsbGVzIHNvaWVudCB1biBleGVyY2ljZS5cIlxyXG4gICAgICAgIHRoaXMubWVzc2FnZUZvclF1b3RhRXJyb3JUd28gPSBcIkVycmV1ciBkdSBxdW90YSAzIG1hdGnDqHJlcy9qLiBJbCBmYXV0IGF1IG1vaW5zIHF1ZSBkZXV4IGQnZW50cmUgZWxsZXMgc29pZW50IHVuIGV4ZXJjaWNlLlwiXHJcbiAgICAgICAgdGhpcy5jdXJyZW50UXVvdGFFcnJvck1lc3NhZ2VUb1Nob3dcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBY3Rpb25zSW5Nb2RhbEZvcm0oKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyLmhhbmRsZUFjdGlvbnNJbk1vZGFsRm9ybSgpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbiA9IG5ldyBjYWxlbmRhckdlbmVyYXRpb25Ub29scygpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVBZGRMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FsZW5kYXJHZW5lcmF0aW9uKClcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBZGRMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzKytcclxuICAgICAgICBsZXQgYWRkTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmFkZC1saW5lJylcclxuICAgICAgICBhZGRMaW5lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hcHBlbmROZXdMaW5lVG9DYWxlbmRhckNyZWF0aW9uVGFibGUuYmluZCh0aGlzKSkgIFxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZE5ld0xpbmVUb0NhbGVuZGFyQ3JlYXRpb25UYWJsZShlKXtcclxuICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlTGluZUJ1dHRvbkNsaWNrKClcclxuICAgICAgICB0aGlzLnJlbW92ZVJvd0FjdGlvbk1lbnVJZkV4aXN0cyhlKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FsZW5kYXJHZW5lcmF0aW9uKClcclxuICAgICAgICB0aGlzLmhhbmRsZUFkZExpbmVCdXR0b25DbGljaygpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTGluZSAoKXtcclxuICAgICAgICB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgndHInLCAnc3ViamVjdC1saW5lJylcclxuICAgICAgICBsZXQgcmVtb3ZlTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1saW5lJylcclxuICAgICAgICBsZXQgYWRkTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmFkZC1saW5lJylcclxuICAgICAgICBsZXQgc3ViamVjdExpbmVcclxuICAgICAgICBsZXQgZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbiBcclxuICAgICAgICBpZihhZGRMaW5lQnV0dG9uKXtcclxuICAgICAgICAgICAgdGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyID0gYWRkTGluZUJ1dHRvbi5wYXJlbnRFbGVtZW50IFxyXG4gICAgICAgICAgICBzdWJqZWN0TGluZSA9IHRoaXMuYWRkTGluZUJ1dHRvbkNvbnRhaW5lci5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgICAgIGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24gPSBzdWJqZWN0TGluZS5xdWVyeVNlbGVjdG9yKCcuZ2VuZXJhdGUtY2FsZW5kYXInKVxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJCdXR0b25Db250YWluZXIgPSBnZW5lcmF0ZUNhbGVuZGFyQnV0dG9uLnBhcmVudEVsZW1lbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jcmVhdGlvbi10Ym9keScpXHJcbiAgICAgICAgaWYocmVtb3ZlTGluZUJ1dHRvbiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHJlbW92ZUxpbmVCdXR0b24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJlbW92ZUxpbmVCdXR0b24ucGFyZW50RWxlbWVudCkgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5LmFwcGVuZENoaWxkKHRoaXMuY3VycmVudENyZWF0ZWRMaW5lKVxyXG4gICAgICAgIGxldCBjdXJyZW50Q3JlYXRlZExpbmVJbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdzdWJqZWN0LSR7dGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXN9JyBpZD0nc3ViamVjdC1pbnB1dCc+PC90ZD5cclxuICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J2NoYXB0ZXItJHt0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lc30nIGlkPSdjaGFwdGVyLWlucHV0Jz48L3RkPlxyXG4gICAgICAgIDx0ZD48aW5wdXQgdHlwZT0nZGF0ZScgbmFtZT0nZGF0ZS0ke3RoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzfScgaWQ9J2RhdGUtaW5wdXQnPjwvdGQ+XHJcbiAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSd0aW1lJyBuYW1lPSdob3VyLSR7dGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXN9JyBpZD0naG91ci1pbnB1dCc+PC90ZD5cclxuICAgICAgICBgXHJcbiAgICAgICAgaWYoIXRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDcmVhdGVkTGluZUlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gYWRkX2xpbmVfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLXBsdXMgYWRkLWxpbmUnPjwvaT48L3RkPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9J3Jvd19hY3Rpb25fYnV0dG9uIGdlbmVyYXRlX2NhbGVuZGFyX2J1dHRvbic+PGkgY2xhc3M9J2ZhcyBmYS1jaGVjayBnZW5lcmF0ZS1jYWxlbmRhcic+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gcmVtb3ZlX2xpbmVfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLXdpbmRvdy1jbG9zZSByZW1vdmUtbGluZSc+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q3JlYXRlZExpbmUuaW5uZXJIVE1MID0gY3VycmVudENyZWF0ZWRMaW5lSW5uZXJIVE1MXHJcbiAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPD0gODAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpZighaXNVbmRlZmluZWQoc3ViamVjdExpbmUpKXtcclxuICAgICAgICAgICAgICAgIHN1YmplY3RMaW5lLnJlbW92ZUNoaWxkKHRoaXMuYWRkTGluZUJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIHN1YmplY3RMaW5lLnJlbW92ZUNoaWxkKHRoaXMuZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdyb3dGb3JtSGVpZ2h0KClcclxuICAgICAgICB0aGlzLmdyb3dNb2RhbEhlaWdodCgpXHJcbiAgICAgICAgdGhpcy5ncm93Qm9keUhlaWdodElmTW9kYWxDb2xsYXBzZSgpXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBoYW5kbGVSZW1vdmVMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1saW5lJykgICAgICBcclxuICAgICAgICBpZih0aGlzLnJlbW92ZUxpbmVCdXR0b24gIT09IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrT25SZW1vdmVMaW5lQnV0dG9uKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2tPblJlbW92ZUxpbmVCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lcy0tXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lciA9IHRoaXMucmVtb3ZlTGluZUJ1dHRvbi5wYXJlbnROb2RlXHJcbiAgICAgICAgICAgIGxldCByZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50ID0gdGhpcy5yZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyLnBhcmVudE5vZGVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnRIYXNDbGFzc05hbWUocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudCwgJ2FjdGlvbl9tZW51JykpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQucHJldmlvdXNFbGVtZW50U2libGluZylcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudShyZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUb0xhc3RSb3dBY3Rpb25CdXR0b25zKClcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQuY2xhc3NMaXN0LmFkZCgnaW52aXNpYmxlLXN1YmplY3QtbGluZScpXHJcbiAgICAgICAgICAgICAgICByZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkucmVtb3ZlQ2hpbGQocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRvTGFzdFJvd0FjdGlvbkJ1dHRvbnMoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZFRvTGFzdFJvd0FjdGlvbkJ1dHRvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5Lmxhc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQodGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5Lmxhc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZUNhbGVuZGFyQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgIGlmKHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5LmZpcnN0RWxlbWVudENoaWxkICE9PSB0aGlzLmNhbGVuZGFyQ3JlYXRpb25UYm9keS5sYXN0RWxlbWVudENoaWxkKXtcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkubGFzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZCh0aGlzLnJlbW92ZUxpbmVCdXR0b25Db250YWluZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZHVjZUZvcm1IZWlnaHRVbnRpbE5vcm1hbCgpXHJcbiAgICAgICAgdGhpcy5yZWR1Y2VNb2RhbEhlaWdodFVudGlsTm9ybWFsKClcclxuICAgICAgICB0aGlzLnJlZHVjZUJvZHlIZWlndGhVbnRpbE5vcm1hbCgpXHJcbiAgICB9XHJcblxyXG4gICAgZ3Jvd0Zvcm1IZWlnaHQoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZ3Jvd0VsZW1lbnRTaXplKHRoaXMubW9kYWxGb3JtLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2hlaWdodCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm1vZGFsRm9ybS5vZmZzZXRIZWlnaHQgKyB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5vZmZzZXRIZWlnaHRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdyb3dNb2RhbEhlaWdodCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5ncm93RWxlbWVudFNpemUodGhpcy5tb2RhbCwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICdoZWlnaHQnLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgKyB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5vZmZzZXRIZWlnaHRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFxyXG4gICAgICogQHBhcmFtIHt7YXR0cmlidXRlOiBzdHJpbmcsIHZhbHVlOiBudW1iZXJ9fSBvcHRpb25zIFxyXG4gICAgICovXHJcbiAgICBncm93RWxlbWVudFNpemUoZWxlbWVudCwgb3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICBpZihvcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3dpZHRoJyl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBvcHRpb25zLnZhbHVlICsgJ3B4J1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLnZhbHVlICsgJ3B4J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ3Jvd0JvZHlIZWlnaHRJZk1vZGFsQ29sbGFwc2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ID49IDQ3MCkge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3dFbGVtZW50U2l6ZShkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdoZWlnaHQnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0ICsgdGhpcy5jdXJyZW50Q3JlYXRlZExpbmUub2Zmc2V0SGVpZ2h0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZHVjZUZvcm1IZWlnaHRVbnRpbE5vcm1hbCgpIHtcclxuICAgICAgICBsZXQgbW9kYWxGb3JtSGVpZ2h0ID0gdGhpcy5tb2RhbEZvcm0ub2Zmc2V0SGVpZ2h0XHJcbiAgICAgICAgaWYobW9kYWxGb3JtSGVpZ2h0ID4gdGhpcy5vcmlnaW5hbE1vZGFsRm9ybUhlaWd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsRm9ybS5zdHlsZS5oZWlnaHQgPSBtb2RhbEZvcm1IZWlnaHQgLSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykub2Zmc2V0SGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWR1Y2VNb2RhbEhlaWdodFVudGlsTm9ybWFsKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLm1vZGFsLm9mZnNldEhlaWdodCA+IHRoaXMub3JpZ2luYWxNb2RhbEhlaWd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLnN0eWxlLmhlaWdodCA9IHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0IC0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCd0cicpLm9mZnNldEhlaWdodCArICdweCdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVkdWNlQm9keUhlaWd0aFVudGlsTm9ybWFsKClcclxuICAgIHtcclxuICAgICAgICBpZihkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCA+IHRoaXMub3JpZ2luYWxCb2R5SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQgLSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykub2Zmc2V0SGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDYWxlbmRhckdlbmVyYXRpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBnZW5lcmF0ZUNhbGVuZGFyQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcuZ2VuZXJhdGUtY2FsZW5kYXInKVxyXG4gICAgICAgIGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxlbmRhcihlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24uZmlsbElucHV0c1dpdGhTYW1lRGF0ZSgpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5mZXRjaExpbmVzVG9SZXBlYXQoKVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVMaW5lc09mUmVwZXRpdGlvbnMoKVxyXG4gICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudUlmRXhpc3RzKGUpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5mZXRjaExpbmVzV2l0aFNlbWJsYWJsZXNUaW1lcygpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5zcGFjZUV2ZXJ5UmV2aXNpb25zV2l0aFNhbWVIb3VyKClcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLnNwYWNlRXZlcnlSZXZpc2lvbnNTcGFjZWRVbmRlcjJIKClcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUxpbmVzT2ZSZXBldGl0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgbG9vcE92ZXJPYmplY3QodGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5pbnB1dHNXaXRoU2FtZURhdGUsIChkYXRlLCBpbnB1dHMpPT57XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZTdWJqZWN0c0lzTm9ybWFsKGlucHV0cywgZGF0ZSlcclxuICAgICAgICAgICAgdGhpcy5udW1iZXJPZlN1YmplY3RzTW9yZVRoYW5Ob3JtYWwoaW5wdXRzLCBkYXRlKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG51bWJlck9mU3ViamVjdHNJc05vcm1hbChpbnB1dHMsIGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoaW5wdXRzLmxlbmd0aCA8IHRoaXMuYXRMZWFzdE9uZVJvd0lzRXhlcmNpc2UgJiYgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5saW5lc1RvUmVwZWF0W2RhdGVdICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmxpbmVzVG9SZXBlYXRbZGF0ZV0uZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc0NhbGVuZGFyKGVsZW1lbnQpICAgIFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBudW1iZXJPZlN1YmplY3RzTW9yZVRoYW5Ob3JtYWwoaW5wdXRzLCBkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIHN3aXRjaChpbnB1dHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgY2FzZSB0aGlzLmF0TGVhc3RPbmVSb3dJc0V4ZXJjaXNlOiBcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmdPbmUoZGF0ZSlcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgdGhpcy5hdExlYXN0VHdvUm93c0FyZUV4ZXJjaXNlczpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmdUd28oZGF0ZSlcclxuICAgICAgICAgICAgICAgIGJyZWFrICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZ09uZShkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFF1b3RhRXJyb3JNZXNzYWdlVG9TaG93ID0gdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvck9uZVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmcoZGF0ZSlcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZ1R3byhkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFF1b3RhRXJyb3JNZXNzYWdlVG9TaG93ID0gdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvclR3b1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmcoZGF0ZSlcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZyhkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24ubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2VQZXJEYXRlW2RhdGVdID49IDEpe1xyXG4gICAgICAgICAgICBpZighdGhpcy5pc1F1b3RhRXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaEFycmF5RWxlbWVudHModGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5saW5lc1RvUmVwZWF0W2RhdGVdLCAoZWxlbWVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVwZXRpdGlvbnNDYWxlbmRhcihlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLnNob3dXYXJuaW5nKGRhdGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dXYXJuaW5nKGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5pc1F1b3RhRXJyb3IgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5mb2N1c0NoYXB0ZXJJbnB1dE9uKHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24ubGluZXNUb1JlcGVhdFtkYXRlXSlcclxuICAgICAgICB0aGlzLmNyZWF0ZVdhcm5pbmcodGhpcy5jdXJyZW50UXVvdGFFcnJvck1lc3NhZ2VUb1Nob3cpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0geyp9IGxpbmVzVG9SZXBlYXRPZkFEYXRlIFxyXG4gICAgICovXHJcbiAgICBmb2N1c0NoYXB0ZXJJbnB1dE9uKGxpbmVzVG9SZXBlYXRPZkFEYXRlKXtcclxuICAgICAgICBmb3JlYWNoQXJyYXlFbGVtZW50cyhsaW5lc1RvUmVwZWF0T2ZBRGF0ZSwgKGxpbmUpPT57XHJcbiAgICAgICAgICAgIHRoaXMuYWxlcnRGb2N1c09uRWxlbWVudChsaW5lLnF1ZXJ5U2VsZWN0b3IoJyNjaGFwdGVyLWlucHV0JykpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVJlcGV0aXRpb25zQ2FsZW5kYXIoZWxlbWVudCl7XHJcbiAgICAgICAgbGV0IGVsZW1lbnRJbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JylcclxuICAgICAgICBsZXQgZW1wdHlJbnB1dEV4aXN0cyA9IGZhbHNlXHJcblxyXG4gICAgICAgIGVsZW1lbnRJbnB1dHMuZm9yRWFjaChpID0+IHtcclxuICAgICAgICAgICAgaWYoaS52YWx1ZSA9PT0gJycpe1xyXG4gICAgICAgICAgICAgICAgZW1wdHlJbnB1dEV4aXN0cyA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoIWVtcHR5SW5wdXRFeGlzdHMpe1xyXG4gICAgICAgICAgICB0aGlzLnJlcGV0aXRpb25MaW5lc0hhdmVCZWVuQ3JlYXRlZCA9IHRydWVcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMaW5lKClcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUxpbmVzKGVsZW1lbnQpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53YXJuaW5nJykgPT09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1dhcm5pbmcgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdhcm5pbmcoXCJJbXBvc3NpYmxlIGRlIGfDqW7DqXJlciBsZXMgcsOpcMOpdGl0aW9ucyBzaSBsZXMgY2hhbXBzIHNvbnQgdmlkZXMuXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTGluZXMoZWxlbWVudCl7XHJcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGJvZHknKVxyXG4gICAgICAgIGxldCBzdWJqZWN0SW5wdXQgPSB0Ym9keS5sYXN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoJyNzdWJqZWN0LWlucHV0JylcclxuICAgICAgICBsZXQgY2hhcHRlcklucHV0ID0gdGJvZHkubGFzdEVsZW1lbnRDaGlsZC5xdWVyeVNlbGVjdG9yKCcjY2hhcHRlci1pbnB1dCcpXHJcbiAgICAgICAgbGV0IGRhdGVJbnB1dCA9IHRib2R5Lmxhc3RFbGVtZW50Q2hpbGQucXVlcnlTZWxlY3RvcignI2RhdGUtaW5wdXQnKVxyXG4gICAgICAgIGxldCBob3VySW5wdXQgPSB0Ym9keS5sYXN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoJyNob3VyLWlucHV0JylcclxuICAgIFxyXG4gICAgICAgIHN1YmplY3RJbnB1dC52YWx1ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignI3N1YmplY3QtaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgIGNoYXB0ZXJJbnB1dC52YWx1ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXB0ZXItaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzcGxpdHRlZEhvdXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob3VyLWlucHV0JykudmFsdWUuc3BsaXQoJzonKVxyXG4gICAgICAgIGxldCBzcGxpdHRlZERhdGUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlLWlucHV0JykudmFsdWUuc3BsaXQoJy0nKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB5ZWFyID0gc3BsaXR0ZWREYXRlWzBdXHJcbiAgICAgICAgbGV0IG1vbnRoID0gc3BsaXR0ZWREYXRlWzFdXHJcbiAgICAgICAgbGV0IGRheSA9IHNwbGl0dGVkRGF0ZVsyXVxyXG4gICAgICAgIGxldCBuZXdIb3VyVmFsdWUgPSBwYXJzZUludChzcGxpdHRlZEhvdXJbMF0pICsgOFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKG5ld0hvdXJWYWx1ZSA8IDIwKXtcclxuICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZS1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgICAgIGhvdXJJbnB1dC52YWx1ZSA9IG5ld0hvdXJWYWx1ZSArICc6JyArIHNwbGl0dGVkSG91clsxXVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBsZXQgaW50TmV3RGF5VmFsdWUgPSBwYXJzZUludChkYXkpICsgMVxyXG4gICAgICAgICAgICBsZXQgbmV3RGF5VmFsdWUgPSBpbnROZXdEYXlWYWx1ZS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIGludE5ld0RheVZhbHVlLnRvU3RyaW5nKCkgOiBwYXJzZUludChkYXkpICsgMVxyXG4gICAgICAgICAgICBuZXdIb3VyVmFsdWUgPSA4XHJcbiAgICAgICAgICAgIGRhdGVJbnB1dC52YWx1ZSA9IHllYXIgKyAnLScgKyBtb250aCArICctJyArIG5ld0RheVZhbHVlXHJcbiAgICAgICAgICAgIGlmKGRhdGVJbnB1dC52YWx1ZSA9PT0gJycpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGludE1vbnRoID0gcGFyc2VJbnQobW9udGgpXHJcbiAgICAgICAgICAgICAgICBpZihpbnRNb250aCA8IDEyKXtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlSW5wdXQudmFsdWUgPSB5ZWFyICsgJy0wJyArIChpbnRNb250aCArIDEpICsgJy0nICsgJzAxJ1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gKHBhcnNlSW50KHllYXIpICsgMSkgKyAnLScgKyAnMDEnICsgJy0nICsgJzAxJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaG91cklucHV0LnZhbHVlID0gJzAnICsgbmV3SG91clZhbHVlICsgJzonICsgc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICAgICAgfSAgIFxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVdhcm5pbmcobWVzc2FnZSl7XHJcbiAgICBcclxuICAgICAgICBsZXQgd2FybmluZ1BhcmFncmFwaCA9IHRoaXMuY3JlYXRlRWxlbWVudCgncCcsICd3YXJuaW5nJylcclxuICAgICAgICBsZXQgaSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnaScsICdmYXMgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUnKVxyXG4gICAgICAgIGxldCBzcGFuID0gdGhpcy5jcmVhdGVFbGVtZW50KCdzcGFuJywgJ3dhcm5pbmctbWVzc2FnZScpXHJcblxyXG4gICAgICAgIHdhcm5pbmdQYXJhZ3JhcGguYXBwZW5kQ2hpbGQoaSlcclxuICAgICAgICB3YXJuaW5nUGFyYWdyYXBoLmFwcGVuZENoaWxkKHNwYW4pXHJcbiAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBtZXNzYWdlXHJcblxyXG4gICAgICAgIHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYmVmb3JlKHdhcm5pbmdQYXJhZ3JhcGgpXHJcbiAgICAgICAgd2FybmluZ1BhcmFncmFwaC5vZmZzZXRXaWR0aFxyXG4gICAgICAgIHdhcm5pbmdQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZCgnYWN0aXZlX3dhcm5pbmcnKVxyXG4gICAgICAgIGNvbnN0IG1hcmdpbkJvdHRvbSA9IDMwXHJcbiAgICAgICAgdGhpcy5tb2RhbC5zdHlsZS5oZWlnaHQgPSB0aGlzLm1vZGFsLm9mZnNldEhlaWdodCArIHdhcm5pbmdQYXJhZ3JhcGgub2Zmc2V0SGVpZ2h0ICsgbWFyZ2luQm90dG9tICsgJ3B4J1xyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnRBZnRlck1pbGxpc2Vjb25kcyh3YXJuaW5nUGFyYWdyYXBoLCA1MDAwLCB7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZVRvUmVtb3ZlOiAnYWN0aXZlX3dhcm5pbmcnLFxyXG4gICAgICAgICAgICBlbGVtZW50V2l0aEhlaWdodFRvRGVjcmVhc2U6IFt0aGlzLm1vZGFsLCB3YXJuaW5nUGFyYWdyYXBoLm9mZnNldEhlaWdodCArIG1hcmdpbkJvdHRvbV1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHBvc3RDb250ZW50V2l0aE5vdGlmaWNhdGlvblRoZW5SZWxvYWQoKVxyXG4gICAge1xyXG4gICAgICAgIHBvc3QodGhpcy5mb3JtQWN0aW9uLCB0aGlzLmRhdGFUb1Bvc3RPYmopXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdFJlc3BvbnNlKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSWwgeSBhIGV1IHVuZSBlcnJldXIgOlwiICsgZXJyb3IpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlUmVxdWVzdFJlc3BvbnNlKHJlc3BvbnNlKVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNwb25zZUpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlKVxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZUpzb24uc3VjY2VzcyAhPT0gdW5kZWZpbmVkID8gcmVzcG9uc2VKc29uLnN1Y2Nlc3MgOiByZXNwb25zZUpzb24uZmFpbFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2hvd05vdGlmaWNhdGlvbldpdGhEYXRhSW5NaWxsaXNlY29uZHMoe1xyXG4gICAgICAgICAgICBjbGFzc05hbWU6IHRoaXMubm90aWZpY2F0aW9uQ2xhc3NOYW1lLCBcclxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZVxyXG4gICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5yZWxvYWRQYWdlKCkgXHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VNb2RhbCgpXHJcbiAgICB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2VNb2RhbCgpXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSB0aGlzLm9yaWdpbmFsQm9keUhlaWdodCArICdweCdcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVSb3dBY3Rpb25NZW51SWZFeGlzdHMoZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgY2xpY2tlZEJ1dHRvbkdyYW5kUGFyZW50ID0gZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIGlmKGNsaWNrZWRCdXR0b25HcmFuZFBhcmVudCBcclxuICAgICAgICAgICAgJiYgZWxlbWVudEhhc0NsYXNzTmFtZShjbGlja2VkQnV0dG9uR3JhbmRQYXJlbnQsJ2FjdGlvbl9tZW51JylcclxuICAgICAgICAgICAgJiYgIXRoaXMuaXNXYXJuaW5nICAgIFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVJvd0FjdGlvbk1lbnUoY2xpY2tlZEJ1dHRvbkdyYW5kUGFyZW50KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oaWRlUm93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KVxyXG4gICAgICAgIGxldCByb3dBY3Rpb25NZW51QnV0dG9uID0gcm93QWN0aW9uTWVudS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb25fbWVudV9idXR0b24nKVxyXG4gICAgICAgIGlmKHJvd0FjdGlvbk1lbnVCdXR0b24pe1xyXG4gICAgICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTShyb3dBY3Rpb25NZW51QnV0dG9uKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTShyb3dBY3Rpb25NZW51KVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZU1vZGFsUmVzcG9uc2l2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgbmV3IG1vZGFsUmVzaXplKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoXHJcbiAgICAgICAgICAgICh0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb25fbWVudV9idXR0b24nKSA9PT0gbnVsbCB8fCB0aGlzLmxhc3RTdWJqZWN0Um93ICE9PSBudWxsKVxyXG4gICAgICAgICAgICAmJiAhdGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWRcclxuICAgICAgICApe1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3RSb3dzID0gY3JlYXRlQXJyYXkodGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3ViamVjdC1saW5lJykpXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFN1YmplY3RSb3dJbmRleCA9IHRoaXMuc3ViamVjdFJvd3MubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RTdWJqZWN0Um93ID0gdGhpcy5zdWJqZWN0Um93c1t0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXhdXHJcbiAgICAgICAgICAgIGxldCByb3dBY3Rpb25CdXR0b25zID0gY3JlYXRlQXJyYXkodGhpcy5sYXN0U3ViamVjdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCcucm93X2FjdGlvbl9idXR0b24nKSlcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zQnV0dG9uc1BlclJvd1t0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXhdID0gcm93QWN0aW9uQnV0dG9uc1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnVGb3JMYXN0Um93KClcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLnJlcGV0aXRpb25MaW5lc0hhdmVCZWVuQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RTdWJqZWN0Um93ID0gbnVsbFxyXG4gICAgICAgICAgICB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24gPSBudWxsXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTWVudSA9IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTWVudUZvckxhc3RSb3coKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQWN0aW9uTWVudUJ1dHRvbih0aGlzLmxhc3RTdWJqZWN0Um93KVxyXG4gICAgICAgIHRoaXMuY3JlYXRlTWVudUluUm93VGhlbkFwcGVuZENoaWxkcmVuKHRoaXMubGFzdFN1YmplY3RSb3csIHRoaXMuYWN0aW9uc0J1dHRvbnNQZXJSb3dbdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4XSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVSb3dFbGVtZW50fSByb3cgXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUFjdGlvbk1lbnVCdXR0b24ocm93KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbiA9IHJvdy5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uX21lbnVfYnV0dG9uJylcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24pIHx8IHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ3RkJywgJ2FjdGlvbl9tZW51X2J1dHRvbicpXHJcbiAgICAgICAgICAgIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbi5pbm5lckhUTUwgPSBgPHAgY2xhc3M9J2hvdF9kb2dfbWVudV9jaXJjbGUnPjwvcD5cclxuICAgICAgICAgICAgPHAgY2xhc3M9J2hvdF9kb2dfbWVudV9jaXJjbGUnPjwvcD5cclxuICAgICAgICAgICAgPHAgY2xhc3M9J2hvdF9kb2dfbWVudV9jaXJjbGUnPjwvcD5gXHJcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24pXHJcbiAgICAgICAgICAgIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudG9nZ2xlQWN0aW9uTWVudU9mVGhlUm93LmJpbmQodGhpcywgcm93KSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTFRhYmxlUm93RWxlbWVudH0gcm93IFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVNZW51SW5Sb3dUaGVuQXBwZW5kQ2hpbGRyZW4ocm93LCBmdXR1ckNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uTWVudSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgJ2FjdGlvbl9tZW51JylcclxuICAgICAgICBmdXR1ckNoaWxkcmVuLmZvckVhY2goZnV0dXJDaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTWVudS5hcHBlbmRDaGlsZChmdXR1ckNoaWxkKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5hY3Rpb25NZW51LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKVxyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aGlzLmFjdGlvbk1lbnUpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTFRhYmxlUm93RWxlbWVudH0gcm93IFxyXG4gICAgICovXHJcbiAgICB0b2dnbGVBY3Rpb25NZW51T2ZUaGVSb3cocm93KVxyXG4gICAge1xyXG4gICAgICAgIGxldCByb3dBY3Rpb25NZW51ID0gcm93Lmxhc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICBpZihyb3dBY3Rpb25NZW51Lmhhc0F0dHJpYnV0ZSgnaGlkZGVuJykpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Um93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KVxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlUm93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93Um93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KVxyXG4gICAge1xyXG4gICAgICAgIHJvd0FjdGlvbk1lbnUucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG4gICAgICAgIHJvd0FjdGlvbk1lbnUub2Zmc2V0V2lkdGhcclxuICAgICAgICByb3dBY3Rpb25NZW51LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGVfYWN0aW9uX21lbnUnKVxyXG4gICAgICAgIGlmKHJvd0FjdGlvbk1lbnUuY2hpbGRyZW4ubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgIHJvd0FjdGlvbk1lbnUuY2xhc3NMaXN0LmFkZCgndGhyZWVfY2hpbGRyZW4nKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoaWRlUm93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KSBcclxuICAgIHtcclxuICAgICAgICByb3dBY3Rpb25NZW51LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGVfYWN0aW9uX21lbnUnKVxyXG4gICAgICAgIGNvbnN0IGhhbmRsZVRyYW5zaXRpb25FbmQgPSAoKT0+e1xyXG4gICAgICAgICAgICByb3dBY3Rpb25NZW51LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKVxyXG4gICAgICAgICAgICBpZihlbGVtZW50SGFzQ2xhc3NOYW1lKHJvd0FjdGlvbk1lbnUsICd0aHJlZV9jaGlsZHJlbicpKSB7XHJcbiAgICAgICAgICAgICAgICByb3dBY3Rpb25NZW51LmNsYXNzTGlzdC5yZW1vdmUoJ3RocmVlX2NoaWxkcmVuJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb3dBY3Rpb25NZW51LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKVxyXG4gICAgICAgIH1cclxuICAgICAgICByb3dBY3Rpb25NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKVxyXG4gICAgfVxyXG5cclxuICAgIGdldFJvd0FjdGlvbkJ1dHRvbnNPdXRPZk1lbnUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuYWN0aW9uTWVudUV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQWN0aW9uQnV0dG9uc0luUGFyZW50Um93KClcclxuICAgICAgICAgICAgaWYodGhpcy5hY3Rpb25NZW51ICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh0aGlzLmFjdGlvbk1lbnUpKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTSh0aGlzLmFjdGlvbk1lbnUpXHJcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTSh0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aW9uTWVudUV4aXN0cygpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdFN1YmplY3RSb3cgIT09IG51bGwgJiYgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uICE9PSBudWxsICYmIHRoaXMuYWN0aW9uTWVudSAhPT0gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZEFjdGlvbkJ1dHRvbnNJblBhcmVudFJvdygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zQnV0dG9uc1BlclJvd1t0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXhdLmZvckVhY2goYWN0aW9uQnV0dG9uID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdWJqZWN0Um93c1t0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXhdLmFwcGVuZENoaWxkKGFjdGlvbkJ1dHRvbilcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFsZXJ0RW1wdHlJbnB1dHMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubW9kYWxJbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaXNNZXNzYWdlQ29ycmVzcG9uZHNUbyhpbnB1dC5uYW1lKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0Rm9jdXNPbkVsZW1lbnQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsZXJ0Rm9jdXNXaGVuY2xpY2soaW5wdXQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IENhbGVuZGFyQ3JlYXRpb25ET01JbnRlcmFjdGlvbnMgZnJvbSBcIi4uL0Fic3RyYWN0Q2xhc3Nlcy9DYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zXCJcclxuXHJcbiAvKipcclxuKiBjcsOpZSB1biBub3V2ZWwgZW1wbG9pIGR1IHRlbXBzXHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBZGRDYWxlbmRhcihlKXtcclxuICAgbGV0IG51bWJlciA9IDFcclxuICAgbGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpXHJcbiAgIGxldCBkb21JbnRlcmFjdGlvbnMgPSBuZXcgQ2FsZW5kYXJDcmVhdGlvbkRPTUludGVyYWN0aW9ucygpXHJcbiAgIGxldCBmb3JtID0gZG9tSW50ZXJhY3Rpb25zLmNyZWF0ZUZvcm0oJ1BPU1QnLCAnY3JlYXRlLWNhbGVuZGFyJylcclxuXHJcbiAgIGxldCBmb3JtQ29udGVudCA9IGBcclxuICAgICAgIDx0YWJsZSBjbGFzcz1cImNyZWF0ZV9jYWxlbmRhcl90YWJsZVwiPlxyXG4gICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgPHRoPk1hdGnDqHJlPC90aD5cclxuICAgICAgICAgICAgICAgICAgIDx0aD5DaGFwaXRyZSDDoCDDqXR1ZGllcjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICA8dGg+RGF0ZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICA8dGg+SGV1cmU8L3RoPlxyXG4gICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgPHRib2R5IGNsYXNzPSdjYWxlbmRhci1jcmVhdGlvbi10Ym9keSc+XHJcbiAgICAgICAgICAgICAgIDx0ciBjbGFzcz0nc3ViamVjdC1saW5lJz5cclxuICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nc3ViamVjdC0ke251bWJlcn0nIGlkPSdzdWJqZWN0LWlucHV0Jz48L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdjaGFwdGVyLSR7bnVtYmVyfScgaWQ9J2NoYXB0ZXItaW5wdXQnPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J2RhdGUnIG5hbWU9J2RhdGUtJHtudW1iZXJ9JyBpZD0nZGF0ZS1pbnB1dCc+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ndGltZScgbmFtZT0naG91ci0ke251bWJlcn0nIGlkPSdob3VyLWlucHV0Jz48L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSdyb3dfYWN0aW9uX2J1dHRvbiBhZGRfbGluZV9idXR0b24nPjxpIGNsYXNzPSdmYXMgZmEtcGx1cyBhZGQtbGluZSc+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9J3Jvd19hY3Rpb25fYnV0dG9uIGdlbmVyYXRlX2NhbGVuZGFyX2J1dHRvbic+PGkgY2xhc3M9J2ZhcyBmYS1jaGVjayBnZW5lcmF0ZS1jYWxlbmRhcic+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgIDwvdGFibGU+XHJcbiAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCcgY2xhc3M9J3N1Ym1pdEJ0biBtb2RhbC1hZGQnIGlkPSdzdWJtaXQtY2FsZW5kYXInPkNyw6llciBsJ2FtcGxvaSBkdSB0ZW1wczwvYnV0dG9uPlxyXG4gICBgXHJcbiAgIFxyXG4gICBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jcmVhdGlvbi1pbnN0cnVjdGlvbnMnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS1pbnN0cnVjdGlvbnMtdG9wJylcclxuICAgY29udGVudC5hcHBlbmRDaGlsZChmb3JtKVxyXG4gICBmb3JtLmlubmVySFRNTCA9IGZvcm1Db250ZW50XHJcbiAgIGRvbUludGVyYWN0aW9ucy5jcmVhdGVNb2RhbCgnY2FsZW5kYXJfY3JlYXRpb25fbW9kYWwnLCBmb3JtLCB7IGRlZmF1bHRNb2RhbENvbnRlbnQ6IHRydWV9KVxyXG4gICBkb21JbnRlcmFjdGlvbnMuaGFuZGxlTW9kYWxSZXNwb25zaXZlKCkgXHJcbiAgIGRvbUludGVyYWN0aW9ucy5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQoKSAgXHJcbn0iLCJpbXBvcnQgeyBnZXQgfSBmcm9tIFwianF1ZXJ5XCI7XHJcbmltcG9ydCB7IGxvYWRDb250ZW50IH0gZnJvbSBcIi4uL2hvbWVcIjtcclxuaW1wb3J0IFNpZGVicmFMZWZ0IGZyb20gXCIuLi9Nb2R1bGVzL1NpZGViYXJMZWZ0XCI7XHJcbmltcG9ydCB7IFRoZXJlQXJlRGF0YVRvU2VuZFdpdGhHRVRSZXF1ZXN0IH0gZnJvbSBcIi4vVGhlcmVBcmVEYXRhVG9TZW5kV2l0aEdFVFJlcXVlc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGRlbGV0ZUNhbGVuZGFyRE9NSW50ZXJhY3Rpb25zIGV4dGVuZHMgVGhlcmVBcmVEYXRhVG9TZW5kV2l0aEdFVFJlcXVlc3Qge1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NTZW5kaW5nRGF0YVRvU2VydmVyKClcclxuICAgIHtcclxuICAgICAgICBnZXQoJy9kcm9wLWNhbGVuZGFyJykudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKVxyXG4gICAgICAgICAgICB0aGlzLnNob3dOb3RpZmljYXRpb25XaXRoRGF0YUluTWlsbGlzZWNvbmRzKHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjYWxlbmRhcl9kZWxldGlvbl9ub3RpZmljYXRpb25cIixcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UocmVzKS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgICAgIG5ldyBTaWRlYnJhTGVmdCgpXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICAgICAgfSkgXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgZGVsZXRlQ2FsZW5kYXJET01JbnRlcmFjdGlvbnMgZnJvbSBcIi4uL0Fic3RyYWN0Q2xhc3Nlcy9kZWxldGVDYWxlbmRhckRPTUludGVyYWN0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FsZW5kYXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IGRvbUludGVyYWN0aW9ucyA9IG5ldyBkZWxldGVDYWxlbmRhckRPTUludGVyYWN0aW9ucygpXHJcbiAgICBkb21JbnRlcmFjdGlvbnMuY3JlYXRlTW9kYWwoJ2RlbGV0ZV9jYWxlbmRhcl9tb2RhbCcsIGBcclxuICAgIDxwPlZvdXMgw6p0ZXMgc8O7ciBkZSB2b3Vsb2lyIHN1cHByaW1lciBjZXQgZW1wbG9pIGR1IHRlbXBzPzwvcD5cclxuICAgIDxidXR0b24gY2xhc3M9J3N1cmUnPk91aSwgc3VwcHJpbWVyIGwnZW1wbG9pIDxicj5kdSB0ZW1wczwvYnV0dG9uPjxidXR0b24gY2xhc3M9J25vJz5Bbm51bGVyPC9idXR0b24+XHJcbiAgICBgKVxyXG4gICAgZG9tSW50ZXJhY3Rpb25zLmhhbmRsZUFjdGlvbnNJbk1vZGFsQ29udGVudChlLmN1cnJlbnRUYXJnZXQsIHRydWUpXHJcbn0iLCJpbXBvcnQgeyBnZXQgfSBmcm9tICdqcXVlcnknXHJcbmltcG9ydCB7IGhhbmRsZUFkZENhbGVuZGFyIH0gZnJvbSAnLi4vRnVuY3Rpb25zL2hhbmRsZUFkZENhbGVuZGFyJ1xyXG5pbXBvcnQgaGFuZGxlRGVsZXRlQ2FsZW5kYXIgZnJvbSAnLi4vdXNlci9oYW5kbGVEZWxldGVDYWxlbmRhcidcclxuaW1wb3J0IFNpZGVicmFMZWZ0IGZyb20gJy4vU2lkZWJhckxlZnQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxyXG4gICAgICAgIHRoaXMucm9vdC5pbm5lckhUTUwgPSBjb250ZW50XHJcbiAgICAgICAgdGhpcy5hZGRDYWxlbmRhckJ1dHRvbkNsaWNrKClcclxuICAgICAgICB0aGlzLnBsYXlCdXR0b25DbGljaygpXHJcbiAgICAgICAgdGhpcy5hbm90aGVyVGltZUJ1dHRvbkNsaWNrKCkgXHJcbiAgICAgICAgdGhpcy5jYWxlbmRhclRhYmxlSW50ZXJhY3Rpb25zKClcclxuICAgIH1cclxuXHJcbiAgICBhZGRDYWxlbmRhckJ1dHRvbkNsaWNrKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBhZGRDYWxlbmRhciA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCcuYWRkLWNhbGVuZGFyJylcclxuICAgICAgICBpZihhZGRDYWxlbmRhciAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGFkZENhbGVuZGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQWRkQ2FsZW5kYXIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBsYXlCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcGxheUJ1dHRvbiA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCcucmV2aXNpb24tcGxheScpXHJcbiAgICAgICAgaWYocGxheUJ1dHRvbiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGltcG9ydCgnLi4vcGxheVN1YmplY3QnKS50aGVuKG1vZHVsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5U3ViamVjdCA9IG1vZHVsZS5kZWZhdWx0XHJcbiAgICAgICAgICAgICAgICBwbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheVN1YmplY3QpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbm90aGVyVGltZUJ1dHRvbkNsaWNrKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBhbm90aGVyVGltZUJ1dHRvbiA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuYW5vdGhlci10aW1lLXJldmlzaW9uLWJ1dHRvbicpXHJcbiAgICAgICAgaWYoYW5vdGhlclRpbWVCdXR0b24gIT09IG51bGwpe1xyXG4gICAgICAgICAgICBhbm90aGVyVGltZUJ1dHRvbi5mb3JFYWNoKGJ1dHRvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnQoJy4uL2Fub3RoZXItdGltZS1yZXZpc2lvbi1idXR0b24tY2xpY2snKS50aGVuKG1vZHVsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5vdGhlclRpbWVSZXZpc2lvbkJ1dHRvbkNsaWNrID0gbW9kdWxlLmRlZmF1bHRcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhbm90aGVyVGltZVJldmlzaW9uQnV0dG9uQ2xpY2spXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYWxlbmRhclRhYmxlSW50ZXJhY3Rpb25zKClcclxuICAgIHtcclxuICAgICAgICBsZXQgdGJvZHkgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcigndGJvZHknKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZih0Ym9keSAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGxldCBzdWJqZWN0RGF0ZSA9IHRib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWJqZWN0LWRhdGUnKVxyXG4gICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKClcclxuICAgICAgICAgICAgc3ViamVjdERhdGUuZm9yRWFjaChzZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxpdHRlZERhdGUgPSBzZC5pbm5lckhUTUwuc3BsaXQoJy0nKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQoc3BsaXR0ZWREYXRlWzBdKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGggPSBzcGxpdHRlZERhdGVbMV1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoKGRheSA8IGRhdGUuZ2V0RGF0ZSgpICYmIG1vbnRoIDw9IGRhdGUuZ2V0TW9udGgoKSkgfHwgbW9udGggPCBkYXRlLmdldE1vbnRoKCkgKyAxKXtcclxuICAgICAgICAgICAgICAgICAgICAvL29uIHN1cHByaW1lIGwnZW1wbG9pIGR1IHRlbXBzXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0KCcvZHJvcC1jYWxlbmRhcicpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNpZGVicmFMZWZ0KClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlX2J1dHRvbicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZURlbGV0ZUNhbGVuZGFyKVxyXG4gICAgICAgIH0gXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXQgfSBmcm9tICcuLi9GdW5jdGlvbnMvUmVxdWVzdC9hamF4J1xyXG5pbXBvcnQgQ29udGVudCBmcm9tICcuL0NvbnRlbnQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaWRlYnJhTGVmdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuICAgICAgICB0aGlzLnNpZGViYXJMZWZ0Q2hpbGRyZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZWJhci1sZWZ0IGknKVxyXG4gICAgICAgIGlmKHRoaXMuc2lkZWJhckxlZnRDaGlsZHJlbiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMuc2lkZWJhckxlZnRDaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKGNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlLWl0ZW0nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ29udGVudCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNpZGViYXJMZWZ0Q2hpbGRyZW5jbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zaWRlYmFyTGVmdENoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpZGViYXJMZWZ0Q2hpbGRyZW4uZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1pdGVtJylcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIWNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlLWl0ZW0nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLWl0ZW0nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkQ29udGVudCgpXHJcbiAgICAgICAgICAgIH0sIClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDb250ZW50KCl7XHJcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZS1pdGVtJykuY2xhc3NMaXN0LnZhbHVlLnNwbGl0KFwiIFwiKVsyXVxyXG4gICAgICAgIGNvbnN0IHJvdXRlID0gXCIvXCIgKyBjbGFzc05hbWUucmVwbGFjZShcIi1sb2dvXCIsIFwiXCIpXHJcbiAgICAgICAgZ2V0KHJvdXRlKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBDb250ZW50KHJlcylcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///184\n")}}]);