"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[184],{629:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ SidebraLeft)\n});\n\n// EXTERNAL MODULE: ./src/Functions/Request/ajax.js\nvar ajax = __webpack_require__(54);\n// EXTERNAL MODULE: ./node_modules/jquery/dist/jquery.js\nvar jquery = __webpack_require__(755);\n// EXTERNAL MODULE: ./src/Functions/Tools/DOMTools.js\nvar DOMTools = __webpack_require__(804);\n// EXTERNAL MODULE: ./src/Functions/Tools/Tools.js\nvar Tools = __webpack_require__(337);\n;// CONCATENATED MODULE: ./src/RepetitionsGeneration/Repetition.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar Repetition = /*#__PURE__*/function () {\n  function Repetition() {\n    _classCallCheck(this, Repetition);\n\n    this.first = 8;\n    this.second = 24;\n    this.third = 24 * 7;\n    this.fourth = 24 * 7 * 2;\n    this.fifth = 24 * 30;\n    /**\r\n     * @type {{morning: [number, number], afternoon: [number, number]}}\r\n     */\n\n    this.hoursInADay = {\n      morning: [8, 11.30],\n      afternoon: [14, 20]\n    };\n  }\n  /**\r\n   * \r\n   * @param {number} newHourValue \r\n   * @return {boolean}\r\n   */\n\n\n  _createClass(Repetition, [{\n    key: \"isWorkTime\",\n    value: function isWorkTime(newHourValue) {\n      var morningHours = this.repetition.hoursInADay.morning;\n      var afternoonHours = this.repetition.hoursInADay.afternoon;\n      return newHourValue > morningHours[0] && newHourValue < morningHours[1] || newHourValue > afternoonHours[0] && newHourValue < afternoonHours[1];\n    }\n  }]);\n\n  return Repetition;\n}();\n\n\n;// CONCATENATED MODULE: ./src/responsives/modalResize.js\nfunction modalResize_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction modalResize_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction modalResize_createClass(Constructor, protoProps, staticProps) { if (protoProps) modalResize_defineProperties(Constructor.prototype, protoProps); if (staticProps) modalResize_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar modalResize = /*#__PURE__*/function () {\n  function modalResize(CalendarCreationDOM) {\n    modalResize_classCallCheck(this, modalResize);\n\n    /**\r\n     * @type CalendarCreationDOMInteractions\r\n     */\n    this.calendarCreationDOM = CalendarCreationDOM;\n    this.isRowActionButtonsHidden = false;\n    this.handleWindowResize();\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n  }\n\n  modalResize_createClass(modalResize, [{\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      var hideRowActionButtons = window.innerWidth <= 800;\n\n      if (hideRowActionButtons && this.calendarCreationDOM.modal) {\n        this.isRowActionButtonsHidden = true;\n        this.calendarCreationDOM.appendRowActionButtonsIntoAMenu();\n      } else if (!hideRowActionButtons && this.calendarCreationDOM.modal && this.isRowActionButtonsHidden) {\n        this.calendarCreationDOM.getRowActionButtonsOutOfMenu();\n        this.isRowActionButtonsHidden = false;\n      }\n    }\n  }]);\n\n  return modalResize;\n}();\n// EXTERNAL MODULE: ./src/AbstractClasses/DOMInteractions.js\nvar DOMInteractions = __webpack_require__(941);\n;// CONCATENATED MODULE: ./src/AbstractClasses/Tools/calendarGenerationTools.js\nfunction calendarGenerationTools_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction calendarGenerationTools_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction calendarGenerationTools_createClass(Constructor, protoProps, staticProps) { if (protoProps) calendarGenerationTools_defineProperties(Constructor.prototype, protoProps); if (staticProps) calendarGenerationTools_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar calendarGenerationTools = /*#__PURE__*/function () {\n  /**\r\n   * \r\n   * @param {calendarGeneration} calendarGeneration \r\n   */\n  function calendarGenerationTools() {\n    calendarGenerationTools_classCallCheck(this, calendarGenerationTools);\n\n    this.modal = document.querySelector('.calendar_creation_modal');\n    this.dateTypeInputs = [];\n    this.inputsWithSameDate = {};\n    this.currentDateTypeInput;\n    this.linesToRepeat = {};\n    this.linesOfInputsWithSameDate = {};\n    this.linesOfInputsWithSameDatetime = {};\n    this.currentObjToLoopForSpacing;\n    this.nextDateTypeInput;\n    this.numberOfLinesOfExercise = 0;\n    this.numberOfLinesOfExercisePerDate = [];\n    this.spaceIsUnder2H = false;\n  }\n\n  calendarGenerationTools_createClass(calendarGenerationTools, [{\n    key: \"fillInputsWithSameDate\",\n    value: function fillInputsWithSameDate() {\n      this.inputs = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('input'));\n      this.fillDateTypeInputs();\n      this.fillInputsWithSameByDateTypeInputs();\n    }\n  }, {\n    key: \"fillDateTypeInputs\",\n    value: function fillDateTypeInputs() {\n      var _this = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(this.inputs, function (input) {\n        if (input.id === 'date-input') {\n          (0,Tools/* pushElementToArray */.n6)(input, _this.dateTypeInputs);\n        }\n      });\n    }\n  }, {\n    key: \"fillInputsWithSameByDateTypeInputs\",\n    value: function fillInputsWithSameByDateTypeInputs() {\n      var _this2 = this;\n\n      (0,Tools/* classicForLoop */.Sw)(this.dateTypeInputs, function (currentDateTypeInput, nextDateTypeInput) {\n        _this2.currentDateTypeInput = currentDateTypeInput;\n        _this2.nextDateTypeInput = nextDateTypeInput;\n\n        if (!(0,Tools/* isUndefined */.o8)(nextDateTypeInput)) {\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreSame();\n\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreDifferents();\n        } else {\n          _this2.pushCurrentDateTypeInput();\n        }\n      });\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreSame\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreSame() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput === dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInSameArray(dateInCurrentInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInSameArray\",\n    value: function pushCurrentAndNextDateTypeInputInSameArray(date) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[date])) {\n        this.inputsWithSameDate[date] = [];\n        this.inputsWithSameDate[date].push(this.currentDateTypeInput);\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      } else {\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      }\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreDifferents\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreDifferents() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput !== dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInDifferentArrays\",\n    value: function pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInNextInput])) {\n          this.inputsWithSameDate[dateInNextInput] = [];\n          this.inputsWithSameDate[dateInNextInput].push(this.nextDateTypeInput);\n        }\n      }\n    }\n  }, {\n    key: \"pushCurrentDateTypeInput\",\n    value: function pushCurrentDateTypeInput() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      }\n    }\n  }, {\n    key: \"fetchLinesToRepeat\",\n    value: function fetchLinesToRepeat() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.inputsWithSameDate, function (date, inputs) {\n        (0,Tools/* foreachArrayElements */.$f)(inputs, function (input) {\n          _this3.pushIntoLinesToRepeatLinesWichAreNotExercise(input, date);\n        });\n      });\n    }\n  }, {\n    key: \"pushIntoLinesToRepeatLinesWichAreNotExercise\",\n    value: function pushIntoLinesToRepeatLinesWichAreNotExercise(input, date) {\n      var inputLine = input.parentElement.parentElement;\n      var inputTypeChapter = inputLine.querySelector('#chapter-input');\n      var inputValue = inputTypeChapter.value;\n\n      if (inputValue.includes(\"exercice\")) {\n        this.numberOfLinesOfExercise++;\n        this.numberOfLinesOfExercisePerDate[date] = this.numberOfLinesOfExercise;\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.linesToRepeat[date])) {\n          this.linesToRepeat[date] = [];\n        }\n\n        this.linesToRepeat[date].push(inputTypeChapter.parentElement.parentElement);\n      }\n    }\n  }, {\n    key: \"fetchLinesWithSemblablesTimes\",\n    value: function fetchLinesWithSemblablesTimes() {\n      var _this4 = this;\n\n      var tableLines = (0,Tools/* createArray */.Ri)(this.modal.querySelector('tbody').querySelectorAll('tr'));\n      tableLines.forEach(function (line) {\n        var date = line.querySelector('#date-input').value;\n        var hour = line.querySelector('#hour-input').value;\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDate[date])) {\n          _this4.linesOfInputsWithSameDate[date] = [];\n        }\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDatetime[date + hour])) {\n          _this4.linesOfInputsWithSameDatetime[date + hour] = [];\n        }\n\n        _this4.linesOfInputsWithSameDatetime[date + hour].push(line);\n\n        _this4.linesOfInputsWithSameDate[date].push(line);\n      });\n    }\n  }, {\n    key: \"spaceEveryRevisionsWithSameHour\",\n    value: function spaceEveryRevisionsWithSameHour() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDatetime;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceEveryRevisionsSpacedUnder2H\",\n    value: function spaceEveryRevisionsSpacedUnder2H() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDate;\n      this.spaceIsUnder2H = true;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceRevisions\",\n    value: function spaceRevisions() {\n      for (var date in this.currentObjToLoopForSpacing) {\n        var linesOfInputsPerDateLength = this.currentObjToLoopForSpacing[date].length;\n        this.addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength);\n      }\n    }\n  }, {\n    key: \"addHourIfThereIsMultipleLinesWithSemblablesTime\",\n    value: function addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength) {\n      this.lastHour = 0;\n      this.lastHourInput;\n\n      if (linesOfInputsPerDateLength > 1) {\n        for (var i = 0; i < linesOfInputsPerDateLength; i++) {\n          this.hourInputInCurrentLine = this.currentObjToLoopForSpacing[date][i].querySelector('#hour-input');\n          this.splittedHour = this.hourInputInCurrentLine.value.split(':');\n          this.hourInLine = parseInt(this.splittedHour[0]);\n          this.handleSameHour(linesOfInputsPerDateLength, i);\n          this.handleSpaceUnder2H();\n        }\n      }\n    }\n  }, {\n    key: \"handleSameHour\",\n    value: function handleSameHour(linesOfInputsPerDateLength, indexOfLine) {\n      if (!this.spaceIsUnder2H && indexOfLine >= Math.floor(linesOfInputsPerDateLength / 2)) {\n        this.AddNewHourValue({\n          hourValue: this.hourInLine,\n          valueToAdd: 2\n        }, this.hourInputInCurrentLine);\n      }\n    }\n  }, {\n    key: \"AddNewHourValue\",\n    value: function AddNewHourValue(hourProperties, hourInput) {\n      var newHour = hourProperties.hourValue + hourProperties.valueToAdd;\n      hourInput.value = newHour + ':' + this.splittedHour[1];\n    }\n  }, {\n    key: \"handleSpaceUnder2H\",\n    value: function handleSpaceUnder2H() {\n      if (this.spaceIsUnder2H) {\n        if (this.lastHour > 0) {\n          if (this.hourInLine > this.lastHour) {\n            if (this.hourInLine - this.lastHour < 2 && this.hourInLine - this.lastHour > 0) {\n              this.AddNewHourValue({\n                hourValue: this.hourInLine,\n                valueToAdd: 1\n              }, this.hourInputInCurrentLine);\n            }\n          } else if (this.lastHour > this.hourInLine) {\n            if (this.lastHour - this.hourInLine < 2 && this.lastHour - this.hourInLine > 0) {\n              this.AddNewHourValue({\n                hourValue: this.lastHour,\n                valueToAdd: 1\n              }, this.lastHourInput);\n            }\n          }\n        }\n\n        this.lastHour = this.hourInLine;\n        this.lastHourInput = this.hourInputInCurrentLine;\n      }\n    }\n  }, {\n    key: \"pushRemoveButtonIfInRowActionButtonsToArray\",\n    value: function pushRemoveButtonIfInRowActionButtonsToArray(rowActionButtons, array) {\n      if (document.querySelector('.remove_line_button') in rowActionButtons) {\n        console.log('ok it\\'s in');\n      }\n    }\n  }]);\n\n  return calendarGenerationTools;\n}();\n\n\n;// CONCATENATED MODULE: ./src/AbstractClasses/CalendarCreationDOMInteractions.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction CalendarCreationDOMInteractions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction CalendarCreationDOMInteractions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction CalendarCreationDOMInteractions_createClass(Constructor, protoProps, staticProps) { if (protoProps) CalendarCreationDOMInteractions_defineProperties(Constructor.prototype, protoProps); if (staticProps) CalendarCreationDOMInteractions_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\nvar CalendarCreationDOMInteractions = /*#__PURE__*/function (_DOMInteractions) {\n  _inherits(CalendarCreationDOMInteractions, _DOMInteractions);\n\n  var _super = _createSuper(CalendarCreationDOMInteractions);\n\n  function CalendarCreationDOMInteractions() {\n    var _this;\n\n    CalendarCreationDOMInteractions_classCallCheck(this, CalendarCreationDOMInteractions);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"formAction\", '/create-calendar');\n\n    _defineProperty(_assertThisInitialized(_this), \"notificationClassName\", 'calendar_creation_notification');\n\n    _this.actionsButtonsPerRow = {};\n    _this.atLeastOneRowIsExercise = 4;\n    _this.atLeastTwoRowsAreExercises = 5;\n    _this.repetitionLinesHaveBeenCreated = false;\n    _this.tableLinesLengthOfCalendarCreationLines = 1;\n    _this.normalDailyNumberOfSubjects = 3;\n    _this.numberOfRepetitions = 5;\n    _this.createdRepetitions = 0;\n    _this.currentRowToRepeat;\n    _this.isQuotaError = false;\n    _this.isWarning = false;\n    _this.messageForQuotaErrorOne = \"Erreur du quota 3 matières/j. Il faut au moins que l'une d'entre elles soient un exercice.\";\n    _this.messageForQuotaErrorTwo = \"Erreur du quota 3 matières/j. Il faut au moins que deux d'entre elles soient un exercice.\";\n    _this.currentQuotaErrorMessageToShow;\n    _this.repetition = new Repetition();\n    return _this;\n  }\n\n  CalendarCreationDOMInteractions_createClass(CalendarCreationDOMInteractions, [{\n    key: \"handleActionsInModalForm\",\n    value: function handleActionsInModalForm() {\n      _get(_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"handleActionsInModalForm\", this).call(this);\n\n      this.toolsForCalendarGeneration = new calendarGenerationTools();\n      this.handleAddLineButtonClick();\n      this.handleCalendarGeneration();\n    }\n  }, {\n    key: \"handleAddLineButtonClick\",\n    value: function handleAddLineButtonClick() {\n      this.tableLinesLengthOfCalendarCreationLines++;\n      var addLineButton = this.modal.querySelector('.add-line');\n      addLineButton.addEventListener('click', this.appendNewLineToCalendarCreationTable.bind(this));\n    }\n  }, {\n    key: \"appendNewLineToCalendarCreationTable\",\n    value: function appendNewLineToCalendarCreationTable(e) {\n      this.createLine();\n      this.handleRemoveLineButtonClick();\n      this.removeRowActionMenuIfExists(e);\n      this.handleCalendarGeneration();\n      this.handleAddLineButtonClick();\n    }\n  }, {\n    key: \"createLine\",\n    value: function createLine() {\n      this.currentCreatedLine = this.createElement('tr', 'subject-line');\n      var removeLineButton = this.modal.querySelector('.remove-line');\n      var addLineButton = this.modal.querySelector('.add-line');\n      var subjectLine;\n      var generateCalendarButton;\n\n      if (addLineButton) {\n        this.addLineButtonContainer = addLineButton.parentElement;\n        subjectLine = this.addLineButtonContainer.parentElement;\n        generateCalendarButton = subjectLine.querySelector('.generate-calendar');\n        this.generateCalendarButtonContainer = generateCalendarButton.parentElement;\n      }\n\n      this.calendarCreationTbody = this.modal.querySelector('.calendar-creation-tbody');\n\n      if (removeLineButton !== null) {\n        removeLineButton.parentElement.parentElement.removeChild(removeLineButton.parentElement);\n      }\n\n      this.calendarCreationTbody.appendChild(this.currentCreatedLine);\n      var currentCreatedLineInnerHTML = \"\\n        <td><input type='text' name='subject-\".concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='subject-input'></td>\\n        <td><input type='text' name='chapter-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='chapter-input'></td>\\n        <td><input type='date' name='date-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='date-input'></td>\\n        <td><input type='time' name='hour-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='hour-input'></td>\\n        \");\n\n      if (!this.repetitionLinesHaveBeenCreated) {\n        currentCreatedLineInnerHTML += \"\\n            <td class='row_action_button add_line_button'><i class='fas fa-plus add-line'></i></td>\\n            <td class='row_action_button generate_calendar_button'><i class='fas fa-check generate-calendar'></i></td>\\n            <td class='row_action_button remove_line_button'><i class='fas fa-window-close remove-line'></i></td>\\n            \";\n      }\n\n      this.currentCreatedLine.innerHTML = currentCreatedLineInnerHTML;\n\n      if (window.innerWidth <= 800) {\n        this.appendRowActionButtonsIntoAMenu();\n      } else {\n        if (!(0,Tools/* isUndefined */.o8)(subjectLine)) {\n          subjectLine.removeChild(this.addLineButtonContainer);\n          subjectLine.removeChild(this.generateCalendarButtonContainer);\n        }\n      }\n\n      this.growFormHeight();\n      this.growModalHeight();\n      this.growBodyHeightIfModalCollapse();\n    }\n  }, {\n    key: \"handleRemoveLineButtonClick\",\n    value: function handleRemoveLineButtonClick() {\n      this.removeLineButton = this.modal.querySelector('.remove-line');\n\n      if (this.removeLineButton !== null) {\n        this.handleClickOnRemoveLineButton();\n      }\n    }\n  }, {\n    key: \"handleClickOnRemoveLineButton\",\n    value: function handleClickOnRemoveLineButton() {\n      var _this2 = this;\n\n      this.removeLineButton.addEventListener('click', function (e) {\n        _this2.tableLinesLengthOfCalendarCreationLines--;\n        _this2.removeLineButtonContainer = _this2.removeLineButton.parentNode;\n        var removeLineButtonContainerParent = _this2.removeLineButtonContainer.parentNode;\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(removeLineButtonContainerParent, 'action_menu')) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.previousElementSibling);\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.parentElement);\n\n          _this2.removeRowActionMenu(removeLineButtonContainerParent);\n\n          _this2.appendToLastRowActionButtons();\n\n          _this2.appendRowActionButtonsIntoAMenu();\n        } else {\n          removeLineButtonContainerParent.classList.add('invisible-subject-line');\n          removeLineButtonContainerParent.addEventListener('animationend', function () {\n            _this2.calendarCreationTbody.removeChild(removeLineButtonContainerParent);\n\n            _this2.appendToLastRowActionButtons();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"appendToLastRowActionButtons\",\n    value: function appendToLastRowActionButtons() {\n      this.calendarCreationTbody.lastElementChild.appendChild(this.addLineButtonContainer);\n      this.calendarCreationTbody.lastElementChild.appendChild(this.generateCalendarButtonContainer);\n\n      if (this.calendarCreationTbody.firstElementChild !== this.calendarCreationTbody.lastElementChild) {\n        this.calendarCreationTbody.lastElementChild.appendChild(this.removeLineButtonContainer);\n      }\n\n      this.reduceFormHeightUntilNormal();\n      this.reduceModalHeightUntilNormal();\n      this.reduceBodyHeigthUntilNormal();\n    }\n  }, {\n    key: \"growFormHeight\",\n    value: function growFormHeight() {\n      this.growElementSize(this.modalForm, {\n        attribute: 'height',\n        value: this.modalForm.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n  }, {\n    key: \"growModalHeight\",\n    value: function growModalHeight() {\n      this.growElementSize(this.modal, {\n        attribute: 'height',\n        value: this.modal.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {{attribute: string, value: number}} options \r\n     */\n\n  }, {\n    key: \"growElementSize\",\n    value: function growElementSize(element, options) {\n      if (options.attribute === 'width') {\n        element.style.width = options.value + 'px';\n      } else {\n        element.style.height = options.value + 'px';\n      }\n    }\n  }, {\n    key: \"growBodyHeightIfModalCollapse\",\n    value: function growBodyHeightIfModalCollapse() {\n      if (this.modal.offsetHeight >= 470) {\n        this.growElementSize(document.body, {\n          attribute: 'height',\n          value: document.body.offsetHeight + this.currentCreatedLine.offsetHeight\n        });\n      }\n    }\n  }, {\n    key: \"reduceFormHeightUntilNormal\",\n    value: function reduceFormHeightUntilNormal() {\n      var modalFormHeight = this.modalForm.offsetHeight;\n\n      if (modalFormHeight > this.originalModalFormHeigth) {\n        this.modalForm.style.height = modalFormHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceModalHeightUntilNormal\",\n    value: function reduceModalHeightUntilNormal() {\n      if (this.modal.offsetHeight > this.originalModalHeigth) {\n        this.modal.style.height = this.modal.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceBodyHeigthUntilNormal\",\n    value: function reduceBodyHeigthUntilNormal() {\n      if (document.body.offsetHeight > this.originalBodyHeight) {\n        document.body.style.height = document.body.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"handleCalendarGeneration\",\n    value: function handleCalendarGeneration() {\n      var generateCalendarButton = this.modal.querySelector('.generate-calendar');\n      generateCalendarButton === null || generateCalendarButton === void 0 ? void 0 : generateCalendarButton.addEventListener('click', this.generateCalendar.bind(this));\n    }\n  }, {\n    key: \"generateCalendar\",\n    value: function generateCalendar(e) {\n      this.toolsForCalendarGeneration.fillInputsWithSameDate();\n      this.toolsForCalendarGeneration.fetchLinesToRepeat();\n      this.generateLinesOfRepetitions();\n      this.removeRowActionMenuIfExists(e);\n      this.toolsForCalendarGeneration.fetchLinesWithSemblablesTimes();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsWithSameHour();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsSpacedUnder2H();\n    }\n  }, {\n    key: \"generateLinesOfRepetitions\",\n    value: function generateLinesOfRepetitions() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.toolsForCalendarGeneration.inputsWithSameDate, function (date, inputs) {\n        _this3.numberOfSubjectsIsNormal(inputs, date);\n\n        _this3.numberOfSubjectsMoreThanNormal(inputs, date);\n      });\n    }\n  }, {\n    key: \"numberOfSubjectsIsNormal\",\n    value: function numberOfSubjectsIsNormal(inputs, date) {\n      var _this4 = this;\n\n      if (inputs.length < this.atLeastOneRowIsExercise && this.toolsForCalendarGeneration.linesToRepeat[date] !== undefined) {\n        this.toolsForCalendarGeneration.linesToRepeat[date].forEach(function (row) {\n          _this4.currentRowToRepeat = row;\n\n          _this4.generateRepetitionsCalendar(row);\n        });\n      }\n    }\n  }, {\n    key: \"numberOfSubjectsMoreThanNormal\",\n    value: function numberOfSubjectsMoreThanNormal(inputs, date) {\n      switch (inputs.length) {\n        case this.atLeastOneRowIsExercise:\n          this.generateRepetitionsOrShowWarningOne(date);\n          break;\n\n        case this.atLeastTwoRowsAreExercises:\n          this.generateRepetitionsOrShowWarningTwo(date);\n          break;\n      }\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningOne\",\n    value: function generateRepetitionsOrShowWarningOne(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorOne;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningTwo\",\n    value: function generateRepetitionsOrShowWarningTwo(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorTwo;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarning\",\n    value: function generateRepetitionsOrShowWarning(date) {\n      var _this5 = this;\n\n      if (this.toolsForCalendarGeneration.numberOfLinesOfExercisePerDate[date] >= 1) {\n        if (!this.isQuotaError) {\n          (0,Tools/* foreachArrayElements */.$f)(this.toolsForCalendarGeneration.linesToRepeat[date], function (line) {\n            _this5.currentRowToRepeat = line;\n\n            _this5.generateRepetitionsCalendar(line);\n          });\n        }\n      } else {\n        this.showWarning(date);\n      }\n    }\n  }, {\n    key: \"showWarning\",\n    value: function showWarning(date) {\n      this.isQuotaError = true;\n      this.focusChapterInputOn(this.toolsForCalendarGeneration.linesToRepeat[date]);\n      this.createWarning(this.currentQuotaErrorMessageToShow);\n    }\n    /**\r\n     * \r\n     * @param {*} linesToRepeatOfADate \r\n     */\n\n  }, {\n    key: \"focusChapterInputOn\",\n    value: function focusChapterInputOn(linesToRepeatOfADate) {\n      var _this6 = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(linesToRepeatOfADate, function (line) {\n        _this6.alertFocusOnElement(line.querySelector('#chapter-input'));\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"generateRepetitionsCalendar\",\n    value: function generateRepetitionsCalendar(row) {\n      var rowInputs = row.querySelectorAll('input');\n      var emptyInputExists = false;\n      rowInputs.forEach(function (input) {\n        if (input.value === '') {\n          emptyInputExists = true;\n        }\n      });\n\n      if (!emptyInputExists) {\n        this.repetitionLinesHaveBeenCreated = true;\n        this.generateLines(row);\n      } else {\n        if (document.querySelector('.warning') === null) {\n          this.isWarning = true;\n          this.createWarning(\"Impossible de générer les répétitions si les champs sont vides.\");\n        }\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"generateLines\",\n    value: function generateLines(row) {\n      for (var i = 1; i <= this.numberOfRepetitions; i++) {\n        this.createLine();\n        this.createdRepetitions = i;\n        this.generateInputsValue();\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element IL FAUT REGLER CECI CAR CET ELEMENT RESTE L'ELEMENT INITIAL\r\n     */\n\n  }, {\n    key: \"generateInputsValue\",\n    value: function generateInputsValue() {\n      var _this$currentRowToRep, _this$currentRowToRep2, _this$currentRowToRep3, _this$currentRowToRep4;\n\n      var tbody = document.querySelector('tbody');\n      var tbodyLastChild = tbody.lastElementChild;\n      var subjectInput = tbodyLastChild.querySelector('#subject-input');\n      var chapterInput = tbodyLastChild.querySelector('#chapter-input');\n      var dateInput = tbodyLastChild.querySelector('#date-input');\n      var hourInput = tbodyLastChild.querySelector('#hour-input');\n      subjectInput.value = (_this$currentRowToRep = this.currentRowToRepeat) === null || _this$currentRowToRep === void 0 ? void 0 : _this$currentRowToRep.querySelector('#subject-input').value;\n      chapterInput.value = (_this$currentRowToRep2 = this.currentRowToRepeat) === null || _this$currentRowToRep2 === void 0 ? void 0 : _this$currentRowToRep2.querySelector('#chapter-input').value;\n      /**\r\n       * @type {[string, string]}\r\n       */\n\n      var splittedHour = (_this$currentRowToRep3 = this.currentRowToRepeat) === null || _this$currentRowToRep3 === void 0 ? void 0 : _this$currentRowToRep3.querySelector('#hour-input').value.split(':');\n      var splittedDate = (_this$currentRowToRep4 = this.currentRowToRepeat) === null || _this$currentRowToRep4 === void 0 ? void 0 : _this$currentRowToRep4.querySelector('#date-input').value.split('-');\n      var year = splittedDate[0];\n      var month = splittedDate[1];\n      var day = splittedDate[2];\n      var hourBetweenCurrentAndNextRepetition = 0;\n\n      switch (this.createdRepetitions) {\n        case 1:\n          hourBetweenCurrentAndNextRepetition = this.repetition.first;\n          break;\n\n        case 2:\n          hourBetweenCurrentAndNextRepetition = this.repetition.second;\n          break;\n\n        case 3:\n          hourBetweenCurrentAndNextRepetition = this.repetition.third;\n          break;\n\n        case 4:\n          hourBetweenCurrentAndNextRepetition = this.repetition.fourth;\n          break;\n\n        case 5:\n          hourBetweenCurrentAndNextRepetition = this.repetition.fifth;\n          break;\n      }\n\n      var newHourValue = parseInt(splittedHour[0], 10) + hourBetweenCurrentAndNextRepetition;\n      console.log(newHourValue);\n\n      if (newHourValue < 20) {\n        var _this$currentRowToRep5;\n\n        dateInput.value = (_this$currentRowToRep5 = this.currentRowToRepeat) === null || _this$currentRowToRep5 === void 0 ? void 0 : _this$currentRowToRep5.querySelector('#date-input').value;\n        hourInput.value = newHourValue.toString(10).length === 1 ? \"0\" + newHourValue + ':' + splittedHour[1] : newHourValue + ':' + splittedHour[1];\n      } else {\n        // 1. ON VERIFIE SI LA NOUVELLE HEURE EST DANS LES HEURES DE TRAVAIL MATINALES OU D'APRES MIDI\n        if (this.repetition.isWorkTime(newHourValue)) {} else {} // 2. SI OUI ON INSERT LA NOUVELLE HEURE DANS L'INPUT\n        // 3. SINON ON VERIFIE QUE LA NOUVELLE HEURE EST DANS LES HEURES DE PAUSE\n        // 4. SI OUI : ON DEFINIT LA NOUVELLE HEURE A LA PROCHAINE HEURE OU ON REPREND LE TRAVAIL\n\n\n        if (hourBetweenCurrentAndNextRepetition === this.repetition.first) {\n          var intNewDayValue = parseInt(day) + 1;\n          var newDayValue = intNewDayValue.toString().length === 1 ? '0' + intNewDayValue.toString() : parseInt(day) + 1;\n          newHourValue = 8;\n          dateInput.value = year + '-' + month + '-' + newDayValue;\n\n          if (dateInput.value === '') {\n            var intMonth = parseInt(month);\n\n            if (intMonth < 12) {\n              dateInput.value = year + '-0' + (intMonth + 1) + '-' + '01';\n            } else {\n              dateInput.value = parseInt(year) + 1 + '-' + '01' + '-' + '01';\n            }\n          }\n\n          hourInput.value = '0' + newHourValue + ':' + splittedHour[1];\n        } else {}\n      }\n\n      this.currentRowToRepeat = tbodyLastChild;\n    }\n  }, {\n    key: \"createWarning\",\n    value: function createWarning(message) {\n      var warningParagraph = this.createElement('p', 'warning');\n      var i = this.createElement('i', 'fas fa-exclamation-triangle');\n      var span = this.createElement('span', 'warning-message');\n      warningParagraph.appendChild(i);\n      warningParagraph.appendChild(span);\n      span.innerHTML = message;\n      this.modal.querySelector('button').before(warningParagraph);\n      warningParagraph.offsetWidth;\n      warningParagraph.classList.add('active_warning');\n      var marginBottom = 30;\n      this.modal.style.height = this.modal.offsetHeight + warningParagraph.offsetHeight + marginBottom + 'px';\n      this.removeElementAfterMilliseconds(warningParagraph, 5000, {\n        classNameToRemove: 'active_warning',\n        elementWithHeightToDecrease: [this.modal, warningParagraph.offsetHeight + marginBottom]\n      });\n    }\n  }, {\n    key: \"postContentWithNotificationThenReload\",\n    value: function postContentWithNotificationThenReload() {\n      var _this7 = this;\n\n      (0,ajax/* post */.v)(this.formAction, this.dataToPostObj).then(function (response) {\n        _this7.handleRequestResponse(response);\n      }).catch(function (error) {\n        console.error(\"Il y a eu une erreur :\" + error);\n      });\n    }\n  }, {\n    key: \"handleRequestResponse\",\n    value: function handleRequestResponse(response) {\n      var responseJson = JSON.parse(response);\n      var message = responseJson.success !== undefined ? responseJson.success : responseJson.fail;\n      this.showNotificationWithDataInMilliseconds({\n        className: this.notificationClassName,\n        content: message\n      }, 2000);\n      this.reloadPage();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      _get(_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"closeModal\", this).call(this);\n\n      document.body.style.height = this.originalBodyHeight + 'px';\n    }\n  }, {\n    key: \"removeRowActionMenuIfExists\",\n    value: function removeRowActionMenuIfExists(e) {\n      var clickedButtonGrandParent = e.currentTarget.parentElement.parentElement;\n\n      if (clickedButtonGrandParent && (0,DOMTools/* elementHasClassName */.cF)(clickedButtonGrandParent, 'action_menu') && !this.isWarning) {\n        this.removeRowActionMenu(clickedButtonGrandParent);\n      }\n    }\n  }, {\n    key: \"removeRowActionMenu\",\n    value: function removeRowActionMenu(rowActionMenu) {\n      this.hideRowActionMenu(rowActionMenu);\n      var rowActionMenuButton = rowActionMenu.parentNode.querySelector('.action_menu_button');\n\n      if (rowActionMenuButton) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenuButton);\n      }\n\n      (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenu);\n    }\n  }, {\n    key: \"handleModalResponsive\",\n    value: function handleModalResponsive() {\n      new modalResize(this);\n    }\n  }, {\n    key: \"appendRowActionButtonsIntoAMenu\",\n    value: function appendRowActionButtonsIntoAMenu() {\n      if ((this.modal.querySelector('.action_menu_button') === null || this.lastSubjectRow !== null) && !this.repetitionLinesHaveBeenCreated) {\n        this.subjectRows = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('.subject-line'));\n        this.lastSubjectRowIndex = this.subjectRows.length - 1;\n        this.lastSubjectRow = this.subjectRows[this.lastSubjectRowIndex];\n        var rowActionButtons = (0,Tools/* createArray */.Ri)(this.lastSubjectRow.querySelectorAll('.row_action_button'));\n        this.actionsButtonsPerRow[this.lastSubjectRowIndex] = rowActionButtons;\n        this.createMenuForLastRow();\n      } else if (this.repetitionLinesHaveBeenCreated) {\n        this.lastSubjectRow = null;\n        this.rowActionMenuButton = null;\n        this.actionMenu = null;\n      }\n    }\n  }, {\n    key: \"createMenuForLastRow\",\n    value: function createMenuForLastRow() {\n      this.createActionMenuButton(this.lastSubjectRow);\n      this.createMenuInRowThenAppendChildren(this.lastSubjectRow, this.actionsButtonsPerRow[this.lastSubjectRowIndex]);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createActionMenuButton\",\n    value: function createActionMenuButton(row) {\n      this.rowActionMenuButton = row.querySelector('.action_menu_button');\n\n      if ((0,Tools/* isUndefined */.o8)(this.rowActionMenuButton) || this.rowActionMenuButton === null) {\n        this.rowActionMenuButton = this.createElement('td', 'action_menu_button');\n        this.rowActionMenuButton.innerHTML = \"<p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\";\n        row.appendChild(this.rowActionMenuButton);\n        this.rowActionMenuButton.addEventListener('click', this.toggleActionMenuOfTheRow.bind(this, row));\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createMenuInRowThenAppendChildren\",\n    value: function createMenuInRowThenAppendChildren(row, futurChildren) {\n      var _this8 = this;\n\n      this.actionMenu = this.createElement('div', 'action_menu');\n      futurChildren.forEach(function (futurChild) {\n        _this8.actionMenu.appendChild(futurChild);\n      });\n      this.actionMenu.setAttribute('hidden', 'true');\n      row.appendChild(this.actionMenu);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"toggleActionMenuOfTheRow\",\n    value: function toggleActionMenuOfTheRow(row) {\n      var rowActionMenu = row.lastElementChild;\n\n      if (rowActionMenu.hasAttribute('hidden')) {\n        this.showRowActionMenu(rowActionMenu);\n      } else {\n        this.hideRowActionMenu(rowActionMenu);\n      }\n    }\n  }, {\n    key: \"showRowActionMenu\",\n    value: function showRowActionMenu(rowActionMenu) {\n      rowActionMenu.removeAttribute('hidden');\n      rowActionMenu.offsetWidth;\n      rowActionMenu.classList.add('visible_action_menu');\n\n      if (rowActionMenu.children.length === 3) {\n        rowActionMenu.classList.add('three_children');\n      }\n    }\n  }, {\n    key: \"hideRowActionMenu\",\n    value: function hideRowActionMenu(rowActionMenu) {\n      rowActionMenu.classList.remove('visible_action_menu');\n\n      var handleTransitionEnd = function handleTransitionEnd() {\n        rowActionMenu.setAttribute('hidden', 'true');\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(rowActionMenu, 'three_children')) {\n          rowActionMenu.classList.remove('three_children');\n        }\n\n        rowActionMenu.removeEventListener('transitionend', handleTransitionEnd);\n      };\n\n      rowActionMenu.addEventListener('transitionend', handleTransitionEnd);\n    }\n  }, {\n    key: \"getRowActionButtonsOutOfMenu\",\n    value: function getRowActionButtonsOutOfMenu() {\n      if (this.actionMenuExists()) {\n        this.appendActionButtonsInParentRow();\n\n        if (this.actionMenu !== null && !(0,Tools/* isUndefined */.o8)(this.actionMenu)) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.actionMenu);\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.rowActionMenuButton);\n        }\n      }\n    }\n  }, {\n    key: \"actionMenuExists\",\n    value: function actionMenuExists() {\n      return this.lastSubjectRow !== null && this.rowActionMenuButton !== null && this.actionMenu !== null;\n    }\n  }, {\n    key: \"appendActionButtonsInParentRow\",\n    value: function appendActionButtonsInParentRow() {\n      var _this9 = this;\n\n      this.actionsButtonsPerRow[this.lastSubjectRowIndex].forEach(function (actionButton) {\n        _this9.subjectRows[_this9.lastSubjectRowIndex].appendChild(actionButton);\n      });\n    }\n  }, {\n    key: \"alertEmptyInputs\",\n    value: function alertEmptyInputs() {\n      var _this10 = this;\n\n      this.modalInputs.forEach(function (input) {\n        if (_this10.isMessageCorrespondsTo(input.name)) {\n          _this10.alertFocusOnElement(input);\n\n          _this10.removeAlertFocusWhenclick(input);\n        }\n      });\n    }\n  }]);\n\n  return CalendarCreationDOMInteractions;\n}(DOMInteractions/* default */.Z);\n\n\n;// CONCATENATED MODULE: ./src/Functions/handleAddCalendar.js\n\n/**\r\n* crée un nouvel emploi du temps\r\n*/\n\nfunction handleAddCalendar(e) {\n  var number = 1;\n  var content = document.querySelector('.content');\n  var domInteractions = new CalendarCreationDOMInteractions();\n  var form = domInteractions.createForm('POST', 'create-calendar');\n  var formContent = \"\\n       <table class=\\\"create_calendar_table\\\">\\n           <thead>\\n               <tr>\\n                   <th>Mati\\xE8re</th>\\n                   <th>Chapitre \\xE0 \\xE9tudier</th>\\n                   <th>Date</th>\\n                   <th>Heure</th>\\n               </tr>\\n           </thead>\\n           <tbody class='calendar-creation-tbody'>\\n               <tr class='subject-line'>\\n                   <td><input type='text' name='subject-\".concat(number, \"' id='subject-input'></td>\\n                   <td><input type='text' name='chapter-\").concat(number, \"' id='chapter-input'></td>\\n                   <td><input type='date' name='date-\").concat(number, \"' id='date-input'></td>\\n                   <td><input type='time' name='hour-\").concat(number, \"' id='hour-input'></td>\\n                   <td class='row_action_button add_line_button'><i class='fas fa-plus add-line'></i></td>\\n                   <td class='row_action_button generate_calendar_button'><i class='fas fa-check generate-calendar'></i></td>\\n               </tr>\\n           </tbody>\\n       </table>\\n       <button type='submit' class='submitBtn modal-add' id='submit-calendar'>Cr\\xE9er l'amploi du temps</button>\\n   \");\n  content.querySelector('.calendar-creation-instructions').classList.add('slide-instructions-top');\n  content.appendChild(form);\n  form.innerHTML = formContent;\n  domInteractions.createModal('calendar_creation_modal', form, {\n    defaultModalContent: true\n  });\n  domInteractions.handleModalResponsive();\n  domInteractions.handleActionsInModalContent();\n}\n// EXTERNAL MODULE: ./src/home.js + 1 modules\nvar home = __webpack_require__(877);\n// EXTERNAL MODULE: ./src/AbstractClasses/ThereAreDataToSendWithGETRequest.js\nvar ThereAreDataToSendWithGETRequest = __webpack_require__(281);\n;// CONCATENATED MODULE: ./src/AbstractClasses/deleteCalendarDOMInteractions.js\nfunction deleteCalendarDOMInteractions_typeof(obj) { \"@babel/helpers - typeof\"; return deleteCalendarDOMInteractions_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, deleteCalendarDOMInteractions_typeof(obj); }\n\nfunction deleteCalendarDOMInteractions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction deleteCalendarDOMInteractions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction deleteCalendarDOMInteractions_createClass(Constructor, protoProps, staticProps) { if (protoProps) deleteCalendarDOMInteractions_defineProperties(Constructor.prototype, protoProps); if (staticProps) deleteCalendarDOMInteractions_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction deleteCalendarDOMInteractions_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) deleteCalendarDOMInteractions_setPrototypeOf(subClass, superClass); }\n\nfunction deleteCalendarDOMInteractions_setPrototypeOf(o, p) { deleteCalendarDOMInteractions_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return deleteCalendarDOMInteractions_setPrototypeOf(o, p); }\n\nfunction deleteCalendarDOMInteractions_createSuper(Derived) { var hasNativeReflectConstruct = deleteCalendarDOMInteractions_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = deleteCalendarDOMInteractions_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = deleteCalendarDOMInteractions_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return deleteCalendarDOMInteractions_possibleConstructorReturn(this, result); }; }\n\nfunction deleteCalendarDOMInteractions_possibleConstructorReturn(self, call) { if (call && (deleteCalendarDOMInteractions_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return deleteCalendarDOMInteractions_assertThisInitialized(self); }\n\nfunction deleteCalendarDOMInteractions_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction deleteCalendarDOMInteractions_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deleteCalendarDOMInteractions_getPrototypeOf(o) { deleteCalendarDOMInteractions_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return deleteCalendarDOMInteractions_getPrototypeOf(o); }\n\n\n\n\n\n\nvar deleteCalendarDOMInteractions = /*#__PURE__*/function (_ThereAreDataToSendWi) {\n  deleteCalendarDOMInteractions_inherits(deleteCalendarDOMInteractions, _ThereAreDataToSendWi);\n\n  var _super = deleteCalendarDOMInteractions_createSuper(deleteCalendarDOMInteractions);\n\n  function deleteCalendarDOMInteractions() {\n    deleteCalendarDOMInteractions_classCallCheck(this, deleteCalendarDOMInteractions);\n\n    return _super.call(this);\n  }\n\n  deleteCalendarDOMInteractions_createClass(deleteCalendarDOMInteractions, [{\n    key: \"processSendingDataToServer\",\n    value: function processSendingDataToServer() {\n      var _this = this;\n\n      (0,jquery.get)('/drop-calendar').then(function (res) {\n        _this.closeModal();\n\n        _this.showNotificationWithDataInMilliseconds({\n          className: \"calendar_deletion_notification\",\n          content: JSON.parse(res).message\n        }, 2000);\n\n        new SidebraLeft();\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }]);\n\n  return deleteCalendarDOMInteractions;\n}(ThereAreDataToSendWithGETRequest/* ThereAreDataToSendWithGETRequest */.F);\n\n\n;// CONCATENATED MODULE: ./src/user/handleDeleteCalendar.js\n\nfunction handleDeleteCalendar(e) {\n  e.preventDefault();\n  var domInteractions = new deleteCalendarDOMInteractions();\n  domInteractions.createModal('delete_calendar_modal', \"\\n    <p>Vous \\xEAtes s\\xFBr de vouloir supprimer cet emploi du temps?</p>\\n    <button class='sure'>Oui, supprimer l'emploi <br>du temps</button><button class='no'>Annuler</button>\\n    \");\n  domInteractions.handleActionsInModalContent(e.currentTarget, true);\n}\n;// CONCATENATED MODULE: ./src/Modules/Content.js\nfunction Content_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction Content_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction Content_createClass(Constructor, protoProps, staticProps) { if (protoProps) Content_defineProperties(Constructor.prototype, protoProps); if (staticProps) Content_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\nvar Content = /*#__PURE__*/function () {\n  function Content(content) {\n    Content_classCallCheck(this, Content);\n\n    this.root = document.querySelector('.content');\n    this.root.innerHTML = content;\n    this.addCalendarButtonClick();\n    this.playButtonClick();\n    this.anotherTimeButtonClick();\n    this.calendarTableInteractions();\n  }\n\n  Content_createClass(Content, [{\n    key: \"addCalendarButtonClick\",\n    value: function addCalendarButtonClick() {\n      var addCalendar = this.root.querySelector('.add-calendar');\n\n      if (addCalendar !== null) {\n        addCalendar.addEventListener('click', handleAddCalendar);\n      }\n    }\n  }, {\n    key: \"playButtonClick\",\n    value: function playButtonClick() {\n      var playButton = this.root.querySelector('.revision-play');\n\n      if (playButton !== null) {\n        __webpack_require__.e(/* import() */ 802).then(__webpack_require__.bind(__webpack_require__, 802)).then(function (module) {\n          var playSubject = module.default;\n          playButton.addEventListener('click', playSubject);\n        });\n      }\n    }\n  }, {\n    key: \"anotherTimeButtonClick\",\n    value: function anotherTimeButtonClick() {\n      var anotherTimeButton = this.root.querySelectorAll('.another-time-revision-button');\n\n      if (anotherTimeButton !== null) {\n        anotherTimeButton.forEach(function (button) {\n          __webpack_require__.e(/* import() */ 411).then(__webpack_require__.bind(__webpack_require__, 411)).then(function (module) {\n            var anotherTimeRevisionButtonClick = module.default;\n            button.addEventListener('click', anotherTimeRevisionButtonClick);\n          });\n        });\n      }\n    }\n  }, {\n    key: \"calendarTableInteractions\",\n    value: function calendarTableInteractions() {\n      var tbody = this.root.querySelector('tbody');\n\n      if (tbody !== null) {\n        var _this$root$querySelec;\n\n        var subjectDate = tbody.querySelectorAll('.subject-date');\n        var date = new Date();\n        subjectDate.forEach(function (sd) {\n          var splittedDate = sd.innerHTML.split('-');\n          var day = parseInt(splittedDate[0]);\n          var month = splittedDate[1];\n\n          if (day < date.getDate() && month <= date.getMonth() || month < date.getMonth() + 1) {\n            //on supprime l'emploi du temps\n            (0,jquery.get)('/drop-calendar');\n            new SidebraLeft();\n          }\n        });\n        (_this$root$querySelec = this.root.querySelector('.delete_button')) === null || _this$root$querySelec === void 0 ? void 0 : _this$root$querySelec.addEventListener('click', handleDeleteCalendar);\n      }\n    }\n  }]);\n\n  return Content;\n}();\n\n\n;// CONCATENATED MODULE: ./src/Modules/SidebarLeft.js\nfunction SidebarLeft_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction SidebarLeft_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SidebarLeft_createClass(Constructor, protoProps, staticProps) { if (protoProps) SidebarLeft_defineProperties(Constructor.prototype, protoProps); if (staticProps) SidebarLeft_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar SidebraLeft = /*#__PURE__*/function () {\n  function SidebraLeft() {\n    var _this = this;\n\n    SidebarLeft_classCallCheck(this, SidebraLeft);\n\n    this.contentElement = document.querySelector('.content');\n    this.sidebarLeftChildren = document.querySelectorAll('.sidebar-left i');\n\n    if (this.sidebarLeftChildren !== null) {\n      this.sidebarLeftChildren.forEach(function (child) {\n        if (child.classList.contains('active-item')) {\n          _this.loadContent();\n        }\n      });\n    }\n  }\n\n  SidebarLeft_createClass(SidebraLeft, [{\n    key: \"sidebarLeftChildrenclick\",\n    value: function sidebarLeftChildrenclick() {\n      var _this2 = this;\n\n      this.sidebarLeftChildren.forEach(function (child) {\n        child.addEventListener('click', function (e) {\n          _this2.contentElement.innerHTML = \"\";\n\n          _this2.sidebarLeftChildren.forEach(function (s) {\n            s.classList.remove('active-item');\n          });\n\n          if (!child.classList.contains('active-item')) {\n            child.classList.add('active-item');\n          }\n\n          _this2.loadContent();\n        });\n      });\n    }\n  }, {\n    key: \"loadContent\",\n    value: function loadContent() {\n      var className = document.querySelector('.active-item').classList.value.split(\" \")[2];\n      var route = \"/\" + className.replace(\"-logo\", \"\");\n      (0,ajax/* get */.U)(route).then(function (res) {\n        new Content(res);\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }]);\n\n  return SidebraLeft;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjI5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTs7Ozs7Ozs7Ozs7Ozs7QUM5QkE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBWEE7QUFBQTtBQUFBO0FBZUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTs7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FDREE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFJQTtBQUNBOztBQUFBOztBQUNBOztBQURBOztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQWlCQTs7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQU1BO0FBQ0E7QUFLQTs7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBSUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQWZBOztBQWtCQTtBQUNBOztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUdBOztBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBN21CQTs7OztBQ1JBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7O0FBRUE7QUFDQTs7QUFBQTtBQUVBOzs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFuQkE7Ozs7QUNMQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7Ozs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdEVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUFBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9SZXBldGl0aW9uc0dlbmVyYXRpb24vUmVwZXRpdGlvbi5qcz9lNzIwIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9yZXNwb25zaXZlcy9tb2RhbFJlc2l6ZS5qcz9iNDRiIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9BYnN0cmFjdENsYXNzZXMvVG9vbHMvY2FsZW5kYXJHZW5lcmF0aW9uVG9vbHMuanM/ZTk4YiIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvQWJzdHJhY3RDbGFzc2VzL0NhbGVuZGFyQ3JlYXRpb25ET01JbnRlcmFjdGlvbnMuanM/YmQ0MSIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvRnVuY3Rpb25zL2hhbmRsZUFkZENhbGVuZGFyLmpzPzJkOWIiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0Fic3RyYWN0Q2xhc3Nlcy9kZWxldGVDYWxlbmRhckRPTUludGVyYWN0aW9ucy5qcz8yYWUwIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy91c2VyL2hhbmRsZURlbGV0ZUNhbGVuZGFyLmpzP2Q0ZTAiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL01vZHVsZXMvQ29udGVudC5qcz9jNjQwIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9Nb2R1bGVzL1NpZGViYXJMZWZ0LmpzPzIxM2YiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwZXRpdGlvbiB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZmlyc3QgPSA4XHJcbiAgICAgICAgdGhpcy5zZWNvbmQgPSAyNFxyXG4gICAgICAgIHRoaXMudGhpcmQgPSAyNCAqIDdcclxuICAgICAgICB0aGlzLmZvdXJ0aCA9IDI0ICogNyAqIDJcclxuICAgICAgICB0aGlzLmZpZnRoID0gMjQgKiAzMFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7e21vcm5pbmc6IFtudW1iZXIsIG51bWJlcl0sIGFmdGVybm9vbjogW251bWJlciwgbnVtYmVyXX19XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5ob3Vyc0luQURheSA9IHtcclxuICAgICAgICAgICAgbW9ybmluZyA6IFs4LCAxMS4zMF0sXHJcbiAgICAgICAgICAgIGFmdGVybm9vbjogWzE0LCAyMF1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdIb3VyVmFsdWUgXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBpc1dvcmtUaW1lKG5ld0hvdXJWYWx1ZSkge1xyXG4gICAgICAgIGxldCBtb3JuaW5nSG91cnMgPSB0aGlzLnJlcGV0aXRpb24uaG91cnNJbkFEYXkubW9ybmluZ1xyXG4gICAgICAgIGxldCBhZnRlcm5vb25Ib3VycyA9IHRoaXMucmVwZXRpdGlvbi5ob3Vyc0luQURheS5hZnRlcm5vb25cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKG5ld0hvdXJWYWx1ZSA+IG1vcm5pbmdIb3Vyc1swXSBcclxuICAgICAgICAgICAgJiYgbmV3SG91clZhbHVlIDwgbW9ybmluZ0hvdXJzWzFdKVxyXG4gICAgICAgICAgICB8fCAobmV3SG91clZhbHVlID4gYWZ0ZXJub29uSG91cnNbMF0gXHJcbiAgICAgICAgICAgICYmIG5ld0hvdXJWYWx1ZSA8IGFmdGVybm9vbkhvdXJzWzFdKVxyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBjbGFzcyBtb2RhbFJlc2l6ZSB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKENhbGVuZGFyQ3JlYXRpb25ET00pIFxyXG4gICAge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIENhbGVuZGFyQ3JlYXRpb25ET01JbnRlcmFjdGlvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00gPSBDYWxlbmRhckNyZWF0aW9uRE9NXHJcbiAgICAgICAgdGhpcy5pc1Jvd0FjdGlvbkJ1dHRvbnNIaWRkZW4gPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKClcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUuYmluZCh0aGlzKSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVXaW5kb3dSZXNpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBoaWRlUm93QWN0aW9uQnV0dG9ucyA9IHdpbmRvdy5pbm5lcldpZHRoIDw9IDgwMFxyXG4gICAgICAgIGlmKGhpZGVSb3dBY3Rpb25CdXR0b25zICYmIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5tb2RhbCl7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSb3dBY3Rpb25CdXR0b25zSGlkZGVuID0gdHJ1ZVxyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00uYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgfWVsc2UgaWYoIWhpZGVSb3dBY3Rpb25CdXR0b25zICYmIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5tb2RhbCAmJiB0aGlzLmlzUm93QWN0aW9uQnV0dG9uc0hpZGRlbikge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00uZ2V0Um93QWN0aW9uQnV0dG9uc091dE9mTWVudSgpXHJcbiAgICAgICAgICAgIHRoaXMuaXNSb3dBY3Rpb25CdXR0b25zSGlkZGVuID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjbGFzc2ljRm9yTG9vcCwgY3JlYXRlQXJyYXksIGZvcmVhY2hBcnJheUVsZW1lbnRzLCBpc1VuZGVmaW5lZCwgbG9vcE92ZXJPYmplY3QsIHB1c2hFbGVtZW50VG9BcnJheSB9IGZyb20gXCIuLi8uLi9GdW5jdGlvbnMvVG9vbHMvVG9vbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY2FsZW5kYXJHZW5lcmF0aW9uVG9vbHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Y2FsZW5kYXJHZW5lcmF0aW9ufSBjYWxlbmRhckdlbmVyYXRpb24gXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyX2NyZWF0aW9uX21vZGFsJylcclxuICAgICAgICB0aGlzLmRhdGVUeXBlSW5wdXRzID0gW11cclxuICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZSA9IHt9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgIHRoaXMubGluZXNUb1JlcGVhdCA9IHt9XHJcbiAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlID0ge31cclxuICAgICAgICB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGV0aW1lID0ge31cclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nXHJcbiAgICAgICAgdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2UgPSAwXHJcbiAgICAgICAgdGhpcy5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZVBlckRhdGUgPSBbXVxyXG4gICAgICAgIHRoaXMuc3BhY2VJc1VuZGVyMkggPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxJbnB1dHNXaXRoU2FtZURhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaW5wdXRzID0gY3JlYXRlQXJyYXkodGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKVxyXG4gICAgICAgIHRoaXMuZmlsbERhdGVUeXBlSW5wdXRzKClcclxuICAgICAgICB0aGlzLmZpbGxJbnB1dHNXaXRoU2FtZUJ5RGF0ZVR5cGVJbnB1dHMoKVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxEYXRlVHlwZUlucHV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yZWFjaEFycmF5RWxlbWVudHModGhpcy5pbnB1dHMsIChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZihpbnB1dC5pZCA9PT0gJ2RhdGUtaW5wdXQnKSB7XHJcbiAgICAgICAgICAgICAgICBwdXNoRWxlbWVudFRvQXJyYXkoaW5wdXQsIHRoaXMuZGF0ZVR5cGVJbnB1dHMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxJbnB1dHNXaXRoU2FtZUJ5RGF0ZVR5cGVJbnB1dHMoKVxyXG4gICAge1xyXG4gICAgICAgIGNsYXNzaWNGb3JMb29wKHRoaXMuZGF0ZVR5cGVJbnB1dHMsIChjdXJyZW50RGF0ZVR5cGVJbnB1dCwgbmV4dERhdGVUeXBlSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dCA9IGN1cnJlbnREYXRlVHlwZUlucHV0XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERhdGVUeXBlSW5wdXQgPSBuZXh0RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgICAgICBpZighaXNVbmRlZmluZWQobmV4dERhdGVUeXBlSW5wdXQpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGF0ZUluQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0c0FyZVNhbWUoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEYXRlSW5DdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRzQXJlRGlmZmVyZW50cygpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudERhdGVUeXBlSW5wdXQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEYXRlSW5DdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRzQXJlU2FtZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZGF0ZUluQ3VycmVudElucHV0ID0gdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGRhdGVJbk5leHRJbnB1dCA9IHRoaXMubmV4dERhdGVUeXBlSW5wdXQudmFsdWVcclxuICAgICAgICBpZihkYXRlSW5DdXJyZW50SW5wdXQgPT09IGRhdGVJbk5leHRJbnB1dCl7XHJcbiAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5TYW1lQXJyYXkoZGF0ZUluQ3VycmVudElucHV0KSAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5TYW1lQXJyYXkoZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSkpe1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSA9IFtdXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZV0ucHVzaCh0aGlzLm5leHREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXS5wdXNoKHRoaXMubmV4dERhdGVUeXBlSW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURhdGVJbkN1cnJlbnRBbmROZXh0RGF0ZVR5cGVJbnB1dHNBcmVEaWZmZXJlbnRzKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBkYXRlSW5DdXJyZW50SW5wdXQgPSB0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0LnZhbHVlXHJcbiAgICAgICAgY29uc3QgZGF0ZUluTmV4dElucHV0ID0gdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGlmKGRhdGVJbkN1cnJlbnRJbnB1dCAhPT0gZGF0ZUluTmV4dElucHV0KXtcclxuICAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5EaWZmZXJlbnRBcnJheXMoZGF0ZUluQ3VycmVudElucHV0LCBkYXRlSW5OZXh0SW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1c2hDdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRJbkRpZmZlcmVudEFycmF5cyhkYXRlSW5DdXJyZW50SW5wdXQsIGRhdGVJbk5leHRJbnB1dClcclxuICAgIHtcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0gPSBbXVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluTmV4dElucHV0XSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluTmV4dElucHV0XSA9IFtdXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5OZXh0SW5wdXRdLnB1c2godGhpcy5uZXh0RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdXNoQ3VycmVudERhdGVUeXBlSW5wdXQoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRhdGVJbkN1cnJlbnRJbnB1dCA9IHRoaXMuY3VycmVudERhdGVUeXBlSW5wdXQudmFsdWVcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0gPSBbXVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICB9ICBcclxuICAgIH1cclxuXHJcbiAgICBmZXRjaExpbmVzVG9SZXBlYXQoKVxyXG4gICAge1xyXG4gICAgICAgIGxvb3BPdmVyT2JqZWN0KHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlLCAoZGF0ZSwgaW5wdXRzKT0+e1xyXG4gICAgICAgICAgICBmb3JlYWNoQXJyYXlFbGVtZW50cyhpbnB1dHMsIChpbnB1dCk9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hJbnRvTGluZXNUb1JlcGVhdExpbmVzV2ljaEFyZU5vdEV4ZXJjaXNlKGlucHV0LCBkYXRlKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaEludG9MaW5lc1RvUmVwZWF0TGluZXNXaWNoQXJlTm90RXhlcmNpc2UoaW5wdXQsIGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGlucHV0TGluZSA9IGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIGxldCBpbnB1dFR5cGVDaGFwdGVyID0gaW5wdXRMaW5lLnF1ZXJ5U2VsZWN0b3IoJyNjaGFwdGVyLWlucHV0JylcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXRUeXBlQ2hhcHRlci52YWx1ZVxyXG4gICAgICAgIGlmKGlucHV0VmFsdWUuaW5jbHVkZXMoXCJleGVyY2ljZVwiKSl7XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2UrK1xyXG4gICAgICAgICAgICB0aGlzLm51bWJlck9mTGluZXNPZkV4ZXJjaXNlUGVyRGF0ZVtkYXRlXSA9IHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2VcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMubGluZXNUb1JlcGVhdFtkYXRlXSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc1RvUmVwZWF0W2RhdGVdID0gW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxpbmVzVG9SZXBlYXRbZGF0ZV0ucHVzaChpbnB1dFR5cGVDaGFwdGVyLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZldGNoTGluZXNXaXRoU2VtYmxhYmxlc1RpbWVzKClcclxuICAgIHtcclxuICAgICAgICBsZXQgdGFibGVMaW5lcyA9IGNyZWF0ZUFycmF5KHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcigndGJvZHknKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKVxyXG4gICAgICAgIHRhYmxlTGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGxpbmUucXVlcnlTZWxlY3RvcignI2RhdGUtaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gbGluZS5xdWVyeVNlbGVjdG9yKCcjaG91ci1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdID0gW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVtkYXRlICsgaG91cl0pKXtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZXRpbWVbZGF0ZSArIGhvdXJdID0gW11cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVtkYXRlICsgaG91cl0ucHVzaChsaW5lKSAgXHJcbiAgICAgICAgICAgIHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXS5wdXNoKGxpbmUpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzcGFjZUV2ZXJ5UmV2aXNpb25zV2l0aFNhbWVIb3VyKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nID0gdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVxyXG4gICAgICAgIHRoaXMuc3BhY2VSZXZpc2lvbnMoKVxyXG4gICAgfVxyXG5cclxuICAgIHNwYWNlRXZlcnlSZXZpc2lvbnNTcGFjZWRVbmRlcjJIKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nID0gdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlXHJcbiAgICAgICAgdGhpcy5zcGFjZUlzVW5kZXIySCA9IHRydWVcclxuICAgICAgICB0aGlzLnNwYWNlUmV2aXNpb25zKClcclxuICAgIH1cclxuXHJcbiAgICBzcGFjZVJldmlzaW9ucygpe1xyXG4gICAgICAgIGZvcihsZXQgZGF0ZSBpbiB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nKXtcclxuICAgICAgICAgICAgY29uc3QgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGggPSB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nW2RhdGVdLmxlbmd0aFxyXG4gICAgICAgICAgICB0aGlzLmFkZEhvdXJJZlRoZXJlSXNNdWx0aXBsZUxpbmVzV2l0aFNlbWJsYWJsZXNUaW1lKGRhdGUsIGxpbmVzT2ZJbnB1dHNQZXJEYXRlTGVuZ3RoKSAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSG91cklmVGhlcmVJc011bHRpcGxlTGluZXNXaXRoU2VtYmxhYmxlc1RpbWUoZGF0ZSwgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5sYXN0SG91ciA9IDBcclxuICAgICAgICB0aGlzLmxhc3RIb3VySW5wdXRcclxuICAgICAgICBpZihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmUgPSB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nW2RhdGVdW2ldLnF1ZXJ5U2VsZWN0b3IoJyNob3VyLWlucHV0JylcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXR0ZWRIb3VyID0gdGhpcy5ob3VySW5wdXRJbkN1cnJlbnRMaW5lLnZhbHVlLnNwbGl0KCc6JylcclxuICAgICAgICAgICAgICAgIHRoaXMuaG91ckluTGluZSA9IHBhcnNlSW50KHRoaXMuc3BsaXR0ZWRIb3VyWzBdKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTYW1lSG91cihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCwgaSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3BhY2VVbmRlcjJIKClcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2FtZUhvdXIobGluZXNPZklucHV0c1BlckRhdGVMZW5ndGgsIGluZGV4T2ZMaW5lKVxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLnNwYWNlSXNVbmRlcjJIICYmIGluZGV4T2ZMaW5lID49IE1hdGguZmxvb3IobGluZXNPZklucHV0c1BlckRhdGVMZW5ndGggLyAyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuQWRkTmV3SG91clZhbHVlKHtcclxuICAgICAgICAgICAgICAgIGhvdXJWYWx1ZTogdGhpcy5ob3VySW5MaW5lLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVUb0FkZDogMlxyXG4gICAgICAgICAgICB9LCB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBBZGROZXdIb3VyVmFsdWUoaG91clByb3BlcnRpZXMsIGhvdXJJbnB1dCl7XHJcbiAgICAgICAgbGV0IG5ld0hvdXIgPSBob3VyUHJvcGVydGllcy5ob3VyVmFsdWUgKyBob3VyUHJvcGVydGllcy52YWx1ZVRvQWRkXHJcbiAgICAgICAgaG91cklucHV0LnZhbHVlID0gbmV3SG91ciArICc6JyArIHRoaXMuc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU3BhY2VVbmRlcjJIKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLnNwYWNlSXNVbmRlcjJIKXtcclxuICAgICAgICAgICAgaWYodGhpcy5sYXN0SG91ciA+IDApe1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5ob3VySW5MaW5lID4gdGhpcy5sYXN0SG91cil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCh0aGlzLmhvdXJJbkxpbmUgLSB0aGlzLmxhc3RIb3VyKSA8IDIgJiYgKHRoaXMuaG91ckluTGluZSAtIHRoaXMubGFzdEhvdXIpID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGROZXdIb3VyVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91clZhbHVlOiB0aGlzLmhvdXJJbkxpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQWRkOiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuaG91cklucHV0SW5DdXJyZW50TGluZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmxhc3RIb3VyID4gdGhpcy5ob3VySW5MaW5lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHRoaXMubGFzdEhvdXIgLSB0aGlzLmhvdXJJbkxpbmUpIDwgMiAmJiAodGhpcy5sYXN0SG91ciAtIHRoaXMuaG91ckluTGluZSkgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGROZXdIb3VyVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91clZhbHVlOiB0aGlzLmxhc3RIb3VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0FkZDogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmxhc3RIb3VySW5wdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0SG91ciA9IHRoaXMuaG91ckluTGluZVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RIb3VySW5wdXQgPSB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaFJlbW92ZUJ1dHRvbklmSW5Sb3dBY3Rpb25CdXR0b25zVG9BcnJheShyb3dBY3Rpb25CdXR0b25zLCBhcnJheSlcclxuICAgIHtcclxuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlX2xpbmVfYnV0dG9uJykgaW4gcm93QWN0aW9uQnV0dG9ucykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2sgaXRcXCdzIGluJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBwb3N0IH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9SZXF1ZXN0L2FqYXhcIjtcclxuaW1wb3J0IHsgZWxlbWVudEhhc0NsYXNzTmFtZSwgcmVtb3ZlRWxlbWVudEZyb21ET00gfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1Rvb2xzL0RPTVRvb2xzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUFycmF5LCBmb3JlYWNoQXJyYXlFbGVtZW50cywgaXNVbmRlZmluZWQsIGxvb3BPdmVyT2JqZWN0IH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9Ub29scy9Ub29sc1wiO1xyXG5pbXBvcnQgUmVwZXRpdGlvbiBmcm9tIFwiLi4vUmVwZXRpdGlvbnNHZW5lcmF0aW9uL1JlcGV0aXRpb25cIjtcclxuaW1wb3J0IHsgbW9kYWxSZXNpemUgfSBmcm9tIFwiLi4vcmVzcG9uc2l2ZXMvbW9kYWxSZXNpemVcIjtcclxuaW1wb3J0IERPTUludGVyYWN0aW9ucyBmcm9tIFwiLi9ET01JbnRlcmFjdGlvbnNcIjtcclxuaW1wb3J0IGNhbGVuZGFyR2VuZXJhdGlvblRvb2xzIGZyb20gXCIuL1Rvb2xzL2NhbGVuZGFyR2VuZXJhdGlvblRvb2xzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zIGV4dGVuZHMgRE9NSW50ZXJhY3Rpb25zIHtcclxuICAgIGZvcm1BY3Rpb24gPSAnL2NyZWF0ZS1jYWxlbmRhcidcclxuICAgIG5vdGlmaWNhdGlvbkNsYXNzTmFtZSA9ICdjYWxlbmRhcl9jcmVhdGlvbl9ub3RpZmljYXRpb24nXHJcblxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLmFjdGlvbnNCdXR0b25zUGVyUm93ID0ge31cclxuICAgICAgICB0aGlzLmF0TGVhc3RPbmVSb3dJc0V4ZXJjaXNlID0gNFxyXG4gICAgICAgIHRoaXMuYXRMZWFzdFR3b1Jvd3NBcmVFeGVyY2lzZXMgPSA1XHJcbiAgICAgICAgdGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWQgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzID0gMVxyXG4gICAgICAgIHRoaXMubm9ybWFsRGFpbHlOdW1iZXJPZlN1YmplY3RzID0gM1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZSZXBldGl0aW9ucyA9IDVcclxuICAgICAgICB0aGlzLmNyZWF0ZWRSZXBldGl0aW9ucyA9IDBcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdFxyXG4gICAgICAgIHRoaXMuaXNRdW90YUVycm9yID0gZmFsc2VcclxuICAgICAgICB0aGlzLmlzV2FybmluZyA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvck9uZSA9IFwiRXJyZXVyIGR1IHF1b3RhIDMgbWF0acOocmVzL2ouIElsIGZhdXQgYXUgbW9pbnMgcXVlIGwndW5lIGQnZW50cmUgZWxsZXMgc29pZW50IHVuIGV4ZXJjaWNlLlwiXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvclR3byA9IFwiRXJyZXVyIGR1IHF1b3RhIDMgbWF0acOocmVzL2ouIElsIGZhdXQgYXUgbW9pbnMgcXVlIGRldXggZCdlbnRyZSBlbGxlcyBzb2llbnQgdW4gZXhlcmNpY2UuXCJcclxuICAgICAgICB0aGlzLmN1cnJlbnRRdW90YUVycm9yTWVzc2FnZVRvU2hvd1xyXG4gICAgICAgIHRoaXMucmVwZXRpdGlvbiA9IG5ldyBSZXBldGl0aW9uKClcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBY3Rpb25zSW5Nb2RhbEZvcm0oKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyLmhhbmRsZUFjdGlvbnNJbk1vZGFsRm9ybSgpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbiA9IG5ldyBjYWxlbmRhckdlbmVyYXRpb25Ub29scygpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVBZGRMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FsZW5kYXJHZW5lcmF0aW9uKClcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBZGRMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzKytcclxuICAgICAgICBsZXQgYWRkTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmFkZC1saW5lJylcclxuICAgICAgICBhZGRMaW5lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hcHBlbmROZXdMaW5lVG9DYWxlbmRhckNyZWF0aW9uVGFibGUuYmluZCh0aGlzKSkgIFxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZE5ld0xpbmVUb0NhbGVuZGFyQ3JlYXRpb25UYWJsZShlKXtcclxuICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlUmVtb3ZlTGluZUJ1dHRvbkNsaWNrKClcclxuICAgICAgICB0aGlzLnJlbW92ZVJvd0FjdGlvbk1lbnVJZkV4aXN0cyhlKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2FsZW5kYXJHZW5lcmF0aW9uKClcclxuICAgICAgICB0aGlzLmhhbmRsZUFkZExpbmVCdXR0b25DbGljaygpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlTGluZSAoKXtcclxuICAgICAgICB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgndHInLCAnc3ViamVjdC1saW5lJylcclxuICAgICAgICBsZXQgcmVtb3ZlTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1saW5lJylcclxuICAgICAgICBsZXQgYWRkTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmFkZC1saW5lJylcclxuICAgICAgICBsZXQgc3ViamVjdExpbmVcclxuICAgICAgICBsZXQgZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbiBcclxuICAgICAgICBpZihhZGRMaW5lQnV0dG9uKXtcclxuICAgICAgICAgICAgdGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyID0gYWRkTGluZUJ1dHRvbi5wYXJlbnRFbGVtZW50IFxyXG4gICAgICAgICAgICBzdWJqZWN0TGluZSA9IHRoaXMuYWRkTGluZUJ1dHRvbkNvbnRhaW5lci5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgICAgIGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24gPSBzdWJqZWN0TGluZS5xdWVyeVNlbGVjdG9yKCcuZ2VuZXJhdGUtY2FsZW5kYXInKVxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJCdXR0b25Db250YWluZXIgPSBnZW5lcmF0ZUNhbGVuZGFyQnV0dG9uLnBhcmVudEVsZW1lbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jcmVhdGlvbi10Ym9keScpXHJcbiAgICAgICAgaWYocmVtb3ZlTGluZUJ1dHRvbiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHJlbW92ZUxpbmVCdXR0b24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJlbW92ZUxpbmVCdXR0b24ucGFyZW50RWxlbWVudCkgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5LmFwcGVuZENoaWxkKHRoaXMuY3VycmVudENyZWF0ZWRMaW5lKVxyXG4gICAgICAgIGxldCBjdXJyZW50Q3JlYXRlZExpbmVJbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdzdWJqZWN0LSR7dGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXN9JyBpZD0nc3ViamVjdC1pbnB1dCc+PC90ZD5cclxuICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J2NoYXB0ZXItJHt0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lc30nIGlkPSdjaGFwdGVyLWlucHV0Jz48L3RkPlxyXG4gICAgICAgIDx0ZD48aW5wdXQgdHlwZT0nZGF0ZScgbmFtZT0nZGF0ZS0ke3RoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzfScgaWQ9J2RhdGUtaW5wdXQnPjwvdGQ+XHJcbiAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSd0aW1lJyBuYW1lPSdob3VyLSR7dGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXN9JyBpZD0naG91ci1pbnB1dCc+PC90ZD5cclxuICAgICAgICBgXHJcbiAgICAgICAgaWYoIXRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDcmVhdGVkTGluZUlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gYWRkX2xpbmVfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLXBsdXMgYWRkLWxpbmUnPjwvaT48L3RkPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9J3Jvd19hY3Rpb25fYnV0dG9uIGdlbmVyYXRlX2NhbGVuZGFyX2J1dHRvbic+PGkgY2xhc3M9J2ZhcyBmYS1jaGVjayBnZW5lcmF0ZS1jYWxlbmRhcic+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gcmVtb3ZlX2xpbmVfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLXdpbmRvdy1jbG9zZSByZW1vdmUtbGluZSc+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q3JlYXRlZExpbmUuaW5uZXJIVE1MID0gY3VycmVudENyZWF0ZWRMaW5lSW5uZXJIVE1MXHJcbiAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPD0gODAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpZighaXNVbmRlZmluZWQoc3ViamVjdExpbmUpKXtcclxuICAgICAgICAgICAgICAgIHN1YmplY3RMaW5lLnJlbW92ZUNoaWxkKHRoaXMuYWRkTGluZUJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIHN1YmplY3RMaW5lLnJlbW92ZUNoaWxkKHRoaXMuZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdyb3dGb3JtSGVpZ2h0KClcclxuICAgICAgICB0aGlzLmdyb3dNb2RhbEhlaWdodCgpXHJcbiAgICAgICAgdGhpcy5ncm93Qm9keUhlaWdodElmTW9kYWxDb2xsYXBzZSgpXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBoYW5kbGVSZW1vdmVMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnJlbW92ZS1saW5lJykgICAgICBcclxuICAgICAgICBpZih0aGlzLnJlbW92ZUxpbmVCdXR0b24gIT09IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrT25SZW1vdmVMaW5lQnV0dG9uKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2tPblJlbW92ZUxpbmVCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lcy0tXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lciA9IHRoaXMucmVtb3ZlTGluZUJ1dHRvbi5wYXJlbnROb2RlXHJcbiAgICAgICAgICAgIGxldCByZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50ID0gdGhpcy5yZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyLnBhcmVudE5vZGVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnRIYXNDbGFzc05hbWUocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudCwgJ2FjdGlvbl9tZW51JykpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQucHJldmlvdXNFbGVtZW50U2libGluZylcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudShyZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUb0xhc3RSb3dBY3Rpb25CdXR0b25zKClcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQuY2xhc3NMaXN0LmFkZCgnaW52aXNpYmxlLXN1YmplY3QtbGluZScpXHJcbiAgICAgICAgICAgICAgICByZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkucmVtb3ZlQ2hpbGQocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRvTGFzdFJvd0FjdGlvbkJ1dHRvbnMoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZFRvTGFzdFJvd0FjdGlvbkJ1dHRvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5Lmxhc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQodGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5Lmxhc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZUNhbGVuZGFyQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgIGlmKHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5LmZpcnN0RWxlbWVudENoaWxkICE9PSB0aGlzLmNhbGVuZGFyQ3JlYXRpb25UYm9keS5sYXN0RWxlbWVudENoaWxkKXtcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkubGFzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZCh0aGlzLnJlbW92ZUxpbmVCdXR0b25Db250YWluZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZHVjZUZvcm1IZWlnaHRVbnRpbE5vcm1hbCgpXHJcbiAgICAgICAgdGhpcy5yZWR1Y2VNb2RhbEhlaWdodFVudGlsTm9ybWFsKClcclxuICAgICAgICB0aGlzLnJlZHVjZUJvZHlIZWlndGhVbnRpbE5vcm1hbCgpXHJcbiAgICB9XHJcblxyXG4gICAgZ3Jvd0Zvcm1IZWlnaHQoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZ3Jvd0VsZW1lbnRTaXplKHRoaXMubW9kYWxGb3JtLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2hlaWdodCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm1vZGFsRm9ybS5vZmZzZXRIZWlnaHQgKyB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5vZmZzZXRIZWlnaHRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdyb3dNb2RhbEhlaWdodCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5ncm93RWxlbWVudFNpemUodGhpcy5tb2RhbCwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICdoZWlnaHQnLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgKyB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5vZmZzZXRIZWlnaHRcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFxyXG4gICAgICogQHBhcmFtIHt7YXR0cmlidXRlOiBzdHJpbmcsIHZhbHVlOiBudW1iZXJ9fSBvcHRpb25zIFxyXG4gICAgICovXHJcbiAgICBncm93RWxlbWVudFNpemUoZWxlbWVudCwgb3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICBpZihvcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3dpZHRoJyl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBvcHRpb25zLnZhbHVlICsgJ3B4J1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLnZhbHVlICsgJ3B4J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ3Jvd0JvZHlIZWlnaHRJZk1vZGFsQ29sbGFwc2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ID49IDQ3MCkge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3dFbGVtZW50U2l6ZShkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdoZWlnaHQnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0ICsgdGhpcy5jdXJyZW50Q3JlYXRlZExpbmUub2Zmc2V0SGVpZ2h0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZHVjZUZvcm1IZWlnaHRVbnRpbE5vcm1hbCgpIHtcclxuICAgICAgICBsZXQgbW9kYWxGb3JtSGVpZ2h0ID0gdGhpcy5tb2RhbEZvcm0ub2Zmc2V0SGVpZ2h0XHJcbiAgICAgICAgaWYobW9kYWxGb3JtSGVpZ2h0ID4gdGhpcy5vcmlnaW5hbE1vZGFsRm9ybUhlaWd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsRm9ybS5zdHlsZS5oZWlnaHQgPSBtb2RhbEZvcm1IZWlnaHQgLSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykub2Zmc2V0SGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWR1Y2VNb2RhbEhlaWdodFVudGlsTm9ybWFsKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLm1vZGFsLm9mZnNldEhlaWdodCA+IHRoaXMub3JpZ2luYWxNb2RhbEhlaWd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLnN0eWxlLmhlaWdodCA9IHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0IC0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCd0cicpLm9mZnNldEhlaWdodCArICdweCdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVkdWNlQm9keUhlaWd0aFVudGlsTm9ybWFsKClcclxuICAgIHtcclxuICAgICAgICBpZihkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCA+IHRoaXMub3JpZ2luYWxCb2R5SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQgLSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykub2Zmc2V0SGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDYWxlbmRhckdlbmVyYXRpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBnZW5lcmF0ZUNhbGVuZGFyQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcuZ2VuZXJhdGUtY2FsZW5kYXInKVxyXG4gICAgICAgIGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxlbmRhcihlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24uZmlsbElucHV0c1dpdGhTYW1lRGF0ZSgpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5mZXRjaExpbmVzVG9SZXBlYXQoKVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVMaW5lc09mUmVwZXRpdGlvbnMoKVxyXG4gICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudUlmRXhpc3RzKGUpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5mZXRjaExpbmVzV2l0aFNlbWJsYWJsZXNUaW1lcygpXHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5zcGFjZUV2ZXJ5UmV2aXNpb25zV2l0aFNhbWVIb3VyKClcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLnNwYWNlRXZlcnlSZXZpc2lvbnNTcGFjZWRVbmRlcjJIKClcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUxpbmVzT2ZSZXBldGl0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgbG9vcE92ZXJPYmplY3QodGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5pbnB1dHNXaXRoU2FtZURhdGUsIChkYXRlLCBpbnB1dHMpPT57XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZTdWJqZWN0c0lzTm9ybWFsKGlucHV0cywgZGF0ZSlcclxuICAgICAgICAgICAgdGhpcy5udW1iZXJPZlN1YmplY3RzTW9yZVRoYW5Ob3JtYWwoaW5wdXRzLCBkYXRlKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG51bWJlck9mU3ViamVjdHNJc05vcm1hbChpbnB1dHMsIGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoaW5wdXRzLmxlbmd0aCA8IHRoaXMuYXRMZWFzdE9uZVJvd0lzRXhlcmNpc2UgXHJcbiAgICAgICAgICAgICYmIHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb25cclxuICAgICAgICAgICAgICAgIC5saW5lc1RvUmVwZWF0W2RhdGVdICE9PSB1bmRlZmluZWRcclxuICAgICAgICApe1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmxpbmVzVG9SZXBlYXRbZGF0ZV0uZm9yRWFjaChyb3cgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Um93VG9SZXBlYXQgPSByb3dcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc0NhbGVuZGFyKHJvdykgICAgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG51bWJlck9mU3ViamVjdHNNb3JlVGhhbk5vcm1hbChpbnB1dHMsIGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgc3dpdGNoKGlucHV0cy5sZW5ndGgpe1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMuYXRMZWFzdE9uZVJvd0lzRXhlcmNpc2U6IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZ09uZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSB0aGlzLmF0TGVhc3RUd29Sb3dzQXJlRXhlcmNpc2VzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZ1R3byhkYXRlKVxyXG4gICAgICAgICAgICAgICAgYnJlYWsgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nT25lKGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UXVvdGFFcnJvck1lc3NhZ2VUb1Nob3cgPSB0aGlzLm1lc3NhZ2VGb3JRdW90YUVycm9yT25lXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZyhkYXRlKVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nVHdvKGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UXVvdGFFcnJvck1lc3NhZ2VUb1Nob3cgPSB0aGlzLm1lc3NhZ2VGb3JRdW90YUVycm9yVHdvXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zT3JTaG93V2FybmluZyhkYXRlKVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nKGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZVBlckRhdGVbZGF0ZV0gPj0gMSl7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmlzUXVvdGFFcnJvcil7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoQXJyYXlFbGVtZW50cyh0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmxpbmVzVG9SZXBlYXRbZGF0ZV0sIChsaW5lKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJvd1RvUmVwZWF0ID0gbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZXBldGl0aW9uc0NhbGVuZGFyKGxpbmUpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1dhcm5pbmcoZGF0ZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1dhcm5pbmcoZGF0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmlzUXVvdGFFcnJvciA9IHRydWVcclxuICAgICAgICB0aGlzLmZvY3VzQ2hhcHRlcklucHV0T24odGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5saW5lc1RvUmVwZWF0W2RhdGVdKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlV2FybmluZyh0aGlzLmN1cnJlbnRRdW90YUVycm9yTWVzc2FnZVRvU2hvdylcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Kn0gbGluZXNUb1JlcGVhdE9mQURhdGUgXHJcbiAgICAgKi9cclxuICAgIGZvY3VzQ2hhcHRlcklucHV0T24obGluZXNUb1JlcGVhdE9mQURhdGUpe1xyXG4gICAgICAgIGZvcmVhY2hBcnJheUVsZW1lbnRzKGxpbmVzVG9SZXBlYXRPZkFEYXRlLCAobGluZSk9PntcclxuICAgICAgICAgICAgdGhpcy5hbGVydEZvY3VzT25FbGVtZW50KGxpbmUucXVlcnlTZWxlY3RvcignI2NoYXB0ZXItaW5wdXQnKSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IHJvdyBcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVSZXBldGl0aW9uc0NhbGVuZGFyKHJvdyl7XHJcbiAgICAgICAgbGV0IHJvd0lucHV0cyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpXHJcbiAgICAgICAgbGV0IGVtcHR5SW5wdXRFeGlzdHMgPSBmYWxzZVxyXG5cclxuICAgICAgICByb3dJbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlmKGlucHV0LnZhbHVlID09PSAnJyl7XHJcbiAgICAgICAgICAgICAgICBlbXB0eUlucHV0RXhpc3RzID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBpZighZW1wdHlJbnB1dEV4aXN0cyl7XHJcbiAgICAgICAgICAgIHRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlTGluZXMocm93KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2FybmluZycpID09PSBudWxsKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNXYXJuaW5nID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVXYXJuaW5nKFwiSW1wb3NzaWJsZSBkZSBnw6luw6lyZXIgbGVzIHLDqXDDqXRpdGlvbnMgc2kgbGVzIGNoYW1wcyBzb250IHZpZGVzLlwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVSb3dFbGVtZW50fSByb3cgXHJcbiAgICAgKi9cclxuICAgIGdlbmVyYXRlTGluZXMocm93KSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8PSB0aGlzLm51bWJlck9mUmVwZXRpdGlvbnM7IGkrKyl7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGluZSgpXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZFJlcGV0aXRpb25zID0gaVxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlSW5wdXRzVmFsdWUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBJTCBGQVVUIFJFR0xFUiBDRUNJIENBUiBDRVQgRUxFTUVOVCBSRVNURSBMJ0VMRU1FTlQgSU5JVElBTFxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZUlucHV0c1ZhbHVlKCl7XHJcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGJvZHknKVxyXG4gICAgICAgIGxldCB0Ym9keUxhc3RDaGlsZCA9IHRib2R5Lmxhc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICBsZXQgc3ViamVjdElucHV0ID0gdGJvZHlMYXN0Q2hpbGQucXVlcnlTZWxlY3RvcignI3N1YmplY3QtaW5wdXQnKVxyXG4gICAgICAgIGxldCBjaGFwdGVySW5wdXQgPSB0Ym9keUxhc3RDaGlsZC5xdWVyeVNlbGVjdG9yKCcjY2hhcHRlci1pbnB1dCcpXHJcbiAgICAgICAgbGV0IGRhdGVJbnB1dCA9IHRib2R5TGFzdENoaWxkLnF1ZXJ5U2VsZWN0b3IoJyNkYXRlLWlucHV0JylcclxuICAgICAgICBsZXQgaG91cklucHV0ID0gdGJvZHlMYXN0Q2hpbGQucXVlcnlTZWxlY3RvcignI2hvdXItaW5wdXQnKVxyXG4gICAgXHJcbiAgICAgICAgc3ViamVjdElucHV0LnZhbHVlID0gdGhpcy5jdXJyZW50Um93VG9SZXBlYXQ/LnF1ZXJ5U2VsZWN0b3IoJyNzdWJqZWN0LWlucHV0JykudmFsdWVcclxuICAgICAgICBjaGFwdGVySW5wdXQudmFsdWUgPSB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdD8ucXVlcnlTZWxlY3RvcignI2NoYXB0ZXItaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtbc3RyaW5nLCBzdHJpbmddfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCBzcGxpdHRlZEhvdXIgPSB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdD8ucXVlcnlTZWxlY3RvcignI2hvdXItaW5wdXQnKS52YWx1ZS5zcGxpdCgnOicpXHJcbiAgICAgICAgbGV0IHNwbGl0dGVkRGF0ZSA9IHRoaXMuY3VycmVudFJvd1RvUmVwZWF0Py5xdWVyeVNlbGVjdG9yKCcjZGF0ZS1pbnB1dCcpLnZhbHVlLnNwbGl0KCctJylcclxuICAgICAgICBcclxuICAgICAgICBsZXQgeWVhciA9IHNwbGl0dGVkRGF0ZVswXVxyXG4gICAgICAgIGxldCBtb250aCA9IHNwbGl0dGVkRGF0ZVsxXVxyXG4gICAgICAgIGxldCBkYXkgPSBzcGxpdHRlZERhdGVbMl1cclxuICAgICAgICBsZXQgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb24gPSAwXHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoKHRoaXMuY3JlYXRlZFJlcGV0aXRpb25zKXtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb24gPSB0aGlzLnJlcGV0aXRpb24uZmlyc3RcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIGhvdXJCZXR3ZWVuQ3VycmVudEFuZE5leHRSZXBldGl0aW9uID0gdGhpcy5yZXBldGl0aW9uLnNlY29uZFxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb24gPSB0aGlzLnJlcGV0aXRpb24udGhpcmRcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIGhvdXJCZXR3ZWVuQ3VycmVudEFuZE5leHRSZXBldGl0aW9uID0gdGhpcy5yZXBldGl0aW9uLmZvdXJ0aFxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb24gPSB0aGlzLnJlcGV0aXRpb24uZmlmdGggXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgbmV3SG91clZhbHVlID0gcGFyc2VJbnQoc3BsaXR0ZWRIb3VyWzBdLCAxMCkgKyBob3VyQmV0d2VlbkN1cnJlbnRBbmROZXh0UmVwZXRpdGlvblxyXG4gICAgICAgIGNvbnNvbGUubG9nKG5ld0hvdXJWYWx1ZSlcclxuICAgICAgICBpZihuZXdIb3VyVmFsdWUgPCAyMCl7XHJcbiAgICAgICAgICAgIGRhdGVJbnB1dC52YWx1ZSA9IHRoaXMuY3VycmVudFJvd1RvUmVwZWF0Py5xdWVyeVNlbGVjdG9yKCcjZGF0ZS1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgICAgIGhvdXJJbnB1dC52YWx1ZSA9IG5ld0hvdXJWYWx1ZS50b1N0cmluZygxMCkubGVuZ3RoID09PSAxID8gXHJcbiAgICAgICAgICAgICAgICBcIjBcIiArIG5ld0hvdXJWYWx1ZSArICc6JyArIHNwbGl0dGVkSG91clsxXSA6XHJcbiAgICAgICAgICAgICAgICBuZXdIb3VyVmFsdWUgKyAnOicgKyBzcGxpdHRlZEhvdXJbMV1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy8gMS4gT04gVkVSSUZJRSBTSSBMQSBOT1VWRUxMRSBIRVVSRSBFU1QgREFOUyBMRVMgSEVVUkVTIERFIFRSQVZBSUwgTUFUSU5BTEVTIE9VIEQnQVBSRVMgTUlESVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYodGhpcy5yZXBldGl0aW9uLmlzV29ya1RpbWUobmV3SG91clZhbHVlKSl7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gMi4gU0kgT1VJIE9OIElOU0VSVCBMQSBOT1VWRUxMRSBIRVVSRSBEQU5TIEwnSU5QVVRcclxuICAgICAgICAgICAgLy8gMy4gU0lOT04gT04gVkVSSUZJRSBRVUUgTEEgTk9VVkVMTEUgSEVVUkUgRVNUIERBTlMgTEVTIEhFVVJFUyBERSBQQVVTRVxyXG4gICAgICAgICAgICAvLyA0LiBTSSBPVUkgOiBPTiBERUZJTklUIExBIE5PVVZFTExFIEhFVVJFIEEgTEEgUFJPQ0hBSU5FIEhFVVJFIE9VIE9OIFJFUFJFTkQgTEUgVFJBVkFJTFxyXG4gICAgICAgICAgICBpZihob3VyQmV0d2VlbkN1cnJlbnRBbmROZXh0UmVwZXRpdGlvbiA9PT0gdGhpcy5yZXBldGl0aW9uLmZpcnN0KXtcclxuICAgICAgICAgICAgICAgIGxldCBpbnROZXdEYXlWYWx1ZSA9IHBhcnNlSW50KGRheSkgKyAxXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3RGF5VmFsdWUgPSBpbnROZXdEYXlWYWx1ZS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIGludE5ld0RheVZhbHVlLnRvU3RyaW5nKCkgOiBwYXJzZUludChkYXkpICsgMVxyXG4gICAgICAgICAgICAgICAgbmV3SG91clZhbHVlID0gOFxyXG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0geWVhciArICctJyArIG1vbnRoICsgJy0nICsgbmV3RGF5VmFsdWVcclxuICAgICAgICAgICAgICAgIGlmKGRhdGVJbnB1dC52YWx1ZSA9PT0gJycpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnRNb250aCA9IHBhcnNlSW50KG1vbnRoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGludE1vbnRoIDwgMTIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlSW5wdXQudmFsdWUgPSB5ZWFyICsgJy0wJyArIChpbnRNb250aCArIDEpICsgJy0nICsgJzAxJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlSW5wdXQudmFsdWUgPSAocGFyc2VJbnQoeWVhcikgKyAxKSArICctJyArICcwMScgKyAnLScgKyAnMDEnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaG91cklucHV0LnZhbHVlID0gJzAnICsgbmV3SG91clZhbHVlICsgJzonICsgc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudFJvd1RvUmVwZWF0ID0gdGJvZHlMYXN0Q2hpbGRcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVXYXJuaW5nKG1lc3NhZ2Upe1xyXG4gICAgXHJcbiAgICAgICAgbGV0IHdhcm5pbmdQYXJhZ3JhcGggPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ3AnLCAnd2FybmluZycpXHJcbiAgICAgICAgbGV0IGkgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2knLCAnZmFzIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlJylcclxuICAgICAgICBsZXQgc3BhbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnc3BhbicsICd3YXJuaW5nLW1lc3NhZ2UnKVxyXG5cclxuICAgICAgICB3YXJuaW5nUGFyYWdyYXBoLmFwcGVuZENoaWxkKGkpXHJcbiAgICAgICAgd2FybmluZ1BhcmFncmFwaC5hcHBlbmRDaGlsZChzcGFuKVxyXG4gICAgICAgIHNwYW4uaW5uZXJIVE1MID0gbWVzc2FnZVxyXG5cclxuICAgICAgICB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLmJlZm9yZSh3YXJuaW5nUGFyYWdyYXBoKVxyXG4gICAgICAgIHdhcm5pbmdQYXJhZ3JhcGgub2Zmc2V0V2lkdGhcclxuICAgICAgICB3YXJuaW5nUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZV93YXJuaW5nJylcclxuICAgICAgICBjb25zdCBtYXJnaW5Cb3R0b20gPSAzMFxyXG4gICAgICAgIHRoaXMubW9kYWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgKyB3YXJuaW5nUGFyYWdyYXBoLm9mZnNldEhlaWdodCArIG1hcmdpbkJvdHRvbSArICdweCdcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50QWZ0ZXJNaWxsaXNlY29uZHMod2FybmluZ1BhcmFncmFwaCwgNTAwMCwge1xyXG4gICAgICAgICAgICBjbGFzc05hbWVUb1JlbW92ZTogJ2FjdGl2ZV93YXJuaW5nJyxcclxuICAgICAgICAgICAgZWxlbWVudFdpdGhIZWlnaHRUb0RlY3JlYXNlOiBbdGhpcy5tb2RhbCwgd2FybmluZ1BhcmFncmFwaC5vZmZzZXRIZWlnaHQgKyBtYXJnaW5Cb3R0b21dXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwb3N0Q29udGVudFdpdGhOb3RpZmljYXRpb25UaGVuUmVsb2FkKClcclxuICAgIHtcclxuICAgICAgICBwb3N0KHRoaXMuZm9ybUFjdGlvbiwgdGhpcy5kYXRhVG9Qb3N0T2JqKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlcXVlc3RSZXNwb25zZShyZXNwb25zZSlcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIklsIHkgYSBldSB1bmUgZXJyZXVyIDpcIiArIGVycm9yKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVJlcXVlc3RSZXNwb25zZShyZXNwb25zZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgcmVzcG9uc2VKc29uID0gSlNPTi5wYXJzZShyZXNwb25zZSlcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2VKc29uLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZCA/IHJlc3BvbnNlSnNvbi5zdWNjZXNzIDogcmVzcG9uc2VKc29uLmZhaWxcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNob3dOb3RpZmljYXRpb25XaXRoRGF0YUluTWlsbGlzZWNvbmRzKHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLm5vdGlmaWNhdGlvbkNsYXNzTmFtZSwgXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VcclxuICAgICAgICB9LCAyMDAwKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucmVsb2FkUGFnZSgpIFxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlTW9kYWwoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlTW9kYWwoKVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gdGhpcy5vcmlnaW5hbEJvZHlIZWlnaHQgKyAncHgnXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUm93QWN0aW9uTWVudUlmRXhpc3RzKGUpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGNsaWNrZWRCdXR0b25HcmFuZFBhcmVudCA9IGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuICAgICAgICBpZihjbGlja2VkQnV0dG9uR3JhbmRQYXJlbnQgXHJcbiAgICAgICAgICAgICYmIGVsZW1lbnRIYXNDbGFzc05hbWUoY2xpY2tlZEJ1dHRvbkdyYW5kUGFyZW50LCdhY3Rpb25fbWVudScpXHJcbiAgICAgICAgICAgICYmICF0aGlzLmlzV2FybmluZyAgICBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVSb3dBY3Rpb25NZW51KGNsaWNrZWRCdXR0b25HcmFuZFBhcmVudClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUm93QWN0aW9uTWVudShyb3dBY3Rpb25NZW51KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGlkZVJvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSlcclxuICAgICAgICBsZXQgcm93QWN0aW9uTWVudUJ1dHRvbiA9IHJvd0FjdGlvbk1lbnUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uX21lbnVfYnV0dG9uJylcclxuICAgICAgICBpZihyb3dBY3Rpb25NZW51QnV0dG9uKXtcclxuICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00ocm93QWN0aW9uTWVudUJ1dHRvbilcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00ocm93QWN0aW9uTWVudSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVNb2RhbFJlc3BvbnNpdmUoKVxyXG4gICAge1xyXG4gICAgICAgIG5ldyBtb2RhbFJlc2l6ZSh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZFJvd0FjdGlvbkJ1dHRvbnNJbnRvQU1lbnUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKFxyXG4gICAgICAgICAgICAodGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uX21lbnVfYnV0dG9uJykgPT09IG51bGwgfHwgdGhpcy5sYXN0U3ViamVjdFJvdyAhPT0gbnVsbClcclxuICAgICAgICAgICAgJiYgIXRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkXHJcbiAgICAgICAgKXtcclxuICAgICAgICAgICAgdGhpcy5zdWJqZWN0Um93cyA9IGNyZWF0ZUFycmF5KHRoaXMubW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnN1YmplY3QtbGluZScpKVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXggPSB0aGlzLnN1YmplY3RSb3dzLmxlbmd0aCAtIDFcclxuICAgICAgICAgICAgdGhpcy5sYXN0U3ViamVjdFJvdyA9IHRoaXMuc3ViamVjdFJvd3NbdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4XVxyXG4gICAgICAgICAgICBsZXQgcm93QWN0aW9uQnV0dG9ucyA9IGNyZWF0ZUFycmF5KHRoaXMubGFzdFN1YmplY3RSb3cucXVlcnlTZWxlY3RvckFsbCgnLnJvd19hY3Rpb25fYnV0dG9uJykpXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc0J1dHRvbnNQZXJSb3dbdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4XSA9IHJvd0FjdGlvbkJ1dHRvbnNcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVNZW51Rm9yTGFzdFJvdygpXHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0U3ViamVjdFJvdyA9IG51bGxcclxuICAgICAgICAgICAgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uID0gbnVsbFxyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1lbnUgPSBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZU1lbnVGb3JMYXN0Um93KClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUFjdGlvbk1lbnVCdXR0b24odGhpcy5sYXN0U3ViamVjdFJvdylcclxuICAgICAgICB0aGlzLmNyZWF0ZU1lbnVJblJvd1RoZW5BcHBlbmRDaGlsZHJlbih0aGlzLmxhc3RTdWJqZWN0Um93LCB0aGlzLmFjdGlvbnNCdXR0b25zUGVyUm93W3RoaXMubGFzdFN1YmplY3RSb3dJbmRleF0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTFRhYmxlUm93RWxlbWVudH0gcm93IFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVBY3Rpb25NZW51QnV0dG9uKHJvdylcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24gPSByb3cucXVlcnlTZWxlY3RvcignLmFjdGlvbl9tZW51X2J1dHRvbicpXHJcbiAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uKSB8fCB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uID0gdGhpcy5jcmVhdGVFbGVtZW50KCd0ZCcsICdhY3Rpb25fbWVudV9idXR0b24nKVxyXG4gICAgICAgICAgICB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24uaW5uZXJIVE1MID0gYDxwIGNsYXNzPSdob3RfZG9nX21lbnVfY2lyY2xlJz48L3A+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPSdob3RfZG9nX21lbnVfY2lyY2xlJz48L3A+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPSdob3RfZG9nX21lbnVfY2lyY2xlJz48L3A+YFxyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uKVxyXG4gICAgICAgICAgICB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvZ2dsZUFjdGlvbk1lbnVPZlRoZVJvdy5iaW5kKHRoaXMsIHJvdykpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IHJvdyBcclxuICAgICAqL1xyXG4gICAgY3JlYXRlTWVudUluUm93VGhlbkFwcGVuZENoaWxkcmVuKHJvdywgZnV0dXJDaGlsZHJlbilcclxuICAgIHtcclxuICAgICAgICB0aGlzLmFjdGlvbk1lbnUgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsICdhY3Rpb25fbWVudScpXHJcbiAgICAgICAgZnV0dXJDaGlsZHJlbi5mb3JFYWNoKGZ1dHVyQ2hpbGQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1lbnUuYXBwZW5kQ2hpbGQoZnV0dXJDaGlsZClcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuYWN0aW9uTWVudS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJylcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGhpcy5hY3Rpb25NZW51KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IHJvdyBcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlQWN0aW9uTWVudU9mVGhlUm93KHJvdylcclxuICAgIHtcclxuICAgICAgICBsZXQgcm93QWN0aW9uTWVudSA9IHJvdy5sYXN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgaWYocm93QWN0aW9uTWVudS5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1Jvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSlcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVJvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1Jvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSlcclxuICAgIHtcclxuICAgICAgICByb3dBY3Rpb25NZW51LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuICAgICAgICByb3dBY3Rpb25NZW51Lm9mZnNldFdpZHRoXHJcbiAgICAgICAgcm93QWN0aW9uTWVudS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlX2FjdGlvbl9tZW51JylcclxuICAgICAgICBpZihyb3dBY3Rpb25NZW51LmNoaWxkcmVuLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICByb3dBY3Rpb25NZW51LmNsYXNzTGlzdC5hZGQoJ3RocmVlX2NoaWxkcmVuJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVJvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSkgXHJcbiAgICB7XHJcbiAgICAgICAgcm93QWN0aW9uTWVudS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlX2FjdGlvbl9tZW51JylcclxuICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uRW5kID0gKCk9PntcclxuICAgICAgICAgICAgcm93QWN0aW9uTWVudS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJylcclxuICAgICAgICAgICAgaWYoZWxlbWVudEhhc0NsYXNzTmFtZShyb3dBY3Rpb25NZW51LCAndGhyZWVfY2hpbGRyZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgcm93QWN0aW9uTWVudS5jbGFzc0xpc3QucmVtb3ZlKCd0aHJlZV9jaGlsZHJlbicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm93QWN0aW9uTWVudS5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZClcclxuICAgICAgICB9XHJcbiAgICAgICAgcm93QWN0aW9uTWVudS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZClcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3dBY3Rpb25CdXR0b25zT3V0T2ZNZW51KClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLmFjdGlvbk1lbnVFeGlzdHMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZEFjdGlvbkJ1dHRvbnNJblBhcmVudFJvdygpXHJcbiAgICAgICAgICAgIGlmKHRoaXMuYWN0aW9uTWVudSAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodGhpcy5hY3Rpb25NZW51KSkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00odGhpcy5hY3Rpb25NZW51KVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00odGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFjdGlvbk1lbnVFeGlzdHMoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RTdWJqZWN0Um93ICE9PSBudWxsICYmIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbiAhPT0gbnVsbCAmJiB0aGlzLmFjdGlvbk1lbnUgIT09IG51bGxcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRBY3Rpb25CdXR0b25zSW5QYXJlbnRSb3coKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uc0J1dHRvbnNQZXJSb3dbdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4XS5mb3JFYWNoKGFjdGlvbkJ1dHRvbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdFJvd3NbdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4XS5hcHBlbmRDaGlsZChhY3Rpb25CdXR0b24pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhbGVydEVtcHR5SW5wdXRzKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1vZGFsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzTWVzc2FnZUNvcnJlc3BvbmRzVG8oaW5wdXQubmFtZSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGVydEZvY3VzT25FbGVtZW50KGlucHV0KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGVydEZvY3VzV2hlbmNsaWNrKGlucHV0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCBDYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zIGZyb20gXCIuLi9BYnN0cmFjdENsYXNzZXMvQ2FsZW5kYXJDcmVhdGlvbkRPTUludGVyYWN0aW9uc1wiXHJcblxyXG4gLyoqXHJcbiogY3LDqWUgdW4gbm91dmVsIGVtcGxvaSBkdSB0ZW1wc1xyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQWRkQ2FsZW5kYXIoZSl7XHJcbiAgIGxldCBudW1iZXIgPSAxXHJcbiAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxyXG4gICBsZXQgZG9tSW50ZXJhY3Rpb25zID0gbmV3IENhbGVuZGFyQ3JlYXRpb25ET01JbnRlcmFjdGlvbnMoKVxyXG4gICBsZXQgZm9ybSA9IGRvbUludGVyYWN0aW9ucy5jcmVhdGVGb3JtKCdQT1NUJywgJ2NyZWF0ZS1jYWxlbmRhcicpXHJcblxyXG4gICBsZXQgZm9ybUNvbnRlbnQgPSBgXHJcbiAgICAgICA8dGFibGUgY2xhc3M9XCJjcmVhdGVfY2FsZW5kYXJfdGFibGVcIj5cclxuICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgIDx0aD5NYXRpw6hyZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICA8dGg+Q2hhcGl0cmUgw6Agw6l0dWRpZXI8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgPHRoPkRhdGU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgPHRoPkhldXJlPC90aD5cclxuICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgIDx0Ym9keSBjbGFzcz0nY2FsZW5kYXItY3JlYXRpb24tdGJvZHknPlxyXG4gICAgICAgICAgICAgICA8dHIgY2xhc3M9J3N1YmplY3QtbGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3N1YmplY3QtJHtudW1iZXJ9JyBpZD0nc3ViamVjdC1pbnB1dCc+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nY2hhcHRlci0ke251bWJlcn0nIGlkPSdjaGFwdGVyLWlucHV0Jz48L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSdkYXRlJyBuYW1lPSdkYXRlLSR7bnVtYmVyfScgaWQ9J2RhdGUtaW5wdXQnPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RpbWUnIG5hbWU9J2hvdXItJHtudW1iZXJ9JyBpZD0naG91ci1pbnB1dCc+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gYWRkX2xpbmVfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLXBsdXMgYWRkLWxpbmUnPjwvaT48L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSdyb3dfYWN0aW9uX2J1dHRvbiBnZW5lcmF0ZV9jYWxlbmRhcl9idXR0b24nPjxpIGNsYXNzPSdmYXMgZmEtY2hlY2sgZ2VuZXJhdGUtY2FsZW5kYXInPjwvaT48L3RkPlxyXG4gICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIGNsYXNzPSdzdWJtaXRCdG4gbW9kYWwtYWRkJyBpZD0nc3VibWl0LWNhbGVuZGFyJz5DcsOpZXIgbCdhbXBsb2kgZHUgdGVtcHM8L2J1dHRvbj5cclxuICAgYFxyXG4gICBcclxuICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXItY3JlYXRpb24taW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtaW5zdHJ1Y3Rpb25zLXRvcCcpXHJcbiAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZm9ybSlcclxuICAgZm9ybS5pbm5lckhUTUwgPSBmb3JtQ29udGVudFxyXG4gICBkb21JbnRlcmFjdGlvbnMuY3JlYXRlTW9kYWwoJ2NhbGVuZGFyX2NyZWF0aW9uX21vZGFsJywgZm9ybSwgeyBkZWZhdWx0TW9kYWxDb250ZW50OiB0cnVlfSlcclxuICAgZG9tSW50ZXJhY3Rpb25zLmhhbmRsZU1vZGFsUmVzcG9uc2l2ZSgpIFxyXG4gICBkb21JbnRlcmFjdGlvbnMuaGFuZGxlQWN0aW9uc0luTW9kYWxDb250ZW50KCkgIFxyXG59IiwiaW1wb3J0IHsgZ2V0IH0gZnJvbSBcImpxdWVyeVwiO1xyXG5pbXBvcnQgeyBsb2FkQ29udGVudCB9IGZyb20gXCIuLi9ob21lXCI7XHJcbmltcG9ydCBTaWRlYnJhTGVmdCBmcm9tIFwiLi4vTW9kdWxlcy9TaWRlYmFyTGVmdFwiO1xyXG5pbXBvcnQgeyBUaGVyZUFyZURhdGFUb1NlbmRXaXRoR0VUUmVxdWVzdCB9IGZyb20gXCIuL1RoZXJlQXJlRGF0YVRvU2VuZFdpdGhHRVRSZXF1ZXN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBkZWxldGVDYWxlbmRhckRPTUludGVyYWN0aW9ucyBleHRlbmRzIFRoZXJlQXJlRGF0YVRvU2VuZFdpdGhHRVRSZXF1ZXN0IHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzU2VuZGluZ0RhdGFUb1NlcnZlcigpXHJcbiAgICB7XHJcbiAgICAgICAgZ2V0KCcvZHJvcC1jYWxlbmRhcicpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKClcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uV2l0aERhdGFJbk1pbGxpc2Vjb25kcyh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2FsZW5kYXJfZGVsZXRpb25fbm90aWZpY2F0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBKU09OLnBhcnNlKHJlcykubWVzc2FnZVxyXG4gICAgICAgICAgICB9LCAyMDAwKVxyXG4gICAgICAgICAgICBuZXcgU2lkZWJyYUxlZnQoKVxyXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG4gICAgICAgIH0pIFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IGRlbGV0ZUNhbGVuZGFyRE9NSW50ZXJhY3Rpb25zIGZyb20gXCIuLi9BYnN0cmFjdENsYXNzZXMvZGVsZXRlQ2FsZW5kYXJET01JbnRlcmFjdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhbGVuZGFyKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBkb21JbnRlcmFjdGlvbnMgPSBuZXcgZGVsZXRlQ2FsZW5kYXJET01JbnRlcmFjdGlvbnMoKVxyXG4gICAgZG9tSW50ZXJhY3Rpb25zLmNyZWF0ZU1vZGFsKCdkZWxldGVfY2FsZW5kYXJfbW9kYWwnLCBgXHJcbiAgICA8cD5Wb3VzIMOqdGVzIHPDu3IgZGUgdm91bG9pciBzdXBwcmltZXIgY2V0IGVtcGxvaSBkdSB0ZW1wcz88L3A+XHJcbiAgICA8YnV0dG9uIGNsYXNzPSdzdXJlJz5PdWksIHN1cHByaW1lciBsJ2VtcGxvaSA8YnI+ZHUgdGVtcHM8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSdubyc+QW5udWxlcjwvYnV0dG9uPlxyXG4gICAgYClcclxuICAgIGRvbUludGVyYWN0aW9ucy5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQoZS5jdXJyZW50VGFyZ2V0LCB0cnVlKVxyXG59IiwiaW1wb3J0IHsgZ2V0IH0gZnJvbSAnanF1ZXJ5J1xyXG5pbXBvcnQgeyBoYW5kbGVBZGRDYWxlbmRhciB9IGZyb20gJy4uL0Z1bmN0aW9ucy9oYW5kbGVBZGRDYWxlbmRhcidcclxuaW1wb3J0IGhhbmRsZURlbGV0ZUNhbGVuZGFyIGZyb20gJy4uL3VzZXIvaGFuZGxlRGVsZXRlQ2FsZW5kYXInXHJcbmltcG9ydCBTaWRlYnJhTGVmdCBmcm9tICcuL1NpZGViYXJMZWZ0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZW50KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuICAgICAgICB0aGlzLnJvb3QuaW5uZXJIVE1MID0gY29udGVudFxyXG4gICAgICAgIHRoaXMuYWRkQ2FsZW5kYXJCdXR0b25DbGljaygpXHJcbiAgICAgICAgdGhpcy5wbGF5QnV0dG9uQ2xpY2soKVxyXG4gICAgICAgIHRoaXMuYW5vdGhlclRpbWVCdXR0b25DbGljaygpIFxyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJUYWJsZUludGVyYWN0aW9ucygpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FsZW5kYXJCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgYWRkQ2FsZW5kYXIgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLmFkZC1jYWxlbmRhcicpXHJcbiAgICAgICAgaWYoYWRkQ2FsZW5kYXIgIT09IG51bGwpe1xyXG4gICAgICAgICAgICBhZGRDYWxlbmRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFkZENhbGVuZGFyKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwbGF5QnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHBsYXlCdXR0b24gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnJldmlzaW9uLXBsYXknKVxyXG4gICAgICAgIGlmKHBsYXlCdXR0b24gIT09IG51bGwpe1xyXG4gICAgICAgICAgICBpbXBvcnQoJy4uL3BsYXlTdWJqZWN0JykudGhlbihtb2R1bGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxheVN1YmplY3QgPSBtb2R1bGUuZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlTdWJqZWN0KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYW5vdGhlclRpbWVCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgYW5vdGhlclRpbWVCdXR0b24gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmFub3RoZXItdGltZS1yZXZpc2lvbi1idXR0b24nKVxyXG4gICAgICAgIGlmKGFub3RoZXJUaW1lQnV0dG9uICE9PSBudWxsKXtcclxuICAgICAgICAgICAgYW5vdGhlclRpbWVCdXR0b24uZm9yRWFjaChidXR0b24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaW1wb3J0KCcuLi9hbm90aGVyLXRpbWUtcmV2aXNpb24tYnV0dG9uLWNsaWNrJykudGhlbihtb2R1bGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFub3RoZXJUaW1lUmV2aXNpb25CdXR0b25DbGljayA9IG1vZHVsZS5kZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYW5vdGhlclRpbWVSZXZpc2lvbkJ1dHRvbkNsaWNrKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FsZW5kYXJUYWJsZUludGVyYWN0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHRib2R5ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JylcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYodGJvZHkgIT09IG51bGwpe1xyXG4gICAgICAgICAgICBsZXQgc3ViamVjdERhdGUgPSB0Ym9keS5xdWVyeVNlbGVjdG9yQWxsKCcuc3ViamVjdC1kYXRlJylcclxuICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgIHN1YmplY3REYXRlLmZvckVhY2goc2QgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXR0ZWREYXRlID0gc2QuaW5uZXJIVE1MLnNwbGl0KCctJylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IHBhcnNlSW50KHNwbGl0dGVkRGF0ZVswXSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gc3BsaXR0ZWREYXRlWzFdXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKChkYXkgPCBkYXRlLmdldERhdGUoKSAmJiBtb250aCA8PSBkYXRlLmdldE1vbnRoKCkpIHx8IG1vbnRoIDwgZGF0ZS5nZXRNb250aCgpICsgMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9vbiBzdXBwcmltZSBsJ2VtcGxvaSBkdSB0ZW1wc1xyXG4gICAgICAgICAgICAgICAgICAgIGdldCgnL2Ryb3AtY2FsZW5kYXInKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTaWRlYnJhTGVmdCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLmRlbGV0ZV9idXR0b24nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVEZWxldGVDYWxlbmRhcilcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi4vRnVuY3Rpb25zL1JlcXVlc3QvYWpheCdcclxuaW1wb3J0IENvbnRlbnQgZnJvbSAnLi9Db250ZW50J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2lkZWJyYUxlZnQge1xyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpXHJcbiAgICAgICAgdGhpcy5zaWRlYmFyTGVmdENoaWxkcmVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpZGViYXItbGVmdCBpJylcclxuICAgICAgICBpZih0aGlzLnNpZGViYXJMZWZ0Q2hpbGRyZW4gIT09IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLnNpZGViYXJMZWZ0Q2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1pdGVtJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbnRlbnQoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaWRlYmFyTGVmdENoaWxkcmVuY2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2lkZWJhckxlZnRDaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgY2hpbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaWRlYmFyTGVmdENoaWxkcmVuLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtaXRlbScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1pdGVtJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1pdGVtJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZENvbnRlbnQoKVxyXG4gICAgICAgICAgICB9LCApXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBsb2FkQ29udGVudCgpe1xyXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUtaXRlbScpLmNsYXNzTGlzdC52YWx1ZS5zcGxpdChcIiBcIilbMl1cclxuICAgICAgICBjb25zdCByb3V0ZSA9IFwiL1wiICsgY2xhc3NOYW1lLnJlcGxhY2UoXCItbG9nb1wiLCBcIlwiKVxyXG4gICAgICAgIGdldChyb3V0ZSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBuZXcgQ29udGVudChyZXMpXHJcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///629\n")}}]);