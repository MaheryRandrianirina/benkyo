"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[886],{505:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Z\": () => (/* binding */ CalendarCreationDOMInteractions)\n});\n\n// EXTERNAL MODULE: ./src/Functions/Request/ajax.js\nvar ajax = __webpack_require__(54);\n// EXTERNAL MODULE: ./src/Functions/Tools/DOMTools.js\nvar DOMTools = __webpack_require__(804);\n// EXTERNAL MODULE: ./src/Functions/Tools/Tools.js\nvar Tools = __webpack_require__(337);\n;// CONCATENATED MODULE: ./src/RepetitionsGeneration/Repetition.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar Repetition = /*#__PURE__*/function () {\n  function Repetition() {\n    _classCallCheck(this, Repetition);\n\n    /**\r\n     * @property hoursForNextRepetitions indexé par les rangs de répétitions\r\n     * @type {{number: [number, number],\r\n     * number: [number, number], number: [number, number],\r\n     * number: [number, number], number: [number, number]\r\n     * }}\r\n     */\n    this.hoursForNextRepetitions = {\n      1: [8, 0],\n      2: [24, 1],\n      3: [24 * 7, 7],\n      4: [27 * 7 * 2, 14],\n      5: [24 * 30, 30]\n    };\n    /**\r\n     * @type {{morning: [number, number], afternoon: [number, number]}}\r\n     */\n\n    this.hoursInADay = {\n      morning: [8, 11.30],\n      afternoon: [14, 20]\n    };\n  }\n  /**\r\n   * \r\n   * @param {number} newHourValue \r\n   * @return {boolean}\r\n   */\n\n\n  _createClass(Repetition, [{\n    key: \"isBeforeWorkTime\",\n    value: function isBeforeWorkTime(newHourValue) {\n      return newHourValue < this.hoursInADay.morning[0];\n    }\n    /**\r\n     * \r\n     * @param {number} newHourValue \r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"isInWorkTime\",\n    value: function isInWorkTime(newHourValue) {\n      var morningHours = this.repetition.hoursInADay.morning;\n      var afternoonHours = this.repetition.hoursInADay.afternoon;\n      return newHourValue > morningHours[0] && newHourValue < morningHours[1] || newHourValue > afternoonHours[0] && newHourValue < afternoonHours[1];\n    }\n  }]);\n\n  return Repetition;\n}();\n\n\n;// CONCATENATED MODULE: ./src/RepetitionsGeneration/RepetitionDate.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction RepetitionDate_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction RepetitionDate_createClass(Constructor, protoProps, staticProps) { if (protoProps) RepetitionDate_defineProperties(Constructor.prototype, protoProps); if (staticProps) RepetitionDate_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction RepetitionDate_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar RepetitionDate = /*#__PURE__*/function (_Date) {\n  _inherits(RepetitionDate, _Date);\n\n  var _super = _createSuper(RepetitionDate);\n\n  function RepetitionDate(year) {\n    var _this;\n\n    RepetitionDate_classCallCheck(this, RepetitionDate);\n\n    _this = _super.call(this);\n    _this.numberOfDaysPerMonth = {\n      1: 31,\n      2: 28,\n      3: 31,\n      4: 30,\n      5: 31,\n      6: 30,\n      7: 31,\n      8: 31,\n      9: 30,\n      10: 31,\n      11: 30,\n      12: 31\n    };\n    return _this;\n  }\n\n  return RepetitionDate_createClass(RepetitionDate);\n}( /*#__PURE__*/_wrapNativeSuper(Date));\n\n\n;// CONCATENATED MODULE: ./src/responsives/modalResize.js\nfunction modalResize_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction modalResize_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction modalResize_createClass(Constructor, protoProps, staticProps) { if (protoProps) modalResize_defineProperties(Constructor.prototype, protoProps); if (staticProps) modalResize_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar modalResize = /*#__PURE__*/function () {\n  function modalResize(CalendarCreationDOM) {\n    modalResize_classCallCheck(this, modalResize);\n\n    /**\r\n     * @type CalendarCreationDOMInteractions\r\n     */\n    this.calendarCreationDOM = CalendarCreationDOM;\n    this.isRowActionButtonsHidden = false;\n    this.handleWindowResize();\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n  }\n\n  modalResize_createClass(modalResize, [{\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      var hideRowActionButtons = window.innerWidth <= 800;\n\n      if (hideRowActionButtons && this.calendarCreationDOM.modal) {\n        this.isRowActionButtonsHidden = true;\n        this.calendarCreationDOM.appendRowActionButtonsIntoAMenu();\n      } else if (!hideRowActionButtons && this.calendarCreationDOM.modal && this.isRowActionButtonsHidden) {\n        this.calendarCreationDOM.getRowActionButtonsOutOfMenu();\n        this.isRowActionButtonsHidden = false;\n      }\n    }\n  }]);\n\n  return modalResize;\n}();\n// EXTERNAL MODULE: ./src/AbstractClasses/DOMInteractions.js\nvar DOMInteractions = __webpack_require__(941);\n;// CONCATENATED MODULE: ./src/AbstractClasses/Tools/calendarGenerationTools.js\nfunction calendarGenerationTools_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction calendarGenerationTools_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction calendarGenerationTools_createClass(Constructor, protoProps, staticProps) { if (protoProps) calendarGenerationTools_defineProperties(Constructor.prototype, protoProps); if (staticProps) calendarGenerationTools_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar calendarGenerationTools = /*#__PURE__*/function () {\n  /**\r\n   * \r\n   * @param {calendarGeneration} calendarGeneration \r\n   */\n  function calendarGenerationTools() {\n    calendarGenerationTools_classCallCheck(this, calendarGenerationTools);\n\n    this.modal = document.querySelector('.calendar_creation_modal');\n    this.dateTypeInputs = [];\n    this.inputsWithSameDate = {};\n    this.currentDateTypeInput;\n    this.linesToRepeat = {};\n    this.linesOfInputsWithSameDate = {};\n    this.linesOfInputsWithSameDatetime = {};\n    this.currentObjToLoopForSpacing;\n    this.nextDateTypeInput;\n    this.numberOfLinesOfExercise = 0;\n    this.numberOfLinesOfExercisePerDate = [];\n    this.spaceIsUnder2H = false;\n  }\n\n  calendarGenerationTools_createClass(calendarGenerationTools, [{\n    key: \"fillInputsWithSameDate\",\n    value: function fillInputsWithSameDate() {\n      this.inputs = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('input'));\n      this.fillDateTypeInputs();\n      this.fillInputsWithSameByDateTypeInputs();\n    }\n  }, {\n    key: \"fillDateTypeInputs\",\n    value: function fillDateTypeInputs() {\n      var _this = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(this.inputs, function (input) {\n        if (input.id === 'date-input') {\n          (0,Tools/* pushElementToArray */.n6)(input, _this.dateTypeInputs);\n        }\n      });\n    }\n  }, {\n    key: \"fillInputsWithSameByDateTypeInputs\",\n    value: function fillInputsWithSameByDateTypeInputs() {\n      var _this2 = this;\n\n      (0,Tools/* classicForLoop */.Sw)(this.dateTypeInputs, function (currentDateTypeInput, nextDateTypeInput) {\n        _this2.currentDateTypeInput = currentDateTypeInput;\n        _this2.nextDateTypeInput = nextDateTypeInput;\n\n        if (!(0,Tools/* isUndefined */.o8)(nextDateTypeInput)) {\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreSame();\n\n          _this2.handleDateInCurrentAndNextDateTypeInputsAreDifferents();\n        } else {\n          _this2.pushCurrentDateTypeInput();\n        }\n      });\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreSame\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreSame() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput === dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInSameArray(dateInCurrentInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInSameArray\",\n    value: function pushCurrentAndNextDateTypeInputInSameArray(date) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[date])) {\n        this.inputsWithSameDate[date] = [];\n        this.inputsWithSameDate[date].push(this.currentDateTypeInput);\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      } else {\n        this.inputsWithSameDate[date].push(this.nextDateTypeInput);\n      }\n    }\n  }, {\n    key: \"handleDateInCurrentAndNextDateTypeInputsAreDifferents\",\n    value: function handleDateInCurrentAndNextDateTypeInputsAreDifferents() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n      var dateInNextInput = this.nextDateTypeInput.value;\n\n      if (dateInCurrentInput !== dateInNextInput) {\n        this.pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput);\n      }\n    }\n  }, {\n    key: \"pushCurrentAndNextDateTypeInputInDifferentArrays\",\n    value: function pushCurrentAndNextDateTypeInputInDifferentArrays(dateInCurrentInput, dateInNextInput) {\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInNextInput])) {\n          this.inputsWithSameDate[dateInNextInput] = [];\n          this.inputsWithSameDate[dateInNextInput].push(this.nextDateTypeInput);\n        }\n      }\n    }\n  }, {\n    key: \"pushCurrentDateTypeInput\",\n    value: function pushCurrentDateTypeInput() {\n      var dateInCurrentInput = this.currentDateTypeInput.value;\n\n      if ((0,Tools/* isUndefined */.o8)(this.inputsWithSameDate[dateInCurrentInput])) {\n        this.inputsWithSameDate[dateInCurrentInput] = [];\n        this.inputsWithSameDate[dateInCurrentInput].push(this.currentDateTypeInput);\n      }\n    }\n  }, {\n    key: \"fetchLinesToRepeat\",\n    value: function fetchLinesToRepeat() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.inputsWithSameDate, function (date, inputs) {\n        (0,Tools/* foreachArrayElements */.$f)(inputs, function (input) {\n          _this3.pushIntoLinesToRepeatLinesWichAreNotExercise(input, date);\n        });\n      });\n    }\n  }, {\n    key: \"pushIntoLinesToRepeatLinesWichAreNotExercise\",\n    value: function pushIntoLinesToRepeatLinesWichAreNotExercise(input, date) {\n      var inputLine = input.parentElement.parentElement;\n      var inputTypeChapter = inputLine.querySelector('#chapter-input');\n      var inputValue = inputTypeChapter.value;\n\n      if (inputValue.includes(\"exercice\")) {\n        this.numberOfLinesOfExercise++;\n        this.numberOfLinesOfExercisePerDate[date] = this.numberOfLinesOfExercise;\n      } else {\n        if ((0,Tools/* isUndefined */.o8)(this.linesToRepeat[date])) {\n          this.linesToRepeat[date] = [];\n        }\n\n        this.linesToRepeat[date].push(inputTypeChapter.parentElement.parentElement);\n      }\n    }\n  }, {\n    key: \"fetchLinesWithSemblablesTimes\",\n    value: function fetchLinesWithSemblablesTimes() {\n      var _this4 = this;\n\n      var tableLines = (0,Tools/* createArray */.Ri)(this.modal.querySelector('tbody').querySelectorAll('tr'));\n      tableLines.forEach(function (line) {\n        var date = line.querySelector('#date-input').value;\n        var hour = line.querySelector('#hour-input').value;\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDate[date])) {\n          _this4.linesOfInputsWithSameDate[date] = [];\n        }\n\n        if ((0,Tools/* isUndefined */.o8)(_this4.linesOfInputsWithSameDatetime[date + hour])) {\n          _this4.linesOfInputsWithSameDatetime[date + hour] = [];\n        }\n\n        _this4.linesOfInputsWithSameDatetime[date + hour].push(line);\n\n        _this4.linesOfInputsWithSameDate[date].push(line);\n      });\n    }\n  }, {\n    key: \"spaceEveryRevisionsWithSameHour\",\n    value: function spaceEveryRevisionsWithSameHour() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDatetime;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceEveryRevisionsSpacedUnder2H\",\n    value: function spaceEveryRevisionsSpacedUnder2H() {\n      this.currentObjToLoopForSpacing = this.linesOfInputsWithSameDate;\n      this.spaceIsUnder2H = true;\n      this.spaceRevisions();\n    }\n  }, {\n    key: \"spaceRevisions\",\n    value: function spaceRevisions() {\n      for (var date in this.currentObjToLoopForSpacing) {\n        var linesOfInputsPerDateLength = this.currentObjToLoopForSpacing[date].length;\n        this.addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength);\n      }\n    }\n  }, {\n    key: \"addHourIfThereIsMultipleLinesWithSemblablesTime\",\n    value: function addHourIfThereIsMultipleLinesWithSemblablesTime(date, linesOfInputsPerDateLength) {\n      this.lastHour = 0;\n      this.lastHourInput;\n\n      if (linesOfInputsPerDateLength > 1) {\n        for (var i = 0; i < linesOfInputsPerDateLength; i++) {\n          this.hourInputInCurrentLine = this.currentObjToLoopForSpacing[date][i].querySelector('#hour-input');\n          this.splittedHour = this.hourInputInCurrentLine.value.split(':');\n          this.hourInLine = parseInt(this.splittedHour[0]);\n          this.handleSameHour(linesOfInputsPerDateLength, i);\n          this.handleSpaceUnder2H();\n        }\n      }\n    }\n  }, {\n    key: \"handleSameHour\",\n    value: function handleSameHour(linesOfInputsPerDateLength, indexOfLine) {\n      if (!this.spaceIsUnder2H && indexOfLine >= Math.floor(linesOfInputsPerDateLength / 2)) {\n        this.AddNewHourValue({\n          hourValue: this.hourInLine,\n          valueToAdd: 2\n        }, this.hourInputInCurrentLine);\n      }\n    }\n  }, {\n    key: \"AddNewHourValue\",\n    value: function AddNewHourValue(hourProperties, hourInput) {\n      var newHour = hourProperties.hourValue + hourProperties.valueToAdd;\n      hourInput.value = newHour + ':' + this.splittedHour[1];\n    }\n  }, {\n    key: \"handleSpaceUnder2H\",\n    value: function handleSpaceUnder2H() {\n      if (this.spaceIsUnder2H) {\n        if (this.lastHour > 0) {\n          if (this.hourInLine > this.lastHour) {\n            if (this.hourInLine - this.lastHour < 2 && this.hourInLine - this.lastHour > 0) {\n              this.AddNewHourValue({\n                hourValue: this.hourInLine,\n                valueToAdd: 1\n              }, this.hourInputInCurrentLine);\n            }\n          } else if (this.lastHour > this.hourInLine) {\n            if (this.lastHour - this.hourInLine < 2 && this.lastHour - this.hourInLine > 0) {\n              this.AddNewHourValue({\n                hourValue: this.lastHour,\n                valueToAdd: 1\n              }, this.lastHourInput);\n            }\n          }\n        }\n\n        this.lastHour = this.hourInLine;\n        this.lastHourInput = this.hourInputInCurrentLine;\n      }\n    }\n  }, {\n    key: \"pushRemoveButtonIfInRowActionButtonsToArray\",\n    value: function pushRemoveButtonIfInRowActionButtonsToArray(rowActionButtons, array) {\n      if (document.querySelector('.remove_line_button') in rowActionButtons) {\n        console.log('ok it\\'s in');\n      }\n    }\n  }]);\n\n  return calendarGenerationTools;\n}();\n\n\n;// CONCATENATED MODULE: ./src/AbstractClasses/CalendarCreationDOMInteractions.js\nfunction CalendarCreationDOMInteractions_typeof(obj) { \"@babel/helpers - typeof\"; return CalendarCreationDOMInteractions_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, CalendarCreationDOMInteractions_typeof(obj); }\n\nfunction CalendarCreationDOMInteractions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction CalendarCreationDOMInteractions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction CalendarCreationDOMInteractions_createClass(Constructor, protoProps, staticProps) { if (protoProps) CalendarCreationDOMInteractions_defineProperties(Constructor.prototype, protoProps); if (staticProps) CalendarCreationDOMInteractions_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = CalendarCreationDOMInteractions_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction CalendarCreationDOMInteractions_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) CalendarCreationDOMInteractions_setPrototypeOf(subClass, superClass); }\n\nfunction CalendarCreationDOMInteractions_setPrototypeOf(o, p) { CalendarCreationDOMInteractions_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return CalendarCreationDOMInteractions_setPrototypeOf(o, p); }\n\nfunction CalendarCreationDOMInteractions_createSuper(Derived) { var hasNativeReflectConstruct = CalendarCreationDOMInteractions_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = CalendarCreationDOMInteractions_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = CalendarCreationDOMInteractions_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return CalendarCreationDOMInteractions_possibleConstructorReturn(this, result); }; }\n\nfunction CalendarCreationDOMInteractions_possibleConstructorReturn(self, call) { if (call && (CalendarCreationDOMInteractions_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return CalendarCreationDOMInteractions_assertThisInitialized(self); }\n\nfunction CalendarCreationDOMInteractions_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction CalendarCreationDOMInteractions_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction CalendarCreationDOMInteractions_getPrototypeOf(o) { CalendarCreationDOMInteractions_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return CalendarCreationDOMInteractions_getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\nvar CalendarCreationDOMInteractions = /*#__PURE__*/function (_DOMInteractions) {\n  CalendarCreationDOMInteractions_inherits(CalendarCreationDOMInteractions, _DOMInteractions);\n\n  var _super = CalendarCreationDOMInteractions_createSuper(CalendarCreationDOMInteractions);\n\n  function CalendarCreationDOMInteractions() {\n    var _this;\n\n    CalendarCreationDOMInteractions_classCallCheck(this, CalendarCreationDOMInteractions);\n\n    _this = _super.call(this);\n\n    _defineProperty(CalendarCreationDOMInteractions_assertThisInitialized(_this), \"formAction\", '/create-calendar');\n\n    _defineProperty(CalendarCreationDOMInteractions_assertThisInitialized(_this), \"notificationClassName\", 'calendar_creation_notification');\n\n    _this.actionsButtonsPerRow = {};\n    _this.atLeastOneRowIsExercise = 4;\n    _this.atLeastTwoRowsAreExercises = 5;\n    _this.repetitionLinesHaveBeenCreated = false;\n    _this.tableLinesLengthOfCalendarCreationLines = 1;\n    _this.normalDailyNumberOfSubjects = 3;\n    _this.numberOfRepetitions = 5;\n    _this.createdLines = 0;\n    _this.currentRowToRepeat;\n    _this.isQuotaError = false;\n    _this.isWarning = false;\n    _this.messageForQuotaErrorOne = \"Erreur du quota 3 matières/j. Il faut au moins que l'une d'entre elles soient un exercice.\";\n    _this.messageForQuotaErrorTwo = \"Erreur du quota 3 matières/j. Il faut au moins que deux d'entre elles soient un exercice.\";\n    _this.currentQuotaErrorMessageToShow;\n    _this.repetition = new Repetition();\n    _this.date = new RepetitionDate();\n    return _this;\n  }\n\n  CalendarCreationDOMInteractions_createClass(CalendarCreationDOMInteractions, [{\n    key: \"handleActionsInModalForm\",\n    value: function handleActionsInModalForm() {\n      _get(CalendarCreationDOMInteractions_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"handleActionsInModalForm\", this).call(this);\n\n      this.toolsForCalendarGeneration = new calendarGenerationTools();\n      this.handleAddLineButtonClick();\n      this.handleCalendarGeneration();\n    }\n  }, {\n    key: \"handleAddLineButtonClick\",\n    value: function handleAddLineButtonClick() {\n      this.tableLinesLengthOfCalendarCreationLines++;\n      var addLineButton = this.modal.querySelector('.add-line');\n      addLineButton.addEventListener('click', this.appendNewLineToCalendarCreationTable.bind(this));\n    }\n  }, {\n    key: \"appendNewLineToCalendarCreationTable\",\n    value: function appendNewLineToCalendarCreationTable(e) {\n      this.createLine();\n      this.handleRemoveLineButtonClick();\n      this.removeRowActionMenuIfExists(e);\n      this.handleCalendarGeneration();\n      this.handleAddLineButtonClick();\n    }\n  }, {\n    key: \"createLine\",\n    value: function createLine() {\n      this.currentCreatedLine = this.createElement('tr', 'subject-line');\n      var removeLineButton = this.modal.querySelector('.remove-line');\n      var addLineButton = this.modal.querySelector('.add-line');\n      var subjectLine;\n      var generateCalendarButton;\n\n      if (addLineButton) {\n        this.addLineButtonContainer = addLineButton.parentElement;\n        subjectLine = this.addLineButtonContainer.parentElement;\n        generateCalendarButton = subjectLine.querySelector('.generate-calendar');\n        this.generateCalendarButtonContainer = generateCalendarButton.parentElement;\n      }\n\n      this.calendarCreationTbody = this.modal.querySelector('.calendar-creation-tbody');\n\n      if (removeLineButton !== null) {\n        removeLineButton.parentElement.parentElement.removeChild(removeLineButton.parentElement);\n      }\n\n      this.calendarCreationTbody.appendChild(this.currentCreatedLine);\n      var currentCreatedLineInnerHTML = \"\\n        <td><input type='text' name='subject-\".concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='subject-input'></td>\\n        <td><input type='text' name='chapter-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='chapter-input'></td>\\n        <td><input type='date' name='date-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='date-input'></td>\\n        <td><input type='time' name='hour-\").concat(this.tableLinesLengthOfCalendarCreationLines, \"' id='hour-input'></td>\\n        \");\n\n      if (!this.repetitionLinesHaveBeenCreated) {\n        currentCreatedLineInnerHTML += \"\\n            <td class='row_action_button add_line_button'><i class='fas fa-plus add-line'></i></td>\\n            <td class='row_action_button generate_calendar_button'><i class='fas fa-check generate-calendar'></i></td>\\n            <td class='row_action_button remove_line_button'><i class='fas fa-window-close remove-line'></i></td>\\n            \";\n      }\n\n      this.currentCreatedLine.innerHTML = currentCreatedLineInnerHTML;\n\n      if (window.innerWidth <= 800) {\n        this.appendRowActionButtonsIntoAMenu();\n      } else {\n        if (!(0,Tools/* isUndefined */.o8)(subjectLine)) {\n          subjectLine.removeChild(this.addLineButtonContainer);\n          subjectLine.removeChild(this.generateCalendarButtonContainer);\n        }\n      }\n\n      this.growFormHeight();\n      this.growModalHeight();\n      this.growBodyHeightIfModalCollapse();\n    }\n  }, {\n    key: \"handleRemoveLineButtonClick\",\n    value: function handleRemoveLineButtonClick() {\n      this.removeLineButton = this.modal.querySelector('.remove-line');\n\n      if (this.removeLineButton !== null) {\n        this.handleClickOnRemoveLineButton();\n      }\n    }\n  }, {\n    key: \"handleClickOnRemoveLineButton\",\n    value: function handleClickOnRemoveLineButton() {\n      var _this2 = this;\n\n      this.removeLineButton.addEventListener('click', function (e) {\n        _this2.tableLinesLengthOfCalendarCreationLines--;\n        _this2.removeLineButtonContainer = _this2.removeLineButton.parentNode;\n        var removeLineButtonContainerParent = _this2.removeLineButtonContainer.parentNode;\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(removeLineButtonContainerParent, 'action_menu')) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.previousElementSibling);\n          (0,DOMTools/* removeElementFromDOM */.e5)(removeLineButtonContainerParent.parentElement);\n\n          _this2.removeRowActionMenu(removeLineButtonContainerParent);\n\n          _this2.appendToLastRowActionButtons();\n\n          _this2.appendRowActionButtonsIntoAMenu();\n        } else {\n          removeLineButtonContainerParent.classList.add('invisible-subject-line');\n          removeLineButtonContainerParent.addEventListener('animationend', function () {\n            _this2.calendarCreationTbody.removeChild(removeLineButtonContainerParent);\n\n            _this2.appendToLastRowActionButtons();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"appendToLastRowActionButtons\",\n    value: function appendToLastRowActionButtons() {\n      this.calendarCreationTbody.lastElementChild.appendChild(this.addLineButtonContainer);\n      this.calendarCreationTbody.lastElementChild.appendChild(this.generateCalendarButtonContainer);\n\n      if (this.calendarCreationTbody.firstElementChild !== this.calendarCreationTbody.lastElementChild) {\n        this.calendarCreationTbody.lastElementChild.appendChild(this.removeLineButtonContainer);\n      }\n\n      this.reduceFormHeightUntilNormal();\n      this.reduceModalHeightUntilNormal();\n      this.reduceBodyHeigthUntilNormal();\n    }\n  }, {\n    key: \"growFormHeight\",\n    value: function growFormHeight() {\n      this.growElementSize(this.modalForm, {\n        attribute: 'height',\n        value: this.modalForm.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n  }, {\n    key: \"growModalHeight\",\n    value: function growModalHeight() {\n      this.growElementSize(this.modal, {\n        attribute: 'height',\n        value: this.modal.offsetHeight + this.currentCreatedLine.offsetHeight\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {{attribute: string, value: number}} options \r\n     */\n\n  }, {\n    key: \"growElementSize\",\n    value: function growElementSize(element, options) {\n      if (options.attribute === 'width') {\n        element.style.width = options.value + 'px';\n      } else {\n        element.style.height = options.value + 'px';\n      }\n    }\n  }, {\n    key: \"growBodyHeightIfModalCollapse\",\n    value: function growBodyHeightIfModalCollapse() {\n      if (this.modal.offsetHeight >= 470) {\n        this.growElementSize(document.body, {\n          attribute: 'height',\n          value: document.body.offsetHeight + this.currentCreatedLine.offsetHeight\n        });\n      }\n    }\n  }, {\n    key: \"reduceFormHeightUntilNormal\",\n    value: function reduceFormHeightUntilNormal() {\n      var modalFormHeight = this.modalForm.offsetHeight;\n\n      if (modalFormHeight > this.originalModalFormHeigth) {\n        this.modalForm.style.height = modalFormHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceModalHeightUntilNormal\",\n    value: function reduceModalHeightUntilNormal() {\n      if (this.modal.offsetHeight > this.originalModalHeigth) {\n        this.modal.style.height = this.modal.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"reduceBodyHeigthUntilNormal\",\n    value: function reduceBodyHeigthUntilNormal() {\n      if (document.body.offsetHeight > this.originalBodyHeight) {\n        document.body.style.height = document.body.offsetHeight - this.modal.querySelector('tr').offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"handleCalendarGeneration\",\n    value: function handleCalendarGeneration() {\n      var generateCalendarButton = this.modal.querySelector('.generate-calendar');\n      generateCalendarButton === null || generateCalendarButton === void 0 ? void 0 : generateCalendarButton.addEventListener('click', this.generateCalendar.bind(this));\n    }\n  }, {\n    key: \"generateCalendar\",\n    value: function generateCalendar(e) {\n      this.toolsForCalendarGeneration.fillInputsWithSameDate();\n      this.toolsForCalendarGeneration.fetchLinesToRepeat();\n      this.generateLinesOfRepetitions();\n      this.removeRowActionMenuIfExists(e);\n      this.toolsForCalendarGeneration.fetchLinesWithSemblablesTimes();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsWithSameHour();\n      this.toolsForCalendarGeneration.spaceEveryRevisionsSpacedUnder2H();\n    }\n  }, {\n    key: \"generateLinesOfRepetitions\",\n    value: function generateLinesOfRepetitions() {\n      var _this3 = this;\n\n      (0,Tools/* loopOverObject */.Az)(this.toolsForCalendarGeneration.inputsWithSameDate, function (date, inputs) {\n        _this3.numberOfSubjectsIsNormal(inputs, date);\n\n        _this3.numberOfSubjectsMoreThanNormal(inputs, date);\n      });\n    }\n  }, {\n    key: \"numberOfSubjectsIsNormal\",\n    value: function numberOfSubjectsIsNormal(inputs, date) {\n      var _this4 = this;\n\n      if (inputs.length < this.atLeastOneRowIsExercise && this.toolsForCalendarGeneration.linesToRepeat[date] !== undefined) {\n        this.toolsForCalendarGeneration.linesToRepeat[date].forEach(function (row) {\n          _this4.currentRowToRepeat = row;\n\n          _this4.generateRepetitionsCalendar(row);\n        });\n      }\n    }\n  }, {\n    key: \"numberOfSubjectsMoreThanNormal\",\n    value: function numberOfSubjectsMoreThanNormal(inputs, date) {\n      switch (inputs.length) {\n        case this.atLeastOneRowIsExercise:\n          this.generateRepetitionsOrShowWarningOne(date);\n          break;\n\n        case this.atLeastTwoRowsAreExercises:\n          this.generateRepetitionsOrShowWarningTwo(date);\n          break;\n      }\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningOne\",\n    value: function generateRepetitionsOrShowWarningOne(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorOne;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarningTwo\",\n    value: function generateRepetitionsOrShowWarningTwo(date) {\n      this.currentQuotaErrorMessageToShow = this.messageForQuotaErrorTwo;\n      this.generateRepetitionsOrShowWarning(date);\n    }\n  }, {\n    key: \"generateRepetitionsOrShowWarning\",\n    value: function generateRepetitionsOrShowWarning(date) {\n      var _this5 = this;\n\n      if (this.toolsForCalendarGeneration.numberOfLinesOfExercisePerDate[date] >= 1) {\n        if (!this.isQuotaError) {\n          (0,Tools/* foreachArrayElements */.$f)(this.toolsForCalendarGeneration.linesToRepeat[date], function (line) {\n            _this5.currentRowToRepeat = line;\n\n            _this5.generateRepetitionsCalendar(line);\n          });\n        }\n      } else {\n        this.showWarning(date);\n      }\n    }\n  }, {\n    key: \"showWarning\",\n    value: function showWarning(date) {\n      this.isQuotaError = true;\n      this.focusChapterInputOn(this.toolsForCalendarGeneration.linesToRepeat[date]);\n      this.createWarning(this.currentQuotaErrorMessageToShow);\n    }\n    /**\r\n     * \r\n     * @param {*} linesToRepeatOfADate \r\n     */\n\n  }, {\n    key: \"focusChapterInputOn\",\n    value: function focusChapterInputOn(linesToRepeatOfADate) {\n      var _this6 = this;\n\n      (0,Tools/* foreachArrayElements */.$f)(linesToRepeatOfADate, function (line) {\n        _this6.alertFocusOnElement(line.querySelector('#chapter-input'));\n      });\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"generateRepetitionsCalendar\",\n    value: function generateRepetitionsCalendar(row) {\n      var rowInputs = row.querySelectorAll('input');\n      var emptyInputExists = false;\n      rowInputs.forEach(function (input) {\n        if (input.value === '') {\n          emptyInputExists = true;\n        }\n      });\n\n      if (!emptyInputExists) {\n        this.repetitionLinesHaveBeenCreated = true;\n        this.generateLines(row);\n      } else {\n        if (document.querySelector('.warning') === null) {\n          this.isWarning = true;\n          this.createWarning(\"Impossible de générer les répétitions si les champs sont vides.\");\n        }\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"generateLines\",\n    value: function generateLines(row) {\n      for (var i = 1; i <= this.numberOfRepetitions; i++) {\n        this.createLine();\n        this.createdLines = i;\n        this.generateInputsValue();\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLElement} element IL FAUT REGLER CECI CAR CET ELEMENT RESTE L'ELEMENT INITIAL\r\n     */\n\n  }, {\n    key: \"generateInputsValue\",\n    value: function generateInputsValue() {\n      var _this$currentRowToRep, _this$currentRowToRep2, _this$currentRowToRep3, _this$currentRowToRep4;\n\n      var tbody = document.querySelector('tbody');\n      var tbodyLastChild = tbody.lastElementChild;\n      var subjectInput = tbodyLastChild.querySelector('#subject-input');\n      var chapterInput = tbodyLastChild.querySelector('#chapter-input');\n      var dateInput = tbodyLastChild.querySelector('#date-input');\n      var hourInput = tbodyLastChild.querySelector('#hour-input');\n      subjectInput.value = (_this$currentRowToRep = this.currentRowToRepeat) === null || _this$currentRowToRep === void 0 ? void 0 : _this$currentRowToRep.querySelector('#subject-input').value;\n      chapterInput.value = (_this$currentRowToRep2 = this.currentRowToRepeat) === null || _this$currentRowToRep2 === void 0 ? void 0 : _this$currentRowToRep2.querySelector('#chapter-input').value;\n      /**\r\n       * @type {[string, string]}\r\n       */\n\n      var splittedHour = (_this$currentRowToRep3 = this.currentRowToRepeat) === null || _this$currentRowToRep3 === void 0 ? void 0 : _this$currentRowToRep3.querySelector('#hour-input').value.split(':');\n      var splittedDate = (_this$currentRowToRep4 = this.currentRowToRepeat) === null || _this$currentRowToRep4 === void 0 ? void 0 : _this$currentRowToRep4.querySelector('#date-input').value.split('-');\n      var year = splittedDate[0];\n      var month = splittedDate[1];\n      var day = splittedDate[2];\n      var hoursForNextRepetitions = this.repetition.hoursForNextRepetitions[this.createdLines];\n      var hourBetweenCurrentAndNextRepetition = hoursForNextRepetitions[0];\n      var hourForNexRepetition = parseInt(splittedHour[0], 10) + hourBetweenCurrentAndNextRepetition;\n\n      if (this.createdLines === 1) {\n        if (hourForNexRepetition < 20) {\n          var _this$currentRowToRep5;\n\n          dateInput.value = (_this$currentRowToRep5 = this.currentRowToRepeat) === null || _this$currentRowToRep5 === void 0 ? void 0 : _this$currentRowToRep5.querySelector('#date-input').value;\n          hourInput.value = hourForNexRepetition.toString(10).length === 1 ? \"0\" + hourForNexRepetition + ':' + splittedHour[1] : hourForNexRepetition + ':' + splittedHour[1];\n        } else {\n          var intNewDayValue = parseInt(day) + 1;\n          var newDayValue = intNewDayValue.toString().length === 1 ? '0' + intNewDayValue.toString() : intNewDayValue;\n          hourForNexRepetition = 8;\n          dateInput.value = year + '-' + month + '-' + newDayValue;\n\n          if (dateInput.value === '') {\n            var intMonth = parseInt(month);\n\n            if (intMonth < 12) {\n              dateInput.value = year + '-0' + (intMonth + 1) + '-' + '01';\n            } else {\n              dateInput.value = parseInt(year) + 1 + '-' + '01' + '-' + '01';\n            }\n          }\n\n          hourInput.value = '0' + hourForNexRepetition + ':' + splittedHour[1];\n        }\n      } else {\n        var intDay = parseInt(day);\n\n        var _intNewDayValue = intDay + hoursForNextRepetitions[1];\n\n        var _newDayValue = _intNewDayValue.toString().length === 1 ? '0' + _intNewDayValue.toString() : _intNewDayValue;\n\n        dateInput.value = year + '-' + month + '-' + _newDayValue;\n\n        if (dateInput.value === '') {\n          var _intMonth = parseInt(month);\n\n          var intDayInNextMonth = _intNewDayValue - this.date.numberOfDaysPerMonth[_intMonth];\n          var dayInNextMonth = intDayInNextMonth.toString().length === 1 ? \"0\" + intDayInNextMonth : intDayInNextMonth;\n\n          if (_intMonth < 12) {\n            dateInput.value = year + '-0' + (_intMonth + 1) + '-' + dayInNextMonth;\n          } else {\n            dateInput.value = parseInt(year) + 1 + '-' + '01' + '-' + '01';\n          }\n        }\n\n        hourInput.value = splittedHour[0] + ':' + splittedHour[1]; // // 1. ON VERIFIE SI LA NOUVELLE HEURE EST AVANT LE COMMENCEMENT DES HEURES DE TRAVAIL\n        // if(this.repetition.isBeforeWorkTime()){\n        //     // ON REDEFINIT LA NOUVELLE HEURE AU COMMENCEMENT DE LA JOURNEE\n        // }\n        // // 2. SINON VERIFIE SI LA NOUVELLE HEURE EST DANS LES HEURES DE TRAVAIL MATINALES OU D'APRES MIDI\n        // else if(this.repetition.isInWorkTime(hourForNexRepetition)){\n        //     // ON INSERT LA NOUVELLE HEURE DANS L'INPUT\n        // }else {\n        // }\n        // hourInput.value = splittedHour[0] + ':' + splittedHour[1]\n        // // 1. ON VERIFIE SI LA NOUVELLE HEURE EST AVANT LE COMMENCEMENT DES HEURES DE TRAVAIL\n        // if(this.repetition.isBeforeWorkTime()){\n        //     // ON REDEFINIT LA NOUVELLE HEURE AU COMMENCEMENT DE LA JOURNEE\n        // }\n        // // 2. SINON VERIFIE SI LA NOUVELLE HEURE EST DANS LES HEURES DE TRAVAIL MATINALES OU D'APRES MIDI\n        // else if(this.repetition.isInWorkTime(hourForNexRepetition)){\n        //     // ON INSERT LA NOUVELLE HEURE DANS L'INPUT\n        // }else {\n        // }\n        // 3. SINON ON VERIFIE QUE LA NOUVELLE HEURE EST DANS LES HEURES DE PAUSE\n        // SI OUI : ON DEFINIT LA NOUVELLE HEURE A LA PROCHAINE HEURE OU ON REPREND LE TRAVAIL\n      }\n\n      this.currentRowToRepeat = tbodyLastChild;\n    }\n  }, {\n    key: \"createWarning\",\n    value: function createWarning(message) {\n      var warningParagraph = this.createElement('p', 'warning');\n      var i = this.createElement('i', 'fas fa-exclamation-triangle');\n      var span = this.createElement('span', 'warning-message');\n      warningParagraph.appendChild(i);\n      warningParagraph.appendChild(span);\n      span.innerHTML = message;\n      this.modal.querySelector('button').before(warningParagraph);\n      warningParagraph.offsetWidth;\n      warningParagraph.classList.add('active_warning');\n      var marginBottom = 30;\n      this.modal.style.height = this.modal.offsetHeight + warningParagraph.offsetHeight + marginBottom + 'px';\n      this.removeElementAfterMilliseconds(warningParagraph, 5000, {\n        classNameToRemove: 'active_warning',\n        elementWithHeightToDecrease: [this.modal, warningParagraph.offsetHeight + marginBottom]\n      });\n    }\n  }, {\n    key: \"postContentWithNotificationThenReload\",\n    value: function postContentWithNotificationThenReload() {\n      var _this7 = this;\n\n      (0,ajax/* post */.v)(this.formAction, this.dataToPostObj).then(function (response) {\n        _this7.handleRequestResponse(response);\n      }).catch(function (error) {\n        console.error(\"Il y a eu une erreur :\" + error);\n      });\n    }\n  }, {\n    key: \"handleRequestResponse\",\n    value: function handleRequestResponse(response) {\n      var responseJson = JSON.parse(response);\n      var message = responseJson.success !== undefined ? responseJson.success : responseJson.fail;\n      this.showNotificationWithDataInMilliseconds({\n        className: this.notificationClassName,\n        content: message\n      }, 2000);\n      this.reloadPage();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      _get(CalendarCreationDOMInteractions_getPrototypeOf(CalendarCreationDOMInteractions.prototype), \"closeModal\", this).call(this);\n\n      document.body.style.height = this.originalBodyHeight + 'px';\n    }\n  }, {\n    key: \"removeRowActionMenuIfExists\",\n    value: function removeRowActionMenuIfExists(e) {\n      var clickedButtonGrandParent = e.currentTarget.parentElement.parentElement;\n\n      if (clickedButtonGrandParent && (0,DOMTools/* elementHasClassName */.cF)(clickedButtonGrandParent, 'action_menu') && !this.isWarning) {\n        this.removeRowActionMenu(clickedButtonGrandParent);\n      }\n    }\n  }, {\n    key: \"removeRowActionMenu\",\n    value: function removeRowActionMenu(rowActionMenu) {\n      this.hideRowActionMenu(rowActionMenu);\n      var rowActionMenuButton = rowActionMenu.parentNode.querySelector('.action_menu_button');\n\n      if (rowActionMenuButton) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenuButton);\n      }\n\n      (0,DOMTools/* removeElementFromDOM */.e5)(rowActionMenu);\n    }\n  }, {\n    key: \"handleModalResponsive\",\n    value: function handleModalResponsive() {\n      new modalResize(this);\n    }\n  }, {\n    key: \"appendRowActionButtonsIntoAMenu\",\n    value: function appendRowActionButtonsIntoAMenu() {\n      if ((this.modal.querySelector('.action_menu_button') === null || this.lastSubjectRow !== null) && !this.repetitionLinesHaveBeenCreated) {\n        this.subjectRows = (0,Tools/* createArray */.Ri)(this.modal.querySelectorAll('.subject-line'));\n        this.lastSubjectRowIndex = this.subjectRows.length - 1;\n        this.lastSubjectRow = this.subjectRows[this.lastSubjectRowIndex];\n        var rowActionButtons = (0,Tools/* createArray */.Ri)(this.lastSubjectRow.querySelectorAll('.row_action_button'));\n        this.actionsButtonsPerRow[this.lastSubjectRowIndex] = rowActionButtons;\n        this.createMenuForLastRow();\n      } else if (this.repetitionLinesHaveBeenCreated) {\n        this.lastSubjectRow = null;\n        this.rowActionMenuButton = null;\n        this.actionMenu = null;\n      }\n    }\n  }, {\n    key: \"createMenuForLastRow\",\n    value: function createMenuForLastRow() {\n      this.createActionMenuButton(this.lastSubjectRow);\n      this.createMenuInRowThenAppendChildren(this.lastSubjectRow, this.actionsButtonsPerRow[this.lastSubjectRowIndex]);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createActionMenuButton\",\n    value: function createActionMenuButton(row) {\n      this.rowActionMenuButton = row.querySelector('.action_menu_button');\n\n      if ((0,Tools/* isUndefined */.o8)(this.rowActionMenuButton) || this.rowActionMenuButton === null) {\n        this.rowActionMenuButton = this.createElement('td', 'action_menu_button');\n        this.rowActionMenuButton.innerHTML = \"<p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\\n            <p class='hot_dog_menu_circle'></p>\";\n        row.appendChild(this.rowActionMenuButton);\n        this.rowActionMenuButton.addEventListener('click', this.toggleActionMenuOfTheRow.bind(this, row));\n      }\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"createMenuInRowThenAppendChildren\",\n    value: function createMenuInRowThenAppendChildren(row, futurChildren) {\n      var _this8 = this;\n\n      this.actionMenu = this.createElement('div', 'action_menu');\n      futurChildren.forEach(function (futurChild) {\n        _this8.actionMenu.appendChild(futurChild);\n      });\n      this.actionMenu.setAttribute('hidden', 'true');\n      row.appendChild(this.actionMenu);\n    }\n    /**\r\n     * \r\n     * @param {HTMLTableRowElement} row \r\n     */\n\n  }, {\n    key: \"toggleActionMenuOfTheRow\",\n    value: function toggleActionMenuOfTheRow(row) {\n      var rowActionMenu = row.lastElementChild;\n\n      if (rowActionMenu.hasAttribute('hidden')) {\n        this.showRowActionMenu(rowActionMenu);\n      } else {\n        this.hideRowActionMenu(rowActionMenu);\n      }\n    }\n  }, {\n    key: \"showRowActionMenu\",\n    value: function showRowActionMenu(rowActionMenu) {\n      rowActionMenu.removeAttribute('hidden');\n      rowActionMenu.offsetWidth;\n      rowActionMenu.classList.add('visible_action_menu');\n\n      if (rowActionMenu.children.length === 3) {\n        rowActionMenu.classList.add('three_children');\n      }\n    }\n  }, {\n    key: \"hideRowActionMenu\",\n    value: function hideRowActionMenu(rowActionMenu) {\n      rowActionMenu.classList.remove('visible_action_menu');\n\n      var handleTransitionEnd = function handleTransitionEnd() {\n        rowActionMenu.setAttribute('hidden', 'true');\n\n        if ((0,DOMTools/* elementHasClassName */.cF)(rowActionMenu, 'three_children')) {\n          rowActionMenu.classList.remove('three_children');\n        }\n\n        rowActionMenu.removeEventListener('transitionend', handleTransitionEnd);\n      };\n\n      rowActionMenu.addEventListener('transitionend', handleTransitionEnd);\n    }\n  }, {\n    key: \"getRowActionButtonsOutOfMenu\",\n    value: function getRowActionButtonsOutOfMenu() {\n      if (this.actionMenuExists()) {\n        this.appendActionButtonsInParentRow();\n\n        if (this.actionMenu !== null && !(0,Tools/* isUndefined */.o8)(this.actionMenu)) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.actionMenu);\n          (0,DOMTools/* removeElementFromDOM */.e5)(this.rowActionMenuButton);\n        }\n      }\n    }\n  }, {\n    key: \"actionMenuExists\",\n    value: function actionMenuExists() {\n      return this.lastSubjectRow !== null && this.rowActionMenuButton !== null && this.actionMenu !== null;\n    }\n  }, {\n    key: \"appendActionButtonsInParentRow\",\n    value: function appendActionButtonsInParentRow() {\n      var _this9 = this;\n\n      this.actionsButtonsPerRow[this.lastSubjectRowIndex].forEach(function (actionButton) {\n        _this9.subjectRows[_this9.lastSubjectRowIndex].appendChild(actionButton);\n      });\n    }\n  }, {\n    key: \"alertEmptyInputs\",\n    value: function alertEmptyInputs() {\n      var _this10 = this;\n\n      this.modalInputs.forEach(function (input) {\n        if (_this10.isMessageCorrespondsTo(input.name)) {\n          _this10.alertFocusOnElement(input);\n\n          _this10.removeAlertFocusWhenclick(input);\n        }\n      });\n    }\n  }]);\n\n  return CalendarCreationDOMInteractions;\n}(DOMInteractions/* default */.Z);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakRBOzs7OztBQUVBO0FBQ0E7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBRkE7QUFnQkE7OztBQW5CQTs7Ozs7Ozs7OztBQ0NBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVhBO0FBQUE7QUFBQTtBQWVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7O0FBQUE7QUFBQTs7Ozs7Ozs7OztBQ0RBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFJQTtBQUNBOztBQUFBOztBQUNBOztBQURBOztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBa0JBOzs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBTUE7QUFDQTtBQUtBOztBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFJQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBbG9CQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9SZXBldGl0aW9uc0dlbmVyYXRpb24vUmVwZXRpdGlvbi5qcz9lNzIwIiwid2VicGFjazovL3dlYnBhY2stZGVtby8uL3NyYy9SZXBldGl0aW9uc0dlbmVyYXRpb24vUmVwZXRpdGlvbkRhdGUuanM/ZmVkZSIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvcmVzcG9uc2l2ZXMvbW9kYWxSZXNpemUuanM/YjQ0YiIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvQWJzdHJhY3RDbGFzc2VzL1Rvb2xzL2NhbGVuZGFyR2VuZXJhdGlvblRvb2xzLmpzP2U5OGIiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0Fic3RyYWN0Q2xhc3Nlcy9DYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zLmpzP2JkNDEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwZXRpdGlvbiB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wZXJ0eSBob3Vyc0Zvck5leHRSZXBldGl0aW9ucyBpbmRleMOpIHBhciBsZXMgcmFuZ3MgZGUgcsOpcMOpdGl0aW9uc1xyXG4gICAgICAgICAqIEB0eXBlIHt7bnVtYmVyOiBbbnVtYmVyLCBudW1iZXJdLFxyXG4gICAgICAgICAqIG51bWJlcjogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyOiBbbnVtYmVyLCBudW1iZXJdLFxyXG4gICAgICAgICAqIG51bWJlcjogW251bWJlciwgbnVtYmVyXSwgbnVtYmVyOiBbbnVtYmVyLCBudW1iZXJdXHJcbiAgICAgICAgICogfX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmhvdXJzRm9yTmV4dFJlcGV0aXRpb25zID0ge1xyXG4gICAgICAgICAgICAxOiBbOCwgMF0sXHJcbiAgICAgICAgICAgIDI6IFsyNCwgMV0sXHJcbiAgICAgICAgICAgIDM6IFsyNCo3LCA3XSxcclxuICAgICAgICAgICAgNDogWzI3KjcqMiwgMTRdLFxyXG4gICAgICAgICAgICA1OiBbMjQqMzAsIDMwXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge3ttb3JuaW5nOiBbbnVtYmVyLCBudW1iZXJdLCBhZnRlcm5vb246IFtudW1iZXIsIG51bWJlcl19fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaG91cnNJbkFEYXkgPSB7XHJcbiAgICAgICAgICAgIG1vcm5pbmcgOiBbOCwgMTEuMzBdLFxyXG4gICAgICAgICAgICBhZnRlcm5vb246IFsxNCwgMjBdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmV3SG91clZhbHVlIFxyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNCZWZvcmVXb3JrVGltZShuZXdIb3VyVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3SG91clZhbHVlIDwgdGhpcy5ob3Vyc0luQURheS5tb3JuaW5nWzBdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdIb3VyVmFsdWUgXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBpc0luV29ya1RpbWUobmV3SG91clZhbHVlKSB7XHJcbiAgICAgICAgbGV0IG1vcm5pbmdIb3VycyA9IHRoaXMucmVwZXRpdGlvbi5ob3Vyc0luQURheS5tb3JuaW5nXHJcbiAgICAgICAgbGV0IGFmdGVybm9vbkhvdXJzID0gdGhpcy5yZXBldGl0aW9uLmhvdXJzSW5BRGF5LmFmdGVybm9vblxyXG5cclxuICAgICAgICByZXR1cm4gKG5ld0hvdXJWYWx1ZSA+IG1vcm5pbmdIb3Vyc1swXSBcclxuICAgICAgICAgICAgJiYgbmV3SG91clZhbHVlIDwgbW9ybmluZ0hvdXJzWzFdKVxyXG4gICAgICAgICAgICB8fCAobmV3SG91clZhbHVlID4gYWZ0ZXJub29uSG91cnNbMF0gXHJcbiAgICAgICAgICAgICYmIG5ld0hvdXJWYWx1ZSA8IGFmdGVybm9vbkhvdXJzWzFdKVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwZXRpdGlvbkRhdGUgZXh0ZW5kcyBEYXRlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih5ZWFyKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLm51bWJlck9mRGF5c1Blck1vbnRoID0ge1xyXG4gICAgICAgICAgICAxOiAzMSxcclxuICAgICAgICAgICAgMjogMjgsXHJcbiAgICAgICAgICAgIDM6IDMxLFxyXG4gICAgICAgICAgICA0OiAzMCxcclxuICAgICAgICAgICAgNTogMzEsXHJcbiAgICAgICAgICAgIDY6IDMwLFxyXG4gICAgICAgICAgICA3OiAzMSxcclxuICAgICAgICAgICAgODogMzEsXHJcbiAgICAgICAgICAgIDk6IDMwLFxyXG4gICAgICAgICAgICAxMDogMzEsXHJcbiAgICAgICAgICAgIDExOiAzMCxcclxuICAgICAgICAgICAgMTI6IDMxXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBjbGFzcyBtb2RhbFJlc2l6ZSB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKENhbGVuZGFyQ3JlYXRpb25ET00pIFxyXG4gICAge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIENhbGVuZGFyQ3JlYXRpb25ET01JbnRlcmFjdGlvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00gPSBDYWxlbmRhckNyZWF0aW9uRE9NXHJcbiAgICAgICAgdGhpcy5pc1Jvd0FjdGlvbkJ1dHRvbnNIaWRkZW4gPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKClcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUuYmluZCh0aGlzKSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVXaW5kb3dSZXNpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBoaWRlUm93QWN0aW9uQnV0dG9ucyA9IHdpbmRvdy5pbm5lcldpZHRoIDw9IDgwMFxyXG4gICAgICAgIGlmKGhpZGVSb3dBY3Rpb25CdXR0b25zICYmIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5tb2RhbCl7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSb3dBY3Rpb25CdXR0b25zSGlkZGVuID0gdHJ1ZVxyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00uYXBwZW5kUm93QWN0aW9uQnV0dG9uc0ludG9BTWVudSgpXHJcbiAgICAgICAgfWVsc2UgaWYoIWhpZGVSb3dBY3Rpb25CdXR0b25zICYmIHRoaXMuY2FsZW5kYXJDcmVhdGlvbkRPTS5tb2RhbCAmJiB0aGlzLmlzUm93QWN0aW9uQnV0dG9uc0hpZGRlbikge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25ET00uZ2V0Um93QWN0aW9uQnV0dG9uc091dE9mTWVudSgpXHJcbiAgICAgICAgICAgIHRoaXMuaXNSb3dBY3Rpb25CdXR0b25zSGlkZGVuID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjbGFzc2ljRm9yTG9vcCwgY3JlYXRlQXJyYXksIGZvcmVhY2hBcnJheUVsZW1lbnRzLCBpc1VuZGVmaW5lZCwgbG9vcE92ZXJPYmplY3QsIHB1c2hFbGVtZW50VG9BcnJheSB9IGZyb20gXCIuLi8uLi9GdW5jdGlvbnMvVG9vbHMvVG9vbHNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY2FsZW5kYXJHZW5lcmF0aW9uVG9vbHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Y2FsZW5kYXJHZW5lcmF0aW9ufSBjYWxlbmRhckdlbmVyYXRpb24gXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyX2NyZWF0aW9uX21vZGFsJylcclxuICAgICAgICB0aGlzLmRhdGVUeXBlSW5wdXRzID0gW11cclxuICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZSA9IHt9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgIHRoaXMubGluZXNUb1JlcGVhdCA9IHt9XHJcbiAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlID0ge31cclxuICAgICAgICB0aGlzLmxpbmVzT2ZJbnB1dHNXaXRoU2FtZURhdGV0aW1lID0ge31cclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nXHJcbiAgICAgICAgdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2UgPSAwXHJcbiAgICAgICAgdGhpcy5udW1iZXJPZkxpbmVzT2ZFeGVyY2lzZVBlckRhdGUgPSBbXVxyXG4gICAgICAgIHRoaXMuc3BhY2VJc1VuZGVyMkggPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxJbnB1dHNXaXRoU2FtZURhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaW5wdXRzID0gY3JlYXRlQXJyYXkodGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKVxyXG4gICAgICAgIHRoaXMuZmlsbERhdGVUeXBlSW5wdXRzKClcclxuICAgICAgICB0aGlzLmZpbGxJbnB1dHNXaXRoU2FtZUJ5RGF0ZVR5cGVJbnB1dHMoKVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxEYXRlVHlwZUlucHV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yZWFjaEFycmF5RWxlbWVudHModGhpcy5pbnB1dHMsIChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZihpbnB1dC5pZCA9PT0gJ2RhdGUtaW5wdXQnKSB7XHJcbiAgICAgICAgICAgICAgICBwdXNoRWxlbWVudFRvQXJyYXkoaW5wdXQsIHRoaXMuZGF0ZVR5cGVJbnB1dHMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxJbnB1dHNXaXRoU2FtZUJ5RGF0ZVR5cGVJbnB1dHMoKVxyXG4gICAge1xyXG4gICAgICAgIGNsYXNzaWNGb3JMb29wKHRoaXMuZGF0ZVR5cGVJbnB1dHMsIChjdXJyZW50RGF0ZVR5cGVJbnB1dCwgbmV4dERhdGVUeXBlSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dCA9IGN1cnJlbnREYXRlVHlwZUlucHV0XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERhdGVUeXBlSW5wdXQgPSBuZXh0RGF0ZVR5cGVJbnB1dFxyXG4gICAgICAgICAgICBpZighaXNVbmRlZmluZWQobmV4dERhdGVUeXBlSW5wdXQpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGF0ZUluQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0c0FyZVNhbWUoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEYXRlSW5DdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRzQXJlRGlmZmVyZW50cygpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudERhdGVUeXBlSW5wdXQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEYXRlSW5DdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRzQXJlU2FtZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZGF0ZUluQ3VycmVudElucHV0ID0gdGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGRhdGVJbk5leHRJbnB1dCA9IHRoaXMubmV4dERhdGVUeXBlSW5wdXQudmFsdWVcclxuICAgICAgICBpZihkYXRlSW5DdXJyZW50SW5wdXQgPT09IGRhdGVJbk5leHRJbnB1dCl7XHJcbiAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5TYW1lQXJyYXkoZGF0ZUluQ3VycmVudElucHV0KSAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5TYW1lQXJyYXkoZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSkpe1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSA9IFtdXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZV0ucHVzaCh0aGlzLm5leHREYXRlVHlwZUlucHV0KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXS5wdXNoKHRoaXMubmV4dERhdGVUeXBlSW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZURhdGVJbkN1cnJlbnRBbmROZXh0RGF0ZVR5cGVJbnB1dHNBcmVEaWZmZXJlbnRzKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBkYXRlSW5DdXJyZW50SW5wdXQgPSB0aGlzLmN1cnJlbnREYXRlVHlwZUlucHV0LnZhbHVlXHJcbiAgICAgICAgY29uc3QgZGF0ZUluTmV4dElucHV0ID0gdGhpcy5uZXh0RGF0ZVR5cGVJbnB1dC52YWx1ZVxyXG4gICAgICAgIGlmKGRhdGVJbkN1cnJlbnRJbnB1dCAhPT0gZGF0ZUluTmV4dElucHV0KXtcclxuICAgICAgICAgICAgdGhpcy5wdXNoQ3VycmVudEFuZE5leHREYXRlVHlwZUlucHV0SW5EaWZmZXJlbnRBcnJheXMoZGF0ZUluQ3VycmVudElucHV0LCBkYXRlSW5OZXh0SW5wdXQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1c2hDdXJyZW50QW5kTmV4dERhdGVUeXBlSW5wdXRJbkRpZmZlcmVudEFycmF5cyhkYXRlSW5DdXJyZW50SW5wdXQsIGRhdGVJbk5leHRJbnB1dClcclxuICAgIHtcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0gPSBbXVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluTmV4dElucHV0XSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dHNXaXRoU2FtZURhdGVbZGF0ZUluTmV4dElucHV0XSA9IFtdXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5OZXh0SW5wdXRdLnB1c2godGhpcy5uZXh0RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdXNoQ3VycmVudERhdGVUeXBlSW5wdXQoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRhdGVJbkN1cnJlbnRJbnB1dCA9IHRoaXMuY3VycmVudERhdGVUeXBlSW5wdXQudmFsdWVcclxuICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdKSl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVJbkN1cnJlbnRJbnB1dF0gPSBbXVxyXG4gICAgICAgICAgICB0aGlzLmlucHV0c1dpdGhTYW1lRGF0ZVtkYXRlSW5DdXJyZW50SW5wdXRdLnB1c2godGhpcy5jdXJyZW50RGF0ZVR5cGVJbnB1dClcclxuICAgICAgICB9ICBcclxuICAgIH1cclxuXHJcbiAgICBmZXRjaExpbmVzVG9SZXBlYXQoKVxyXG4gICAge1xyXG4gICAgICAgIGxvb3BPdmVyT2JqZWN0KHRoaXMuaW5wdXRzV2l0aFNhbWVEYXRlLCAoZGF0ZSwgaW5wdXRzKT0+e1xyXG4gICAgICAgICAgICBmb3JlYWNoQXJyYXlFbGVtZW50cyhpbnB1dHMsIChpbnB1dCk9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hJbnRvTGluZXNUb1JlcGVhdExpbmVzV2ljaEFyZU5vdEV4ZXJjaXNlKGlucHV0LCBkYXRlKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaEludG9MaW5lc1RvUmVwZWF0TGluZXNXaWNoQXJlTm90RXhlcmNpc2UoaW5wdXQsIGRhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGlucHV0TGluZSA9IGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIGxldCBpbnB1dFR5cGVDaGFwdGVyID0gaW5wdXRMaW5lLnF1ZXJ5U2VsZWN0b3IoJyNjaGFwdGVyLWlucHV0JylcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXRUeXBlQ2hhcHRlci52YWx1ZVxyXG4gICAgICAgIGlmKGlucHV0VmFsdWUuaW5jbHVkZXMoXCJleGVyY2ljZVwiKSl7XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2UrK1xyXG4gICAgICAgICAgICB0aGlzLm51bWJlck9mTGluZXNPZkV4ZXJjaXNlUGVyRGF0ZVtkYXRlXSA9IHRoaXMubnVtYmVyT2ZMaW5lc09mRXhlcmNpc2VcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMubGluZXNUb1JlcGVhdFtkYXRlXSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc1RvUmVwZWF0W2RhdGVdID0gW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxpbmVzVG9SZXBlYXRbZGF0ZV0ucHVzaChpbnB1dFR5cGVDaGFwdGVyLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZldGNoTGluZXNXaXRoU2VtYmxhYmxlc1RpbWVzKClcclxuICAgIHtcclxuICAgICAgICBsZXQgdGFibGVMaW5lcyA9IGNyZWF0ZUFycmF5KHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcigndGJvZHknKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKVxyXG4gICAgICAgIHRhYmxlTGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGxpbmUucXVlcnlTZWxlY3RvcignI2RhdGUtaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gbGluZS5xdWVyeVNlbGVjdG9yKCcjaG91ci1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlW2RhdGVdID0gW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoaXNVbmRlZmluZWQodGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVtkYXRlICsgaG91cl0pKXtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZXRpbWVbZGF0ZSArIGhvdXJdID0gW11cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVtkYXRlICsgaG91cl0ucHVzaChsaW5lKSAgXHJcbiAgICAgICAgICAgIHRoaXMubGluZXNPZklucHV0c1dpdGhTYW1lRGF0ZVtkYXRlXS5wdXNoKGxpbmUpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzcGFjZUV2ZXJ5UmV2aXNpb25zV2l0aFNhbWVIb3VyKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nID0gdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRldGltZVxyXG4gICAgICAgIHRoaXMuc3BhY2VSZXZpc2lvbnMoKVxyXG4gICAgfVxyXG5cclxuICAgIHNwYWNlRXZlcnlSZXZpc2lvbnNTcGFjZWRVbmRlcjJIKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nID0gdGhpcy5saW5lc09mSW5wdXRzV2l0aFNhbWVEYXRlXHJcbiAgICAgICAgdGhpcy5zcGFjZUlzVW5kZXIySCA9IHRydWVcclxuICAgICAgICB0aGlzLnNwYWNlUmV2aXNpb25zKClcclxuICAgIH1cclxuXHJcbiAgICBzcGFjZVJldmlzaW9ucygpe1xyXG4gICAgICAgIGZvcihsZXQgZGF0ZSBpbiB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nKXtcclxuICAgICAgICAgICAgY29uc3QgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGggPSB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nW2RhdGVdLmxlbmd0aFxyXG4gICAgICAgICAgICB0aGlzLmFkZEhvdXJJZlRoZXJlSXNNdWx0aXBsZUxpbmVzV2l0aFNlbWJsYWJsZXNUaW1lKGRhdGUsIGxpbmVzT2ZJbnB1dHNQZXJEYXRlTGVuZ3RoKSAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSG91cklmVGhlcmVJc011bHRpcGxlTGluZXNXaXRoU2VtYmxhYmxlc1RpbWUoZGF0ZSwgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5sYXN0SG91ciA9IDBcclxuICAgICAgICB0aGlzLmxhc3RIb3VySW5wdXRcclxuICAgICAgICBpZihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGluZXNPZklucHV0c1BlckRhdGVMZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmUgPSB0aGlzLmN1cnJlbnRPYmpUb0xvb3BGb3JTcGFjaW5nW2RhdGVdW2ldLnF1ZXJ5U2VsZWN0b3IoJyNob3VyLWlucHV0JylcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXR0ZWRIb3VyID0gdGhpcy5ob3VySW5wdXRJbkN1cnJlbnRMaW5lLnZhbHVlLnNwbGl0KCc6JylcclxuICAgICAgICAgICAgICAgIHRoaXMuaG91ckluTGluZSA9IHBhcnNlSW50KHRoaXMuc3BsaXR0ZWRIb3VyWzBdKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTYW1lSG91cihsaW5lc09mSW5wdXRzUGVyRGF0ZUxlbmd0aCwgaSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3BhY2VVbmRlcjJIKClcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2FtZUhvdXIobGluZXNPZklucHV0c1BlckRhdGVMZW5ndGgsIGluZGV4T2ZMaW5lKVxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLnNwYWNlSXNVbmRlcjJIICYmIGluZGV4T2ZMaW5lID49IE1hdGguZmxvb3IobGluZXNPZklucHV0c1BlckRhdGVMZW5ndGggLyAyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuQWRkTmV3SG91clZhbHVlKHtcclxuICAgICAgICAgICAgICAgIGhvdXJWYWx1ZTogdGhpcy5ob3VySW5MaW5lLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVUb0FkZDogMlxyXG4gICAgICAgICAgICB9LCB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBBZGROZXdIb3VyVmFsdWUoaG91clByb3BlcnRpZXMsIGhvdXJJbnB1dCl7XHJcbiAgICAgICAgbGV0IG5ld0hvdXIgPSBob3VyUHJvcGVydGllcy5ob3VyVmFsdWUgKyBob3VyUHJvcGVydGllcy52YWx1ZVRvQWRkXHJcbiAgICAgICAgaG91cklucHV0LnZhbHVlID0gbmV3SG91ciArICc6JyArIHRoaXMuc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU3BhY2VVbmRlcjJIKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLnNwYWNlSXNVbmRlcjJIKXtcclxuICAgICAgICAgICAgaWYodGhpcy5sYXN0SG91ciA+IDApe1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5ob3VySW5MaW5lID4gdGhpcy5sYXN0SG91cil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCh0aGlzLmhvdXJJbkxpbmUgLSB0aGlzLmxhc3RIb3VyKSA8IDIgJiYgKHRoaXMuaG91ckluTGluZSAtIHRoaXMubGFzdEhvdXIpID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGROZXdIb3VyVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91clZhbHVlOiB0aGlzLmhvdXJJbkxpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQWRkOiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuaG91cklucHV0SW5DdXJyZW50TGluZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmxhc3RIb3VyID4gdGhpcy5ob3VySW5MaW5lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHRoaXMubGFzdEhvdXIgLSB0aGlzLmhvdXJJbkxpbmUpIDwgMiAmJiAodGhpcy5sYXN0SG91ciAtIHRoaXMuaG91ckluTGluZSkgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGROZXdIb3VyVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91clZhbHVlOiB0aGlzLmxhc3RIb3VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0FkZDogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmxhc3RIb3VySW5wdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0SG91ciA9IHRoaXMuaG91ckluTGluZVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RIb3VySW5wdXQgPSB0aGlzLmhvdXJJbnB1dEluQ3VycmVudExpbmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaFJlbW92ZUJ1dHRvbklmSW5Sb3dBY3Rpb25CdXR0b25zVG9BcnJheShyb3dBY3Rpb25CdXR0b25zLCBhcnJheSlcclxuICAgIHtcclxuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlX2xpbmVfYnV0dG9uJykgaW4gcm93QWN0aW9uQnV0dG9ucykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2sgaXRcXCdzIGluJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBwb3N0IH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9SZXF1ZXN0L2FqYXhcIjtcclxuaW1wb3J0IHsgZWxlbWVudEhhc0NsYXNzTmFtZSwgcmVtb3ZlRWxlbWVudEZyb21ET00gfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1Rvb2xzL0RPTVRvb2xzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUFycmF5LCBmb3JlYWNoQXJyYXlFbGVtZW50cywgaXNVbmRlZmluZWQsIGxvb3BPdmVyT2JqZWN0IH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9Ub29scy9Ub29sc1wiO1xyXG5pbXBvcnQgUmVwZXRpdGlvbiBmcm9tIFwiLi4vUmVwZXRpdGlvbnNHZW5lcmF0aW9uL1JlcGV0aXRpb25cIjtcclxuaW1wb3J0IFJlcGV0aXRpb25EYXRlIGZyb20gXCIuLi9SZXBldGl0aW9uc0dlbmVyYXRpb24vUmVwZXRpdGlvbkRhdGVcIjtcclxuaW1wb3J0IHsgbW9kYWxSZXNpemUgfSBmcm9tIFwiLi4vcmVzcG9uc2l2ZXMvbW9kYWxSZXNpemVcIjtcclxuaW1wb3J0IERPTUludGVyYWN0aW9ucyBmcm9tIFwiLi9ET01JbnRlcmFjdGlvbnNcIjtcclxuaW1wb3J0IGNhbGVuZGFyR2VuZXJhdGlvblRvb2xzIGZyb20gXCIuL1Rvb2xzL2NhbGVuZGFyR2VuZXJhdGlvblRvb2xzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWxlbmRhckNyZWF0aW9uRE9NSW50ZXJhY3Rpb25zIGV4dGVuZHMgRE9NSW50ZXJhY3Rpb25zIHtcclxuICAgIGZvcm1BY3Rpb24gPSAnL2NyZWF0ZS1jYWxlbmRhcidcclxuICAgIG5vdGlmaWNhdGlvbkNsYXNzTmFtZSA9ICdjYWxlbmRhcl9jcmVhdGlvbl9ub3RpZmljYXRpb24nXHJcblxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLmFjdGlvbnNCdXR0b25zUGVyUm93ID0ge31cclxuICAgICAgICB0aGlzLmF0TGVhc3RPbmVSb3dJc0V4ZXJjaXNlID0gNFxyXG4gICAgICAgIHRoaXMuYXRMZWFzdFR3b1Jvd3NBcmVFeGVyY2lzZXMgPSA1XHJcbiAgICAgICAgdGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWQgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzID0gMVxyXG4gICAgICAgIHRoaXMubm9ybWFsRGFpbHlOdW1iZXJPZlN1YmplY3RzID0gM1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZSZXBldGl0aW9ucyA9IDVcclxuICAgICAgICB0aGlzLmNyZWF0ZWRMaW5lcyA9IDBcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdFxyXG4gICAgICAgIHRoaXMuaXNRdW90YUVycm9yID0gZmFsc2VcclxuICAgICAgICB0aGlzLmlzV2FybmluZyA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvck9uZSA9IFwiRXJyZXVyIGR1IHF1b3RhIDMgbWF0acOocmVzL2ouIElsIGZhdXQgYXUgbW9pbnMgcXVlIGwndW5lIGQnZW50cmUgZWxsZXMgc29pZW50IHVuIGV4ZXJjaWNlLlwiXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlRm9yUXVvdGFFcnJvclR3byA9IFwiRXJyZXVyIGR1IHF1b3RhIDMgbWF0acOocmVzL2ouIElsIGZhdXQgYXUgbW9pbnMgcXVlIGRldXggZCdlbnRyZSBlbGxlcyBzb2llbnQgdW4gZXhlcmNpY2UuXCJcclxuICAgICAgICB0aGlzLmN1cnJlbnRRdW90YUVycm9yTWVzc2FnZVRvU2hvd1xyXG4gICAgICAgIHRoaXMucmVwZXRpdGlvbiA9IG5ldyBSZXBldGl0aW9uKClcclxuICAgICAgICB0aGlzLmRhdGUgPSBuZXcgUmVwZXRpdGlvbkRhdGUoKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUFjdGlvbnNJbk1vZGFsRm9ybSgpXHJcbiAgICB7XHJcbiAgICAgICAgc3VwZXIuaGFuZGxlQWN0aW9uc0luTW9kYWxGb3JtKClcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uID0gbmV3IGNhbGVuZGFyR2VuZXJhdGlvblRvb2xzKClcclxuICAgICAgICB0aGlzLmhhbmRsZUFkZExpbmVCdXR0b25DbGljaygpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYWxlbmRhckdlbmVyYXRpb24oKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUFkZExpbmVCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXMrK1xyXG4gICAgICAgIGxldCBhZGRMaW5lQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcuYWRkLWxpbmUnKVxyXG4gICAgICAgIGFkZExpbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFwcGVuZE5ld0xpbmVUb0NhbGVuZGFyQ3JlYXRpb25UYWJsZS5iaW5kKHRoaXMpKSAgXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kTmV3TGluZVRvQ2FsZW5kYXJDcmVhdGlvblRhYmxlKGUpe1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTGluZSgpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVSZW1vdmVMaW5lQnV0dG9uQ2xpY2soKVxyXG4gICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudUlmRXhpc3RzKGUpXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYWxlbmRhckdlbmVyYXRpb24oKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlQWRkTGluZUJ1dHRvbkNsaWNrKClcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVMaW5lICgpe1xyXG4gICAgICAgIHRoaXMuY3VycmVudENyZWF0ZWRMaW5lID0gdGhpcy5jcmVhdGVFbGVtZW50KCd0cicsICdzdWJqZWN0LWxpbmUnKVxyXG4gICAgICAgIGxldCByZW1vdmVMaW5lQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWxpbmUnKVxyXG4gICAgICAgIGxldCBhZGRMaW5lQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcuYWRkLWxpbmUnKVxyXG4gICAgICAgIGxldCBzdWJqZWN0TGluZVxyXG4gICAgICAgIGxldCBnZW5lcmF0ZUNhbGVuZGFyQnV0dG9uIFxyXG4gICAgICAgIGlmKGFkZExpbmVCdXR0b24pe1xyXG4gICAgICAgICAgICB0aGlzLmFkZExpbmVCdXR0b25Db250YWluZXIgPSBhZGRMaW5lQnV0dG9uLnBhcmVudEVsZW1lbnQgXHJcbiAgICAgICAgICAgIHN1YmplY3RMaW5lID0gdGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyLnBhcmVudEVsZW1lbnRcclxuICAgICAgICAgICAgZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbiA9IHN1YmplY3RMaW5lLnF1ZXJ5U2VsZWN0b3IoJy5nZW5lcmF0ZS1jYWxlbmRhcicpXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbkNvbnRhaW5lciA9IGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24ucGFyZW50RWxlbWVudFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25UYm9keSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyLWNyZWF0aW9uLXRib2R5JylcclxuICAgICAgICBpZihyZW1vdmVMaW5lQnV0dG9uICE9PSBudWxsKXtcclxuICAgICAgICAgICAgcmVtb3ZlTGluZUJ1dHRvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocmVtb3ZlTGluZUJ1dHRvbi5wYXJlbnRFbGVtZW50KSBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jdXJyZW50Q3JlYXRlZExpbmUpXHJcbiAgICAgICAgbGV0IGN1cnJlbnRDcmVhdGVkTGluZUlubmVySFRNTCA9IGBcclxuICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3N1YmplY3QtJHt0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lc30nIGlkPSdzdWJqZWN0LWlucHV0Jz48L3RkPlxyXG4gICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nY2hhcHRlci0ke3RoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzfScgaWQ9J2NoYXB0ZXItaW5wdXQnPjwvdGQ+XHJcbiAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSdkYXRlJyBuYW1lPSdkYXRlLSR7dGhpcy50YWJsZUxpbmVzTGVuZ3RoT2ZDYWxlbmRhckNyZWF0aW9uTGluZXN9JyBpZD0nZGF0ZS1pbnB1dCc+PC90ZD5cclxuICAgICAgICA8dGQ+PGlucHV0IHR5cGU9J3RpbWUnIG5hbWU9J2hvdXItJHt0aGlzLnRhYmxlTGluZXNMZW5ndGhPZkNhbGVuZGFyQ3JlYXRpb25MaW5lc30nIGlkPSdob3VyLWlucHV0Jz48L3RkPlxyXG4gICAgICAgIGBcclxuICAgICAgICBpZighdGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgY3VycmVudENyZWF0ZWRMaW5lSW5uZXJIVE1MICs9IGBcclxuICAgICAgICAgICAgPHRkIGNsYXNzPSdyb3dfYWN0aW9uX2J1dHRvbiBhZGRfbGluZV9idXR0b24nPjxpIGNsYXNzPSdmYXMgZmEtcGx1cyBhZGQtbGluZSc+PC9pPjwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz0ncm93X2FjdGlvbl9idXR0b24gZ2VuZXJhdGVfY2FsZW5kYXJfYnV0dG9uJz48aSBjbGFzcz0nZmFzIGZhLWNoZWNrIGdlbmVyYXRlLWNhbGVuZGFyJz48L2k+PC90ZD5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPSdyb3dfYWN0aW9uX2J1dHRvbiByZW1vdmVfbGluZV9idXR0b24nPjxpIGNsYXNzPSdmYXMgZmEtd2luZG93LWNsb3NlIHJlbW92ZS1saW5lJz48L2k+PC90ZD5cclxuICAgICAgICAgICAgYFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5pbm5lckhUTUwgPSBjdXJyZW50Q3JlYXRlZExpbmVJbm5lckhUTUxcclxuICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8PSA4MDApIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRSb3dBY3Rpb25CdXR0b25zSW50b0FNZW51KClcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKCFpc1VuZGVmaW5lZChzdWJqZWN0TGluZSkpe1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdExpbmUucmVtb3ZlQ2hpbGQodGhpcy5hZGRMaW5lQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgc3ViamVjdExpbmUucmVtb3ZlQ2hpbGQodGhpcy5nZW5lcmF0ZUNhbGVuZGFyQnV0dG9uQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ3Jvd0Zvcm1IZWlnaHQoKVxyXG4gICAgICAgIHRoaXMuZ3Jvd01vZGFsSGVpZ2h0KClcclxuICAgICAgICB0aGlzLmdyb3dCb2R5SGVpZ2h0SWZNb2RhbENvbGxhcHNlKClcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGhhbmRsZVJlbW92ZUxpbmVCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaW5lQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWxpbmUnKSAgICAgIFxyXG4gICAgICAgIGlmKHRoaXMucmVtb3ZlTGluZUJ1dHRvbiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tPblJlbW92ZUxpbmVCdXR0b24oKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVDbGlja09uUmVtb3ZlTGluZUJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaW5lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57XHJcbiAgICAgICAgICAgIHRoaXMudGFibGVMaW5lc0xlbmd0aE9mQ2FsZW5kYXJDcmVhdGlvbkxpbmVzLS1cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyID0gdGhpcy5yZW1vdmVMaW5lQnV0dG9uLnBhcmVudE5vZGVcclxuICAgICAgICAgICAgbGV0IHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQgPSB0aGlzLnJlbW92ZUxpbmVCdXR0b25Db250YWluZXIucGFyZW50Tm9kZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoZWxlbWVudEhhc0NsYXNzTmFtZShyZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50LCAnYWN0aW9uX21lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00ocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00ocmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudC5wYXJlbnRFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSb3dBY3Rpb25NZW51KHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRvTGFzdFJvd0FjdGlvbkJ1dHRvbnMoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRSb3dBY3Rpb25CdXR0b25zSW50b0FNZW51KClcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lclBhcmVudC5jbGFzc0xpc3QuYWRkKCdpbnZpc2libGUtc3ViamVjdC1saW5lJylcclxuICAgICAgICAgICAgICAgIHJlbW92ZUxpbmVCdXR0b25Db250YWluZXJQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25UYm9keS5yZW1vdmVDaGlsZChyZW1vdmVMaW5lQnV0dG9uQ29udGFpbmVyUGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVG9MYXN0Um93QWN0aW9uQnV0dG9ucygpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kVG9MYXN0Um93QWN0aW9uQnV0dG9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkubGFzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZCh0aGlzLmFkZExpbmVCdXR0b25Db250YWluZXIpXHJcbiAgICAgICAgdGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkubGFzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlQ2FsZW5kYXJCdXR0b25Db250YWluZXIpXHJcbiAgICAgICAgaWYodGhpcy5jYWxlbmRhckNyZWF0aW9uVGJvZHkuZmlyc3RFbGVtZW50Q2hpbGQgIT09IHRoaXMuY2FsZW5kYXJDcmVhdGlvblRib2R5Lmxhc3RFbGVtZW50Q2hpbGQpe1xyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQ3JlYXRpb25UYm9keS5sYXN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKHRoaXMucmVtb3ZlTGluZUJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVkdWNlRm9ybUhlaWdodFVudGlsTm9ybWFsKClcclxuICAgICAgICB0aGlzLnJlZHVjZU1vZGFsSGVpZ2h0VW50aWxOb3JtYWwoKVxyXG4gICAgICAgIHRoaXMucmVkdWNlQm9keUhlaWd0aFVudGlsTm9ybWFsKClcclxuICAgIH1cclxuXHJcbiAgICBncm93Rm9ybUhlaWdodCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5ncm93RWxlbWVudFNpemUodGhpcy5tb2RhbEZvcm0sIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlOiAnaGVpZ2h0JyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMubW9kYWxGb3JtLm9mZnNldEhlaWdodCArIHRoaXMuY3VycmVudENyZWF0ZWRMaW5lLm9mZnNldEhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ3Jvd01vZGFsSGVpZ2h0KClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmdyb3dFbGVtZW50U2l6ZSh0aGlzLm1vZGFsLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2hlaWdodCcsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm1vZGFsLm9mZnNldEhlaWdodCArIHRoaXMuY3VycmVudENyZWF0ZWRMaW5lLm9mZnNldEhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgXHJcbiAgICAgKiBAcGFyYW0ge3thdHRyaWJ1dGU6IHN0cmluZywgdmFsdWU6IG51bWJlcn19IG9wdGlvbnMgXHJcbiAgICAgKi9cclxuICAgIGdyb3dFbGVtZW50U2l6ZShlbGVtZW50LCBvcHRpb25zKVxyXG4gICAge1xyXG4gICAgICAgIGlmKG9wdGlvbnMuYXR0cmlidXRlID09PSAnd2lkdGgnKXtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IG9wdGlvbnMudmFsdWUgKyAncHgnXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IG9wdGlvbnMudmFsdWUgKyAncHgnXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBncm93Qm9keUhlaWdodElmTW9kYWxDb2xsYXBzZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgPj0gNDcwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3Jvd0VsZW1lbnRTaXplKGRvY3VtZW50LmJvZHksIHtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ2hlaWdodCcsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQgKyB0aGlzLmN1cnJlbnRDcmVhdGVkTGluZS5vZmZzZXRIZWlnaHRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVkdWNlRm9ybUhlaWdodFVudGlsTm9ybWFsKCkge1xyXG4gICAgICAgIGxldCBtb2RhbEZvcm1IZWlnaHQgPSB0aGlzLm1vZGFsRm9ybS5vZmZzZXRIZWlnaHRcclxuICAgICAgICBpZihtb2RhbEZvcm1IZWlnaHQgPiB0aGlzLm9yaWdpbmFsTW9kYWxGb3JtSGVpZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxGb3JtLnN0eWxlLmhlaWdodCA9IG1vZGFsRm9ybUhlaWdodCAtIHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcigndHInKS5vZmZzZXRIZWlnaHQgKyAncHgnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZHVjZU1vZGFsSGVpZ2h0VW50aWxOb3JtYWwoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ID4gdGhpcy5vcmlnaW5hbE1vZGFsSGVpZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgLSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykub2Zmc2V0SGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWR1Y2VCb2R5SGVpZ3RoVW50aWxOb3JtYWwoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0ID4gdGhpcy5vcmlnaW5hbEJvZHlIZWlnaHQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCAtIHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcigndHInKS5vZmZzZXRIZWlnaHQgKyAncHgnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNhbGVuZGFyR2VuZXJhdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGdlbmVyYXRlQ2FsZW5kYXJCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5nZW5lcmF0ZS1jYWxlbmRhcicpXHJcbiAgICAgICAgZ2VuZXJhdGVDYWxlbmRhckJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIuYmluZCh0aGlzKSlcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhbGVuZGFyKGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvbi5maWxsSW5wdXRzV2l0aFNhbWVEYXRlKClcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmZldGNoTGluZXNUb1JlcGVhdCgpXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUxpbmVzT2ZSZXBldGl0aW9ucygpXHJcbiAgICAgICAgdGhpcy5yZW1vdmVSb3dBY3Rpb25NZW51SWZFeGlzdHMoZSlcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmZldGNoTGluZXNXaXRoU2VtYmxhYmxlc1RpbWVzKClcclxuICAgICAgICB0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLnNwYWNlRXZlcnlSZXZpc2lvbnNXaXRoU2FtZUhvdXIoKVxyXG4gICAgICAgIHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24uc3BhY2VFdmVyeVJldmlzaW9uc1NwYWNlZFVuZGVyMkgoKVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTGluZXNPZlJlcGV0aXRpb25zKClcclxuICAgIHtcclxuICAgICAgICBsb29wT3Zlck9iamVjdCh0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmlucHV0c1dpdGhTYW1lRGF0ZSwgKGRhdGUsIGlucHV0cyk9PntcclxuICAgICAgICAgICAgdGhpcy5udW1iZXJPZlN1YmplY3RzSXNOb3JtYWwoaW5wdXRzLCBkYXRlKVxyXG4gICAgICAgICAgICB0aGlzLm51bWJlck9mU3ViamVjdHNNb3JlVGhhbk5vcm1hbChpbnB1dHMsIGRhdGUpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgbnVtYmVyT2ZTdWJqZWN0c0lzTm9ybWFsKGlucHV0cywgZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZihpbnB1dHMubGVuZ3RoIDwgdGhpcy5hdExlYXN0T25lUm93SXNFeGVyY2lzZSBcclxuICAgICAgICAgICAgJiYgdGhpcy50b29sc0ZvckNhbGVuZGFyR2VuZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgLmxpbmVzVG9SZXBlYXRbZGF0ZV0gIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICl7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24ubGluZXNUb1JlcGVhdFtkYXRlXS5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdCA9IHJvd1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zQ2FsZW5kYXIocm93KSAgICBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbnVtYmVyT2ZTdWJqZWN0c01vcmVUaGFuTm9ybWFsKGlucHV0cywgZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBzd2l0Y2goaW5wdXRzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGNhc2UgdGhpcy5hdExlYXN0T25lUm93SXNFeGVyY2lzZTogXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nT25lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMuYXRMZWFzdFR3b1Jvd3NBcmVFeGVyY2lzZXM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nVHdvKGRhdGUpXHJcbiAgICAgICAgICAgICAgICBicmVhayAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmdPbmUoZGF0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRRdW90YUVycm9yTWVzc2FnZVRvU2hvdyA9IHRoaXMubWVzc2FnZUZvclF1b3RhRXJyb3JPbmVcclxuICAgICAgICB0aGlzLmdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nKGRhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmdUd28oZGF0ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRRdW90YUVycm9yTWVzc2FnZVRvU2hvdyA9IHRoaXMubWVzc2FnZUZvclF1b3RhRXJyb3JUd29cclxuICAgICAgICB0aGlzLmdlbmVyYXRlUmVwZXRpdGlvbnNPclNob3dXYXJuaW5nKGRhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVSZXBldGl0aW9uc09yU2hvd1dhcm5pbmcoZGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLm51bWJlck9mTGluZXNPZkV4ZXJjaXNlUGVyRGF0ZVtkYXRlXSA+PSAxKXtcclxuICAgICAgICAgICAgaWYoIXRoaXMuaXNRdW90YUVycm9yKXtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2hBcnJheUVsZW1lbnRzKHRoaXMudG9vbHNGb3JDYWxlbmRhckdlbmVyYXRpb24ubGluZXNUb1JlcGVhdFtkYXRlXSwgKGxpbmUpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Um93VG9SZXBlYXQgPSBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVJlcGV0aXRpb25zQ2FsZW5kYXIobGluZSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zaG93V2FybmluZyhkYXRlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93V2FybmluZyhkYXRlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaXNRdW90YUVycm9yID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuZm9jdXNDaGFwdGVySW5wdXRPbih0aGlzLnRvb2xzRm9yQ2FsZW5kYXJHZW5lcmF0aW9uLmxpbmVzVG9SZXBlYXRbZGF0ZV0pXHJcbiAgICAgICAgdGhpcy5jcmVhdGVXYXJuaW5nKHRoaXMuY3VycmVudFF1b3RhRXJyb3JNZXNzYWdlVG9TaG93KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHsqfSBsaW5lc1RvUmVwZWF0T2ZBRGF0ZSBcclxuICAgICAqL1xyXG4gICAgZm9jdXNDaGFwdGVySW5wdXRPbihsaW5lc1RvUmVwZWF0T2ZBRGF0ZSl7XHJcbiAgICAgICAgZm9yZWFjaEFycmF5RWxlbWVudHMobGluZXNUb1JlcGVhdE9mQURhdGUsIChsaW5lKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmFsZXJ0Rm9jdXNPbkVsZW1lbnQobGluZS5xdWVyeVNlbGVjdG9yKCcjY2hhcHRlci1pbnB1dCcpKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7SFRNTFRhYmxlUm93RWxlbWVudH0gcm93IFxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZVJlcGV0aXRpb25zQ2FsZW5kYXIocm93KXtcclxuICAgICAgICBsZXQgcm93SW5wdXRzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JylcclxuICAgICAgICBsZXQgZW1wdHlJbnB1dEV4aXN0cyA9IGZhbHNlXHJcblxyXG4gICAgICAgIHJvd0lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgaWYoaW5wdXQudmFsdWUgPT09ICcnKXtcclxuICAgICAgICAgICAgICAgIGVtcHR5SW5wdXRFeGlzdHMgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCFlbXB0eUlucHV0RXhpc3RzKXtcclxuICAgICAgICAgICAgdGhpcy5yZXBldGl0aW9uTGluZXNIYXZlQmVlbkNyZWF0ZWQgPSB0cnVlXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVMaW5lcyhyb3cpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53YXJuaW5nJykgPT09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1dhcm5pbmcgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVdhcm5pbmcoXCJJbXBvc3NpYmxlIGRlIGfDqW7DqXJlciBsZXMgcsOpcMOpdGl0aW9ucyBzaSBsZXMgY2hhbXBzIHNvbnQgdmlkZXMuXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IHJvdyBcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVMaW5lcyhyb3cpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDw9IHRoaXMubnVtYmVyT2ZSZXBldGl0aW9uczsgaSsrKXtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMaW5lKClcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkTGluZXMgPSBpXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVJbnB1dHNWYWx1ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IElMIEZBVVQgUkVHTEVSIENFQ0kgQ0FSIENFVCBFTEVNRU5UIFJFU1RFIEwnRUxFTUVOVCBJTklUSUFMXHJcbiAgICAgKi9cclxuICAgIGdlbmVyYXRlSW5wdXRzVmFsdWUoKXtcclxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpXHJcbiAgICAgICAgbGV0IHRib2R5TGFzdENoaWxkID0gdGJvZHkubGFzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgIGxldCBzdWJqZWN0SW5wdXQgPSB0Ym9keUxhc3RDaGlsZC5xdWVyeVNlbGVjdG9yKCcjc3ViamVjdC1pbnB1dCcpXHJcbiAgICAgICAgbGV0IGNoYXB0ZXJJbnB1dCA9IHRib2R5TGFzdENoaWxkLnF1ZXJ5U2VsZWN0b3IoJyNjaGFwdGVyLWlucHV0JylcclxuICAgICAgICBsZXQgZGF0ZUlucHV0ID0gdGJvZHlMYXN0Q2hpbGQucXVlcnlTZWxlY3RvcignI2RhdGUtaW5wdXQnKVxyXG4gICAgICAgIGxldCBob3VySW5wdXQgPSB0Ym9keUxhc3RDaGlsZC5xdWVyeVNlbGVjdG9yKCcjaG91ci1pbnB1dCcpXHJcbiAgICBcclxuICAgICAgICBzdWJqZWN0SW5wdXQudmFsdWUgPSB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdD8ucXVlcnlTZWxlY3RvcignI3N1YmplY3QtaW5wdXQnKS52YWx1ZVxyXG4gICAgICAgIGNoYXB0ZXJJbnB1dC52YWx1ZSA9IHRoaXMuY3VycmVudFJvd1RvUmVwZWF0Py5xdWVyeVNlbGVjdG9yKCcjY2hhcHRlci1pbnB1dCcpLnZhbHVlXHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1tzdHJpbmcsIHN0cmluZ119XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbGV0IHNwbGl0dGVkSG91ciA9IHRoaXMuY3VycmVudFJvd1RvUmVwZWF0Py5xdWVyeVNlbGVjdG9yKCcjaG91ci1pbnB1dCcpLnZhbHVlLnNwbGl0KCc6JylcclxuICAgICAgICBsZXQgc3BsaXR0ZWREYXRlID0gdGhpcy5jdXJyZW50Um93VG9SZXBlYXQ/LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlLWlucHV0JykudmFsdWUuc3BsaXQoJy0nKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB5ZWFyID0gc3BsaXR0ZWREYXRlWzBdXHJcbiAgICAgICAgbGV0IG1vbnRoID0gc3BsaXR0ZWREYXRlWzFdXHJcbiAgICAgICAgbGV0IGRheSA9IHNwbGl0dGVkRGF0ZVsyXVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBob3Vyc0Zvck5leHRSZXBldGl0aW9ucyA9IHRoaXMucmVwZXRpdGlvbi5ob3Vyc0Zvck5leHRSZXBldGl0aW9uc1t0aGlzLmNyZWF0ZWRMaW5lc11cclxuICAgICAgICBsZXQgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb24gPSBob3Vyc0Zvck5leHRSZXBldGl0aW9uc1swXVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBob3VyRm9yTmV4UmVwZXRpdGlvbiA9IHBhcnNlSW50KHNwbGl0dGVkSG91clswXSwgMTApICsgaG91ckJldHdlZW5DdXJyZW50QW5kTmV4dFJlcGV0aXRpb25cclxuICAgICAgICBcclxuICAgICAgICBpZih0aGlzLmNyZWF0ZWRMaW5lcyA9PT0gMSl7XHJcbiAgICAgICAgICAgIGlmKGhvdXJGb3JOZXhSZXBldGl0aW9uIDwgMjApe1xyXG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gdGhpcy5jdXJyZW50Um93VG9SZXBlYXQ/LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlLWlucHV0JykudmFsdWVcclxuICAgICAgICAgICAgICAgIGhvdXJJbnB1dC52YWx1ZSA9IGhvdXJGb3JOZXhSZXBldGl0aW9uLnRvU3RyaW5nKDEwKS5sZW5ndGggPT09IDEgPyBcclxuICAgICAgICAgICAgICAgICAgICBcIjBcIiArIGhvdXJGb3JOZXhSZXBldGl0aW9uICsgJzonICsgc3BsaXR0ZWRIb3VyWzFdIDpcclxuICAgICAgICAgICAgICAgICAgICBob3VyRm9yTmV4UmVwZXRpdGlvbiArICc6JyArIHNwbGl0dGVkSG91clsxXVxyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW50TmV3RGF5VmFsdWUgPSBwYXJzZUludChkYXkpICsgMVxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0RheVZhbHVlID0gaW50TmV3RGF5VmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyAnMCcgKyBpbnROZXdEYXlWYWx1ZS50b1N0cmluZygpIDogaW50TmV3RGF5VmFsdWVcclxuICAgICAgICAgICAgICAgIGhvdXJGb3JOZXhSZXBldGl0aW9uID0gOFxyXG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0geWVhciArICctJyArIG1vbnRoICsgJy0nICsgbmV3RGF5VmFsdWVcclxuXHJcbiAgICAgICAgICAgICAgICBpZihkYXRlSW5wdXQudmFsdWUgPT09ICcnKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW50TW9udGggPSBwYXJzZUludChtb250aClcclxuICAgICAgICAgICAgICAgICAgICBpZihpbnRNb250aCA8IDEyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0geWVhciArICctMCcgKyAoaW50TW9udGggKyAxKSArICctJyArICcwMSdcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gKHBhcnNlSW50KHllYXIpICsgMSkgKyAnLScgKyAnMDEnICsgJy0nICsgJzAxJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGhvdXJJbnB1dC52YWx1ZSA9ICcwJyArIGhvdXJGb3JOZXhSZXBldGl0aW9uICsgJzonICsgc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpbnREYXkgPSBwYXJzZUludChkYXkpXHJcbiAgICAgICAgICAgIGxldCBpbnROZXdEYXlWYWx1ZSA9IGludERheSArIGhvdXJzRm9yTmV4dFJlcGV0aXRpb25zWzFdXHJcbiAgICAgICAgICAgIGxldCBuZXdEYXlWYWx1ZSA9IGludE5ld0RheVZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxID8gJzAnICsgaW50TmV3RGF5VmFsdWUudG9TdHJpbmcoKSA6IGludE5ld0RheVZhbHVlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkYXRlSW5wdXQudmFsdWUgPSB5ZWFyICsgJy0nICsgbW9udGggKyAnLScgKyBuZXdEYXlWYWx1ZVxyXG4gICAgICAgICAgICBpZihkYXRlSW5wdXQudmFsdWUgPT09ICcnKXtcclxuICAgICAgICAgICAgICAgIGxldCBpbnRNb250aCA9IHBhcnNlSW50KG1vbnRoKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50RGF5SW5OZXh0TW9udGggPSBpbnROZXdEYXlWYWx1ZSAtIHRoaXMuZGF0ZS5udW1iZXJPZkRheXNQZXJNb250aFtpbnRNb250aF1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheUluTmV4dE1vbnRoID0gaW50RGF5SW5OZXh0TW9udGgudG9TdHJpbmcoKS5sZW5ndGggPT09IDEgPyBcIjBcIiArIGludERheUluTmV4dE1vbnRoIDogaW50RGF5SW5OZXh0TW9udGhcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoaW50TW9udGggPCAxMil7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0geWVhciArICctMCcgKyAoaW50TW9udGggKyAxKSArICctJyArIGRheUluTmV4dE1vbnRoXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlSW5wdXQudmFsdWUgPSAocGFyc2VJbnQoeWVhcikgKyAxKSArICctJyArICcwMScgKyAnLScgKyAnMDEnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaG91cklucHV0LnZhbHVlID0gc3BsaXR0ZWRIb3VyWzBdICsgJzonICsgc3BsaXR0ZWRIb3VyWzFdXHJcbiAgICAgICAgICAgIC8vIC8vIDEuIE9OIFZFUklGSUUgU0kgTEEgTk9VVkVMTEUgSEVVUkUgRVNUIEFWQU5UIExFIENPTU1FTkNFTUVOVCBERVMgSEVVUkVTIERFIFRSQVZBSUxcclxuICAgICAgICAgICAgLy8gaWYodGhpcy5yZXBldGl0aW9uLmlzQmVmb3JlV29ya1RpbWUoKSl7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyBPTiBSRURFRklOSVQgTEEgTk9VVkVMTEUgSEVVUkUgQVUgQ09NTUVOQ0VNRU5UIERFIExBIEpPVVJORUVcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gLy8gMi4gU0lOT04gVkVSSUZJRSBTSSBMQSBOT1VWRUxMRSBIRVVSRSBFU1QgREFOUyBMRVMgSEVVUkVTIERFIFRSQVZBSUwgTUFUSU5BTEVTIE9VIEQnQVBSRVMgTUlESVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKHRoaXMucmVwZXRpdGlvbi5pc0luV29ya1RpbWUoaG91ckZvck5leFJlcGV0aXRpb24pKXtcclxuICAgICAgICAgICAgLy8gICAgIC8vIE9OIElOU0VSVCBMQSBOT1VWRUxMRSBIRVVSRSBEQU5TIEwnSU5QVVRcclxuICAgICAgICAgICAgLy8gfWVsc2Uge1xyXG5cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBob3VySW5wdXQudmFsdWUgPSBzcGxpdHRlZEhvdXJbMF0gKyAnOicgKyBzcGxpdHRlZEhvdXJbMV1cclxuICAgICAgICAgICAgLy8gLy8gMS4gT04gVkVSSUZJRSBTSSBMQSBOT1VWRUxMRSBIRVVSRSBFU1QgQVZBTlQgTEUgQ09NTUVOQ0VNRU5UIERFUyBIRVVSRVMgREUgVFJBVkFJTFxyXG4gICAgICAgICAgICAvLyBpZih0aGlzLnJlcGV0aXRpb24uaXNCZWZvcmVXb3JrVGltZSgpKXtcclxuICAgICAgICAgICAgLy8gICAgIC8vIE9OIFJFREVGSU5JVCBMQSBOT1VWRUxMRSBIRVVSRSBBVSBDT01NRU5DRU1FTlQgREUgTEEgSk9VUk5FRVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAvLyAyLiBTSU5PTiBWRVJJRklFIFNJIExBIE5PVVZFTExFIEhFVVJFIEVTVCBEQU5TIExFUyBIRVVSRVMgREUgVFJBVkFJTCBNQVRJTkFMRVMgT1UgRCdBUFJFUyBNSURJXHJcbiAgICAgICAgICAgIC8vIGVsc2UgaWYodGhpcy5yZXBldGl0aW9uLmlzSW5Xb3JrVGltZShob3VyRm9yTmV4UmVwZXRpdGlvbikpe1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gT04gSU5TRVJUIExBIE5PVVZFTExFIEhFVVJFIERBTlMgTCdJTlBVVFxyXG4gICAgICAgICAgICAvLyB9ZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIDMuIFNJTk9OIE9OIFZFUklGSUUgUVVFIExBIE5PVVZFTExFIEhFVVJFIEVTVCBEQU5TIExFUyBIRVVSRVMgREUgUEFVU0VcclxuICAgICAgICAgICAgLy8gU0kgT1VJIDogT04gREVGSU5JVCBMQSBOT1VWRUxMRSBIRVVSRSBBIExBIFBST0NIQUlORSBIRVVSRSBPVSBPTiBSRVBSRU5EIExFIFRSQVZBSUxcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3dUb1JlcGVhdCA9IHRib2R5TGFzdENoaWxkXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlV2FybmluZyhtZXNzYWdlKXtcclxuICAgIFxyXG4gICAgICAgIGxldCB3YXJuaW5nUGFyYWdyYXBoID0gdGhpcy5jcmVhdGVFbGVtZW50KCdwJywgJ3dhcm5pbmcnKVxyXG4gICAgICAgIGxldCBpID0gdGhpcy5jcmVhdGVFbGVtZW50KCdpJywgJ2ZhcyBmYS1leGNsYW1hdGlvbi10cmlhbmdsZScpXHJcbiAgICAgICAgbGV0IHNwYW4gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCAnd2FybmluZy1tZXNzYWdlJylcclxuXHJcbiAgICAgICAgd2FybmluZ1BhcmFncmFwaC5hcHBlbmRDaGlsZChpKVxyXG4gICAgICAgIHdhcm5pbmdQYXJhZ3JhcGguYXBwZW5kQ2hpbGQoc3BhbilcclxuICAgICAgICBzcGFuLmlubmVySFRNTCA9IG1lc3NhZ2VcclxuXHJcbiAgICAgICAgdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5iZWZvcmUod2FybmluZ1BhcmFncmFwaClcclxuICAgICAgICB3YXJuaW5nUGFyYWdyYXBoLm9mZnNldFdpZHRoXHJcbiAgICAgICAgd2FybmluZ1BhcmFncmFwaC5jbGFzc0xpc3QuYWRkKCdhY3RpdmVfd2FybmluZycpXHJcbiAgICAgICAgY29uc3QgbWFyZ2luQm90dG9tID0gMzBcclxuICAgICAgICB0aGlzLm1vZGFsLnN0eWxlLmhlaWdodCA9IHRoaXMubW9kYWwub2Zmc2V0SGVpZ2h0ICsgd2FybmluZ1BhcmFncmFwaC5vZmZzZXRIZWlnaHQgKyBtYXJnaW5Cb3R0b20gKyAncHgnXHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudEFmdGVyTWlsbGlzZWNvbmRzKHdhcm5pbmdQYXJhZ3JhcGgsIDUwMDAsIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lVG9SZW1vdmU6ICdhY3RpdmVfd2FybmluZycsXHJcbiAgICAgICAgICAgIGVsZW1lbnRXaXRoSGVpZ2h0VG9EZWNyZWFzZTogW3RoaXMubW9kYWwsIHdhcm5pbmdQYXJhZ3JhcGgub2Zmc2V0SGVpZ2h0ICsgbWFyZ2luQm90dG9tXVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcG9zdENvbnRlbnRXaXRoTm90aWZpY2F0aW9uVGhlblJlbG9hZCgpXHJcbiAgICB7XHJcbiAgICAgICAgcG9zdCh0aGlzLmZvcm1BY3Rpb24sIHRoaXMuZGF0YVRvUG9zdE9iailcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0UmVzcG9uc2UocmVzcG9uc2UpXHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbCB5IGEgZXUgdW5lIGVycmV1ciA6XCIgKyBlcnJvcilcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVSZXF1ZXN0UmVzcG9uc2UocmVzcG9uc2UpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlSnNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2UpXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlSnNvbi5zdWNjZXNzICE9PSB1bmRlZmluZWQgPyByZXNwb25zZUpzb24uc3VjY2VzcyA6IHJlc3BvbnNlSnNvbi5mYWlsXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uV2l0aERhdGFJbk1pbGxpc2Vjb25kcyh7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5ub3RpZmljYXRpb25DbGFzc05hbWUsIFxyXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlXHJcbiAgICAgICAgfSwgMjAwMClcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnJlbG9hZFBhZ2UoKSBcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZU1vZGFsKClcclxuICAgIHtcclxuICAgICAgICBzdXBlci5jbG9zZU1vZGFsKClcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IHRoaXMub3JpZ2luYWxCb2R5SGVpZ2h0ICsgJ3B4J1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVJvd0FjdGlvbk1lbnVJZkV4aXN0cyhlKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBjbGlja2VkQnV0dG9uR3JhbmRQYXJlbnQgPSBlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgaWYoY2xpY2tlZEJ1dHRvbkdyYW5kUGFyZW50IFxyXG4gICAgICAgICAgICAmJiBlbGVtZW50SGFzQ2xhc3NOYW1lKGNsaWNrZWRCdXR0b25HcmFuZFBhcmVudCwnYWN0aW9uX21lbnUnKVxyXG4gICAgICAgICAgICAmJiAhdGhpcy5pc1dhcm5pbmcgICAgXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93QWN0aW9uTWVudShjbGlja2VkQnV0dG9uR3JhbmRQYXJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVJvd0FjdGlvbk1lbnUocm93QWN0aW9uTWVudSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhpZGVSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpXHJcbiAgICAgICAgbGV0IHJvd0FjdGlvbk1lbnVCdXR0b24gPSByb3dBY3Rpb25NZW51LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmFjdGlvbl9tZW51X2J1dHRvbicpXHJcbiAgICAgICAgaWYocm93QWN0aW9uTWVudUJ1dHRvbil7XHJcbiAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJvd0FjdGlvbk1lbnVCdXR0b24pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHJvd0FjdGlvbk1lbnUpXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlTW9kYWxSZXNwb25zaXZlKClcclxuICAgIHtcclxuICAgICAgICBuZXcgbW9kYWxSZXNpemUodGhpcylcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRSb3dBY3Rpb25CdXR0b25zSW50b0FNZW51KClcclxuICAgIHtcclxuICAgICAgICBpZihcclxuICAgICAgICAgICAgKHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLmFjdGlvbl9tZW51X2J1dHRvbicpID09PSBudWxsIHx8IHRoaXMubGFzdFN1YmplY3RSb3cgIT09IG51bGwpXHJcbiAgICAgICAgICAgICYmICF0aGlzLnJlcGV0aXRpb25MaW5lc0hhdmVCZWVuQ3JlYXRlZFxyXG4gICAgICAgICl7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdFJvd3MgPSBjcmVhdGVBcnJheSh0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWJqZWN0LWxpbmUnKSlcclxuICAgICAgICAgICAgdGhpcy5sYXN0U3ViamVjdFJvd0luZGV4ID0gdGhpcy5zdWJqZWN0Um93cy5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFN1YmplY3RSb3cgPSB0aGlzLnN1YmplY3RSb3dzW3RoaXMubGFzdFN1YmplY3RSb3dJbmRleF1cclxuICAgICAgICAgICAgbGV0IHJvd0FjdGlvbkJ1dHRvbnMgPSBjcmVhdGVBcnJheSh0aGlzLmxhc3RTdWJqZWN0Um93LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3dfYWN0aW9uX2J1dHRvbicpKVxyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNCdXR0b25zUGVyUm93W3RoaXMubGFzdFN1YmplY3RSb3dJbmRleF0gPSByb3dBY3Rpb25CdXR0b25zXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVudUZvckxhc3RSb3coKVxyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMucmVwZXRpdGlvbkxpbmVzSGF2ZUJlZW5DcmVhdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFN1YmplY3RSb3cgPSBudWxsXHJcbiAgICAgICAgICAgIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbiA9IG51bGxcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25NZW51ID0gbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVNZW51Rm9yTGFzdFJvdygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVBY3Rpb25NZW51QnV0dG9uKHRoaXMubGFzdFN1YmplY3RSb3cpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNZW51SW5Sb3dUaGVuQXBwZW5kQ2hpbGRyZW4odGhpcy5sYXN0U3ViamVjdFJvdywgdGhpcy5hY3Rpb25zQnV0dG9uc1BlclJvd1t0aGlzLmxhc3RTdWJqZWN0Um93SW5kZXhdKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IHJvdyBcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQWN0aW9uTWVudUJ1dHRvbihyb3cpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb25fbWVudV9idXR0b24nKVxyXG4gICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbikgfHwgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgndGQnLCAnYWN0aW9uX21lbnVfYnV0dG9uJylcclxuICAgICAgICAgICAgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uLmlubmVySFRNTCA9IGA8cCBjbGFzcz0naG90X2RvZ19tZW51X2NpcmNsZSc+PC9wPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz0naG90X2RvZ19tZW51X2NpcmNsZSc+PC9wPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz0naG90X2RvZ19tZW51X2NpcmNsZSc+PC9wPmBcclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbilcclxuICAgICAgICAgICAgdGhpcy5yb3dBY3Rpb25NZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVBY3Rpb25NZW51T2ZUaGVSb3cuYmluZCh0aGlzLCByb3cpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVSb3dFbGVtZW50fSByb3cgXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZU1lbnVJblJvd1RoZW5BcHBlbmRDaGlsZHJlbihyb3csIGZ1dHVyQ2hpbGRyZW4pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25NZW51ID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnYWN0aW9uX21lbnUnKVxyXG4gICAgICAgIGZ1dHVyQ2hpbGRyZW4uZm9yRWFjaChmdXR1ckNoaWxkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25NZW51LmFwcGVuZENoaWxkKGZ1dHVyQ2hpbGQpXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmFjdGlvbk1lbnUuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpXHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRoaXMuYWN0aW9uTWVudSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVSb3dFbGVtZW50fSByb3cgXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZUFjdGlvbk1lbnVPZlRoZVJvdyhyb3cpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJvd0FjdGlvbk1lbnUgPSByb3cubGFzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgIGlmKHJvd0FjdGlvbk1lbnUuaGFzQXR0cmlidXRlKCdoaWRkZW4nKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpXHJcbiAgICB7XHJcbiAgICAgICAgcm93QWN0aW9uTWVudS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXHJcbiAgICAgICAgcm93QWN0aW9uTWVudS5vZmZzZXRXaWR0aFxyXG4gICAgICAgIHJvd0FjdGlvbk1lbnUuY2xhc3NMaXN0LmFkZCgndmlzaWJsZV9hY3Rpb25fbWVudScpXHJcbiAgICAgICAgaWYocm93QWN0aW9uTWVudS5jaGlsZHJlbi5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgcm93QWN0aW9uTWVudS5jbGFzc0xpc3QuYWRkKCd0aHJlZV9jaGlsZHJlbicpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGVSb3dBY3Rpb25NZW51KHJvd0FjdGlvbk1lbnUpIFxyXG4gICAge1xyXG4gICAgICAgIHJvd0FjdGlvbk1lbnUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZV9hY3Rpb25fbWVudScpXHJcbiAgICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9ICgpPT57XHJcbiAgICAgICAgICAgIHJvd0FjdGlvbk1lbnUuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpXHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnRIYXNDbGFzc05hbWUocm93QWN0aW9uTWVudSwgJ3RocmVlX2NoaWxkcmVuJykpIHtcclxuICAgICAgICAgICAgICAgIHJvd0FjdGlvbk1lbnUuY2xhc3NMaXN0LnJlbW92ZSgndGhyZWVfY2hpbGRyZW4nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJvd0FjdGlvbk1lbnUucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd0FjdGlvbk1lbnUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um93QWN0aW9uQnV0dG9uc091dE9mTWVudSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5hY3Rpb25NZW51RXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRBY3Rpb25CdXR0b25zSW5QYXJlbnRSb3coKVxyXG4gICAgICAgICAgICBpZih0aGlzLmFjdGlvbk1lbnUgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHRoaXMuYWN0aW9uTWVudSkpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHRoaXMuYWN0aW9uTWVudSlcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHRoaXMucm93QWN0aW9uTWVudUJ1dHRvbilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhY3Rpb25NZW51RXhpc3RzKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0U3ViamVjdFJvdyAhPT0gbnVsbCAmJiB0aGlzLnJvd0FjdGlvbk1lbnVCdXR0b24gIT09IG51bGwgJiYgdGhpcy5hY3Rpb25NZW51ICE9PSBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kQWN0aW9uQnV0dG9uc0luUGFyZW50Um93KClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmFjdGlvbnNCdXR0b25zUGVyUm93W3RoaXMubGFzdFN1YmplY3RSb3dJbmRleF0uZm9yRWFjaChhY3Rpb25CdXR0b24gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3RSb3dzW3RoaXMubGFzdFN1YmplY3RSb3dJbmRleF0uYXBwZW5kQ2hpbGQoYWN0aW9uQnV0dG9uKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWxlcnRFbXB0eUlucHV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5tb2RhbElucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy5pc01lc3NhZ2VDb3JyZXNwb25kc1RvKGlucHV0Lm5hbWUpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRGb2N1c09uRWxlbWVudChpbnB1dClcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxlcnRGb2N1c1doZW5jbGljayhpbnB1dClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///505\n")}}]);