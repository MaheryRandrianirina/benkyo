"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[420],{420:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ playSubject),\n  "pauseMomentDuring": () => (/* binding */ pauseMomentDuring)\n});\n\n// EXTERNAL MODULE: ./src/ajax.js\nvar ajax = __webpack_require__(755);\n// EXTERNAL MODULE: ./src/Functions/Tools/DOMTools.js\nvar DOMTools = __webpack_require__(804);\n// EXTERNAL MODULE: ./src/Functions/Tools/Tools.js\nvar Tools = __webpack_require__(337);\n// EXTERNAL MODULE: ./src/AbstractClasses/DOMInteractions.js\nvar DOMInteractions = __webpack_require__(941);\n;// CONCATENATED MODULE: ./src/AbstractClasses/PlaySubjectRevisionDOMInteractions.js\nfunction _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\nvar PlaySubjectRevisionDOMInteractions = /*#__PURE__*/function (_DOMInteractions) {\n  _inherits(PlaySubjectRevisionDOMInteractions, _DOMInteractions);\n\n  var _super = _createSuper(PlaySubjectRevisionDOMInteractions);\n\n  function PlaySubjectRevisionDOMInteractions() {\n    var _this;\n\n    _classCallCheck(this, PlaySubjectRevisionDOMInteractions);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), "formAction", "/stop-revision");\n\n    _defineProperty(_assertThisInitialized(_this), "notificationClassName", \'subject-revision-stopped\');\n\n    _this.anotherTimeButtons;\n    _this.circular;\n    _this.dataMustBeSentToserverInConfirmation = false;\n    /**\r\n     * la valeur du temps à t = 0 cad au début quand la revision vient de commencer\r\n     * La véritable valeur c\'est 0 mais la valeur actuelle est juste pour les tests\r\n     * @var defaultTimeValue\r\n     */\n\n    _this.defaultTimeValue = 1490;\n    _this.homeContentSection;\n    _this.intervalOfChronometer;\n    _this.pauseButton;\n    _this.playButton;\n    _this.otherPlayButton;\n    _this.playedRevisionContainer;\n    _this.playedRevisionInfosContainer;\n    _this.revisionBodies;\n    _this.revisionHead;\n    _this.stopButton;\n    _this.time = _this.defaultTimeValue;\n    _this.timeForRevisionChrono = _this.defaultTimeValue;\n    _this.pomodoroDuration = 25; // in minutes\n\n    _this.timeInterval = 0;\n    return _this;\n  }\n\n  _createClass(PlaySubjectRevisionDOMInteractions, [{\n    key: "handlePlayButtonClick",\n    value: function handlePlayButtonClick(e) {\n      this.declareInstanceVar(e);\n      this.activePlayedRevision();\n      this.clickOnAnotherTimeButton();\n      this.appendNewButtons();\n      this.pomodoroInterval();\n      this.createChronometer(this.pomodoroDuration, this.timeForRevisionChrono);\n      this.checkForPauseButtonClick();\n      (0,ajax/* get */.U)("/array-calendar-content");\n      this.playButton.removeEventListener(\'click\', playSubject);\n    }\n  }, {\n    key: "declareInstanceVar",\n    value: function declareInstanceVar(e) {\n      this.playButton = e.target;\n      this.homeContentSection = document.querySelector(\'.content\');\n      this.playedRevisionContainer = this.playButton.parentElement.parentElement.parentElement.parentElement;\n      this.playedRevisionInfosContainer = this.createElement(\'div\', "played-revision-container");\n      this.notplayedRevisionInfosContainer = this.createElement(\'div\', "not-played-revision-container");\n      this.revisionHead = this.homeContentSection.querySelector(\'.revision_head\');\n      this.revisionHeadClone = this.revisionHead.cloneNode(true);\n      this.revisionBodies = (0,Tools/* createArray */.Ri)(this.homeContentSection.querySelectorAll(\'.revision_body\'));\n      this.anotherTimeButtons = document.querySelectorAll(\'.another-time-revision-button\');\n    }\n  }, {\n    key: "activePlayedRevision",\n    value: function activePlayedRevision() {\n      var _this$revisionBodies,\n          _this2 = this;\n\n      (_this$revisionBodies = this.revisionBodies) === null || _this$revisionBodies === void 0 ? void 0 : _this$revisionBodies.forEach(function (revisionBody) {\n        if (revisionBody !== _this2.playedRevisionContainer) {\n          _this2.notplayedRevisionInfosContainer.appendChild(_this2.revisionHeadClone);\n\n          _this2.notplayedRevisionInfosContainer.appendChild(revisionBody);\n\n          _this2.homeContentSection.appendChild(_this2.notplayedRevisionInfosContainer);\n        } else {\n          _this2.playedRevisionInfosContainer.appendChild(_this2.revisionHead);\n\n          _this2.playedRevisionInfosContainer.appendChild(revisionBody);\n\n          _this2.homeContentSection.appendChild(_this2.playedRevisionInfosContainer);\n        }\n\n        if (window.innerWidth > 600) {\n          _this2.playedRevisionInfosContainer.classList.add(\'active-revision\');\n        } else {\n          _this2.playedRevisionInfosContainer.classList.add(\'active-sm-revision\');\n        }\n\n        _this2.notplayedRevisionInfosContainer.classList.add(\'not-active-revisions\');\n      });\n    }\n  }, {\n    key: "clickOnAnotherTimeButton",\n    value: function clickOnAnotherTimeButton() {\n      this.anotherTimeButtons.forEach(function (button) {\n        button.style.display = "none";\n      });\n    }\n  }, {\n    key: "appendNewButtons",\n    value: function appendNewButtons() {\n      this.replacePlayToPauseButton();\n      this.appendStopButtonToButtonsGroupThenListenToClick();\n    }\n  }, {\n    key: "replacePlayToPauseButton",\n    value: function replacePlayToPauseButton() {\n      var playContainer = this.playButton.parentElement;\n      this.pauseButton = this.createElement(\'i\', \'fas fa-pause revision-button revision-pause\');\n      playContainer.replaceWith(this.pauseButton);\n    }\n  }, {\n    key: "appendStopButtonToButtonsGroupThenListenToClick",\n    value: function appendStopButtonToButtonsGroupThenListenToClick() {\n      var _this$stopButton;\n\n      var stopButtonContainer = this.createElement(\'div\', \'stop_button\');\n      this.stopButton = this.createElement(\'i\', \'fas fa-stop stop\');\n      stopButtonContainer.appendChild(this.stopButton);\n      this.playedRevisionContainer.querySelector(\'.buttons\').appendChild(stopButtonContainer);\n      (_this$stopButton = this.stopButton) === null || _this$stopButton === void 0 ? void 0 : _this$stopButton.addEventListener(\'click\', this.stopCurrentRevision.bind(this));\n    }\n  }, {\n    key: "stopCurrentRevision",\n    value: function stopCurrentRevision(e) {\n      e.preventDefault();\n      var stop = e.target;\n      var playedSubjectContainer = stop.parentElement;\n      this.playedSubjectContainerChildren = (0,Tools/* createArray */.Ri)(playedSubjectContainer.children);\n      var dialog = this.createModal("sure_modal", "\\n        <p>\\xCAtes-vous s\\xFBr que la revision de cette mati\\xE8re soit finie ?</p>\\n        <button class=\'sure\'>Oui, j\'en suis sur</button><button class=\'no\'>Annuler</button>\\n        ");\n      this.handleActionsInModalContent();\n    }\n    /**\r\n     * \r\n     * @param {number | null} interval \r\n     * @param {boolean} dataMustBeSentToserverInConfirmation\r\n     */\n\n  }, {\n    key: "handleActionsInModalContent",\n    value: function handleActionsInModalContent() {\n      var interval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var dataMustBeSentToserverInConfirmation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.dataMustBeSentToserverInConfirmation = dataMustBeSentToserverInConfirmation;\n      this.timeInterval = interval;\n\n      _get(_getPrototypeOf(PlaySubjectRevisionDOMInteractions.prototype), "handleActionsInModalContent", this).call(this);\n    }\n  }, {\n    key: "handleActionsInModalConfirmation",\n    value: function handleActionsInModalConfirmation() {\n      _get(_getPrototypeOf(PlaySubjectRevisionDOMInteractions.prototype), "handleActionsInModalConfirmation", this).call(this);\n\n      this.modal.querySelector(\'.sure\').addEventListener(\'click\', this.handleSureClick.bind(this));\n    }\n  }, {\n    key: "handleSureClick",\n    value: function handleSureClick() {\n      if (!this.dataMustBeSentToserverInConfirmation) {\n        clearInterval(this.timeInterval);\n        var pauseButton = document.querySelector(\'.revision-pause\');\n        this.otherPlayButton = this.createElement(\'i\', \'fas fa-play revision-button other-revision-play\');\n        pauseButton.replaceWith(this.otherPlayButton);\n        this.resetTimeToHisDefaultValue();\n        this.closeModal();\n        pauseMomentDuring(0.25);\n        this.continueRevisionAfterPause();\n      } else {\n        this.closeModal();\n        this.createDataToPostObj();\n        this.postContentWithNotificationThenReload();\n        this.playedSubjectContainerChildren.forEach(function (child) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(child);\n        });\n      }\n    }\n  }, {\n    key: "resetTimeToHisDefaultValue",\n    value: function resetTimeToHisDefaultValue() {\n      this.time = this.defaultTimeValue;\n    }\n  }, {\n    key: "continueRevisionAfterPause",\n    value: function continueRevisionAfterPause() {\n      var _this3 = this;\n\n      setTimeout(function () {\n        if ((0,Tools/* isUndefined */.o8)(_this3.otherPlayButton)) {\n          _this3.playButton.addEventListener(\'click\', function () {\n            _this3.playButton.replaceWith(_this3.pauseButton);\n\n            _this3.pomodoroInterval();\n\n            _this3.createChronometer(_this3.pomodoroDuration, _this3.timeForRevisionChrono);\n          });\n        } else {\n          _this3.otherPlayButton.addEventListener(\'click\', function () {\n            console.log(\'click\');\n\n            _this3.otherPlayButton.replaceWith(_this3.pauseButton);\n\n            _this3.pomodoroInterval();\n\n            _this3.createChronometer(_this3.pomodoroDuration, _this3.timeForRevisionChrono);\n          });\n        }\n      }, 15000); // ON VA CHANGER LA FONCTION POUR QUE CETTE VALEUR SOIT DYNAMIQUE\n    }\n  }, {\n    key: "pomodoroInterval",\n    value: function pomodoroInterval() {\n      var _this4 = this;\n\n      var timeToStop = this.pomodoroDuration * 60;\n      this.interval = setInterval(function () {\n        _this4.time++;\n\n        if (_this4.time === timeToStop) {\n          _this4.createModal("pause_modal", "\\n                <p>C\'est le moment de faire une pause ! <span style=\'font-weight:bold;\'>Mettez une alarme de 5 min<span></p>\\n                <button class=\'sure\'>OK</button><button class=\'no\'>Annuler</button>\\n                ");\n\n          _this4.handleActionsInModalContent(_this4.interval);\n        }\n      }, 1000);\n    }\n  }, {\n    key: "createChronometer",\n    value: function createChronometer(duration, timeForStop) {\n      var _this5 = this;\n\n      var durationSeconds = duration * 60;\n      this.createCircular();\n      this.intervalOfChronometer = setInterval(function () {\n        durationSeconds--;\n        var minutesLeft = Math.floor(durationSeconds / 60);\n        var secondsLeft = durationSeconds % 60;\n        inner.innerHTML = "<p id=\'chronometer\'>".concat(minutesLeft, ":").concat(secondsLeft, "</p>");\n\n        if (durationSeconds === timeForStop) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(_this5.circular);\n          _this5.circular = undefined;\n          clearInterval(_this5.intervalOfChronometer);\n        }\n      }, 1000);\n    }\n  }, {\n    key: "createCircle",\n    value: function createCircle() {\n      this.circular = this.createElement("div", "circular");\n      var inner = this.createElement("div", "inner");\n      var circle = this.createElement("div", "circle");\n      var leftBar = this.createElement("div", "bar left");\n      var right = this.createElement("div", "bar right");\n      var leftProgress = this.createElement("div", "progress");\n      var rightProgress = this.createElement("div", "progress");\n      this.playedRevisionInfosContainer.appendChild(this.circular);\n      this.circular.appendChild(inner);\n      this.circular.appendChild(circle);\n      circle.appendChild(leftBar);\n      circle.appendChild(right);\n      leftBar.appendChild(leftProgress);\n      right.appendChild(rightProgress);\n      leftProgress.style.animationDuration = (durationSeconds - timeForStop) / 2 + \'s\';\n      rightProgress.style.animationDelay = (durationSeconds - timeForStop) / 2 + \'s\';\n      rightProgress.style.animationDuration = (durationSeconds - timeForStop) / 2 + \'s\';\n    }\n  }, {\n    key: "createDataToPostObj",\n    value: function createDataToPostObj() {\n      var _this6 = this;\n\n      var hiddenInputs = this.playButton.parentElement.parentElement.parentElement.querySelectorAll("input[type=\'hidden\']");\n      console.log(hiddenInputs);\n      hiddenInputs.forEach(function (hiddenInput) {\n        _this6.dataToPostObj[hiddenInput.name] = hiddenInput.value;\n      });\n      this.dataToPostObj["status"] = 1;\n    }\n  }, {\n    key: "checkForPauseButtonClick",\n    value: function checkForPauseButtonClick() {\n      var _this$pauseButton;\n\n      (_this$pauseButton = this.pauseButton) === null || _this$pauseButton === void 0 ? void 0 : _this$pauseButton.addEventListener(\'click\', this.handlePauseButtonClick.bind(this));\n    }\n  }, {\n    key: "handlePauseButtonClick",\n    value: function handlePauseButtonClick() {\n      clearInterval(this.interval);\n      clearInterval(this.intervalOfChronometer);\n      this.resetTimeToHisDefaultValue();\n      this.stopButton.removeEventListener(\'click\', this.stopCurrentRevision);\n\n      if (!(0,Tools/* isUndefined */.o8)(this.circular)) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(this.circular);\n      }\n\n      pauseMomentDuring(0.25);\n      this.otherPlayButton = this.createElement(\'i\', \'fas fa-play revision-button other-revision-play\');\n      this.pauseButton.replaceWith(this.otherPlayButton);\n      this.continueRevisionAfterPause();\n    }\n  }]);\n\n  return PlaySubjectRevisionDOMInteractions;\n}(DOMInteractions/* default */.Z);\n\n\n;// CONCATENATED MODULE: ./src/play.js\n\nvar domInteractions = new PlaySubjectRevisionDOMInteractions();\n/**\r\n * Launch the revision\r\n * @param {Event} e \r\n */\n\nfunction playSubject(e) {\n  e.preventDefault();\n  domInteractions.handlePlayButtonClick(e);\n}\n/**\r\n * @param {number} duration durée de la pause en minutes\r\n */\n\nfunction pauseMomentDuring(duration) {\n  var timeBegin = 0;\n  var pauseDuration = duration * 60;\n  domInteractions.createChronometer(duration, timeBegin);\n  var intervalDuringPause = setInterval(function () {\n    timeBegin++;\n\n    if (timeBegin === pauseDuration) {\n      clearInterval(intervalDuringPause);\n      domInteractions.createModal(\'notification\', "\\n            <p>La pause est termin\\xE9e !</p>\\n            <button class=\'ok\'>OK</button>\\n            ");\n      domInteractions.handleActionsInModalContent();\n    }\n  }, 1000);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7OztBQUdBO0FBQ0E7O0FBQUE7O0FBQ0E7O0FBREE7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBeEJBO0FBeUJBOzs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWhSQTs7OztBQ05BO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvQWJzdHJhY3RDbGFzc2VzL1BsYXlTdWJqZWN0UmV2aXNpb25ET01JbnRlcmFjdGlvbnMuanM/MzVmNiIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvcGxheS5qcz80NjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldCB9IGZyb20gXCIuLi9hamF4XCI7XHJcbmltcG9ydCB7IHJlbW92ZUVsZW1lbnRGcm9tRE9NIH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9Ub29scy9ET01Ub29sc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVBcnJheSwgaXNVbmRlZmluZWQgfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1Rvb2xzL1Rvb2xzXCI7XHJcbmltcG9ydCBwbGF5U3ViamVjdCwgeyBwYXVzZU1vbWVudER1cmluZyB9IGZyb20gXCIuLi9wbGF5XCI7XHJcbmltcG9ydCBET01JbnRlcmFjdGlvbnMgZnJvbSBcIi4vRE9NSW50ZXJhY3Rpb25zXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5U3ViamVjdFJldmlzaW9uRE9NSW50ZXJhY3Rpb25zIGV4dGVuZHMgRE9NSW50ZXJhY3Rpb25zIHtcclxuICAgIGZvcm1BY3Rpb24gPSBcIi9zdG9wLXJldmlzaW9uXCJcclxuICAgIG5vdGlmaWNhdGlvbkNsYXNzTmFtZSA9ICdzdWJqZWN0LXJldmlzaW9uLXN0b3BwZWQnXHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgc3VwZXIoKSBcclxuICAgICAgICB0aGlzLmFub3RoZXJUaW1lQnV0dG9uc1xyXG4gICAgICAgIHRoaXMuY2lyY3VsYXJcclxuICAgICAgICB0aGlzLmRhdGFNdXN0QmVTZW50VG9zZXJ2ZXJJbkNvbmZpcm1hdGlvbiA9IGZhbHNlXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogbGEgdmFsZXVyIGR1IHRlbXBzIMOgIHQgPSAwIGNhZCBhdSBkw6lidXQgcXVhbmQgbGEgcmV2aXNpb24gdmllbnQgZGUgY29tbWVuY2VyXHJcbiAgICAgICAgICogTGEgdsOpcml0YWJsZSB2YWxldXIgYydlc3QgMCBtYWlzIGxhIHZhbGV1ciBhY3R1ZWxsZSBlc3QganVzdGUgcG91ciBsZXMgdGVzdHNcclxuICAgICAgICAgKiBAdmFyIGRlZmF1bHRUaW1lVmFsdWVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRlZmF1bHRUaW1lVmFsdWUgPSAxNDkwXHJcbiAgICAgICAgdGhpcy5ob21lQ29udGVudFNlY3Rpb25cclxuICAgICAgICB0aGlzLmludGVydmFsT2ZDaHJvbm9tZXRlclxyXG4gICAgICAgIHRoaXMucGF1c2VCdXR0b25cclxuICAgICAgICB0aGlzLnBsYXlCdXR0b25cclxuICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvblxyXG4gICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25Db250YWluZXJcclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXJcclxuICAgICAgICB0aGlzLnJldmlzaW9uQm9kaWVzXHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkhlYWQgXHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uXHJcbiAgICAgICAgdGhpcy50aW1lID0gdGhpcy5kZWZhdWx0VGltZVZhbHVlIFxyXG4gICAgICAgIHRoaXMudGltZUZvclJldmlzaW9uQ2hyb25vID0gdGhpcy5kZWZhdWx0VGltZVZhbHVlXHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0R1cmF0aW9uID0gMjUgLy8gaW4gbWludXRlc1xyXG4gICAgICAgIHRoaXMudGltZUludGVydmFsID0gMFxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVBsYXlCdXR0b25DbGljayhlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZGVjbGFyZUluc3RhbmNlVmFyKGUpXHJcbiAgICAgICAgdGhpcy5hY3RpdmVQbGF5ZWRSZXZpc2lvbigpXHJcbiAgICAgICAgdGhpcy5jbGlja09uQW5vdGhlclRpbWVCdXR0b24oKVxyXG4gICAgICAgIHRoaXMuYXBwZW5kTmV3QnV0dG9ucygpXHJcbiAgICAgICAgdGhpcy5wb21vZG9yb0ludGVydmFsKClcclxuICAgICAgICB0aGlzLmNyZWF0ZUNocm9ub21ldGVyKHRoaXMucG9tb2Rvcm9EdXJhdGlvbiwgdGhpcy50aW1lRm9yUmV2aXNpb25DaHJvbm8pXHJcbiAgICAgICAgdGhpcy5jaGVja0ZvclBhdXNlQnV0dG9uQ2xpY2soKVxyXG4gICAgICAgIGdldChcIi9hcnJheS1jYWxlbmRhci1jb250ZW50XCIpXHJcbiAgICAgICAgdGhpcy5wbGF5QnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheVN1YmplY3QpXHJcbiAgICB9XHJcblxyXG4gICAgZGVjbGFyZUluc3RhbmNlVmFyKGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wbGF5QnV0dG9uID0gZS50YXJnZXRcclxuICAgICAgICB0aGlzLmhvbWVDb250ZW50U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uQ29udGFpbmVyID0gdGhpcy5wbGF5QnV0dG9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIFwicGxheWVkLXJldmlzaW9uLWNvbnRhaW5lclwiKVxyXG4gICAgICAgIHRoaXMubm90cGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgXCJub3QtcGxheWVkLXJldmlzaW9uLWNvbnRhaW5lclwiKVxyXG4gICAgICAgIHRoaXMucmV2aXNpb25IZWFkID0gdGhpcy5ob21lQ29udGVudFNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnJldmlzaW9uX2hlYWQnKVxyXG4gICAgICAgIHRoaXMucmV2aXNpb25IZWFkQ2xvbmUgPSB0aGlzLnJldmlzaW9uSGVhZCAuY2xvbmVOb2RlKHRydWUpXHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkJvZGllcyA9IGNyZWF0ZUFycmF5KHRoaXMuaG9tZUNvbnRlbnRTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpc2lvbl9ib2R5JykpXHJcbiAgICAgICAgdGhpcy5hbm90aGVyVGltZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYW5vdGhlci10aW1lLXJldmlzaW9uLWJ1dHRvbicpXHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZlUGxheWVkUmV2aXNpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmV2aXNpb25Cb2RpZXM/LmZvckVhY2gocmV2aXNpb25Cb2R5ID0+IHtcclxuICAgICAgICAgICAgaWYocmV2aXNpb25Cb2R5ICE9PSB0aGlzLnBsYXllZFJldmlzaW9uQ29udGFpbmVyKXtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90cGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJldmlzaW9uSGVhZENsb25lKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RwbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyLmFwcGVuZENoaWxkKHJldmlzaW9uQm9keSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9tZUNvbnRlbnRTZWN0aW9uLmFwcGVuZENoaWxkKHRoaXMubm90cGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZXZpc2lvbkhlYWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIuYXBwZW5kQ2hpbGQocmV2aXNpb25Cb2R5KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ob21lQ29udGVudFNlY3Rpb24uYXBwZW5kQ2hpbGQodGhpcy5wbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoID4gNjAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXJldmlzaW9uJylcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zbS1yZXZpc2lvbicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ub3RwbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25vdC1hY3RpdmUtcmV2aXNpb25zJylcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrT25Bbm90aGVyVGltZUJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5hbm90aGVyVGltZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG4gICAgICAgICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmROZXdCdXR0b25zKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlcGxhY2VQbGF5VG9QYXVzZUJ1dHRvbigpXHJcbiAgICAgICAgdGhpcy5hcHBlbmRTdG9wQnV0dG9uVG9CdXR0b25zR3JvdXBUaGVuTGlzdGVuVG9DbGljaygpXHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZVBsYXlUb1BhdXNlQnV0dG9uKClcclxuICAgIHtcclxuICAgICAgICBsZXQgcGxheUNvbnRhaW5lciA9IHRoaXMucGxheUJ1dHRvbi5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgdGhpcy5wYXVzZUJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnaScsICdmYXMgZmEtcGF1c2UgcmV2aXNpb24tYnV0dG9uIHJldmlzaW9uLXBhdXNlJylcclxuICAgICAgICBwbGF5Q29udGFpbmVyLnJlcGxhY2VXaXRoKHRoaXMucGF1c2VCdXR0b24pXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kU3RvcEJ1dHRvblRvQnV0dG9uc0dyb3VwVGhlbkxpc3RlblRvQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBzdG9wQnV0dG9uQ29udGFpbmVyID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnc3RvcF9idXR0b24nKVxyXG4gICAgICAgIHRoaXMuc3RvcEJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnaScsICdmYXMgZmEtc3RvcCBzdG9wJylcclxuICAgICAgICBzdG9wQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc3RvcEJ1dHRvbilcclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25zJykuYXBwZW5kQ2hpbGQoc3RvcEJ1dHRvbkNvbnRhaW5lcilcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdG9wQ3VycmVudFJldmlzaW9uLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgc3RvcEN1cnJlbnRSZXZpc2lvbihlKVxyXG4gICAge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgICAgICBsZXQgc3RvcCA9IGUudGFyZ2V0XHJcbiAgICAgICAgbGV0IHBsYXllZFN1YmplY3RDb250YWluZXIgPSBzdG9wLnBhcmVudEVsZW1lbnRcclxuICAgICAgICB0aGlzLnBsYXllZFN1YmplY3RDb250YWluZXJDaGlsZHJlbiA9IGNyZWF0ZUFycmF5KHBsYXllZFN1YmplY3RDb250YWluZXIuY2hpbGRyZW4pXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGRpYWxvZyA9IHRoaXMuY3JlYXRlTW9kYWwoXCJzdXJlX21vZGFsXCIsIGBcclxuICAgICAgICA8cD7DinRlcy12b3VzIHPDu3IgcXVlIGxhIHJldmlzaW9uIGRlIGNldHRlIG1hdGnDqHJlIHNvaXQgZmluaWUgPzwvcD5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPSdzdXJlJz5PdWksIGonZW4gc3VpcyBzdXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSdubyc+QW5udWxlcjwvYnV0dG9uPlxyXG4gICAgICAgIGApXHJcbiAgICAgICAgdGhpcy5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQoKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlciB8IG51bGx9IGludGVydmFsIFxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkYXRhTXVzdEJlU2VudFRvc2VydmVySW5Db25maXJtYXRpb25cclxuICAgICAqL1xyXG4gICAgaGFuZGxlQWN0aW9uc0luTW9kYWxDb250ZW50KGludGVydmFsID0gbnVsbCwgZGF0YU11c3RCZVNlbnRUb3NlcnZlckluQ29uZmlybWF0aW9uID0gZmFsc2UpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5kYXRhTXVzdEJlU2VudFRvc2VydmVySW5Db25maXJtYXRpb24gPSBkYXRhTXVzdEJlU2VudFRvc2VydmVySW5Db25maXJtYXRpb25cclxuICAgICAgICB0aGlzLnRpbWVJbnRlcnZhbCA9IGludGVydmFsXHJcbiAgICAgICAgc3VwZXIuaGFuZGxlQWN0aW9uc0luTW9kYWxDb250ZW50KClcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBY3Rpb25zSW5Nb2RhbENvbmZpcm1hdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgc3VwZXIuaGFuZGxlQWN0aW9uc0luTW9kYWxDb25maXJtYXRpb24oKVxyXG4gICAgICAgIHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLnN1cmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICB0aGlzLmhhbmRsZVN1cmVDbGljay5iaW5kKHRoaXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN1cmVDbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMuZGF0YU11c3RCZVNlbnRUb3NlcnZlckluQ29uZmlybWF0aW9uKXtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVJbnRlcnZhbClcclxuICAgICAgICAgICAgbGV0IHBhdXNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJldmlzaW9uLXBhdXNlJylcclxuICAgICAgICAgICAgdGhpcy5vdGhlclBsYXlCdXR0b24gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2knLCAnZmFzIGZhLXBsYXkgcmV2aXNpb24tYnV0dG9uIG90aGVyLXJldmlzaW9uLXBsYXknKVxyXG4gICAgICAgICAgICBwYXVzZUJ1dHRvbi5yZXBsYWNlV2l0aCh0aGlzLm90aGVyUGxheUJ1dHRvbilcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUaW1lVG9IaXNEZWZhdWx0VmFsdWUoKVxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKVxyXG4gICAgICAgICAgICBwYXVzZU1vbWVudER1cmluZygwLjI1KVxyXG4gICAgICAgICAgICB0aGlzLmNvbnRpbnVlUmV2aXNpb25BZnRlclBhdXNlKCkgXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURhdGFUb1Bvc3RPYmooKVxyXG4gICAgICAgICAgICB0aGlzLnBvc3RDb250ZW50V2l0aE5vdGlmaWNhdGlvblRoZW5SZWxvYWQoKVxyXG4gICAgICAgICAgICB0aGlzLnBsYXllZFN1YmplY3RDb250YWluZXJDaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKGNoaWxkKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICByZXNldFRpbWVUb0hpc0RlZmF1bHRWYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50aW1lID0gdGhpcy5kZWZhdWx0VGltZVZhbHVlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnRpbnVlUmV2aXNpb25BZnRlclBhdXNlKCl7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICBpZihpc1VuZGVmaW5lZCh0aGlzLm90aGVyUGxheUJ1dHRvbikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXlCdXR0b24ucmVwbGFjZVdpdGgodGhpcy5wYXVzZUJ1dHRvbilcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbW9kb3JvSW50ZXJ2YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2hyb25vbWV0ZXIodGhpcy5wb21vZG9yb0R1cmF0aW9uLCB0aGlzLnRpbWVGb3JSZXZpc2lvbkNocm9ubylcclxuICAgICAgICAgICAgICAgIH0pICBcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrJylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvbi5yZXBsYWNlV2l0aCh0aGlzLnBhdXNlQnV0dG9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9tb2Rvcm9JbnRlcnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVDaHJvbm9tZXRlcih0aGlzLnBvbW9kb3JvRHVyYXRpb24sIHRoaXMudGltZUZvclJldmlzaW9uQ2hyb25vKVxyXG4gICAgICAgICAgICAgICAgfSkgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSwgMTUwMDApIC8vIE9OIFZBIENIQU5HRVIgTEEgRk9OQ1RJT04gUE9VUiBRVUUgQ0VUVEUgVkFMRVVSIFNPSVQgRFlOQU1JUVVFXHJcbiAgICB9XHJcblxyXG4gICAgcG9tb2Rvcm9JbnRlcnZhbCgpe1xyXG4gICAgICAgIGxldCB0aW1lVG9TdG9wID0gdGhpcy5wb21vZG9yb0R1cmF0aW9uICogNjBcclxuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCk9PntcclxuICAgICAgICAgICAgdGhpcy50aW1lKytcclxuICAgICAgICAgICAgaWYodGhpcy50aW1lID09PSB0aW1lVG9TdG9wKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTW9kYWwoXCJwYXVzZV9tb2RhbFwiLCBgXHJcbiAgICAgICAgICAgICAgICA8cD5DJ2VzdCBsZSBtb21lbnQgZGUgZmFpcmUgdW5lIHBhdXNlICEgPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQ7Jz5NZXR0ZXogdW5lIGFsYXJtZSBkZSA1IG1pbjxzcGFuPjwvcD5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J3N1cmUnPk9LPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0nbm8nPkFubnVsZXI8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIGApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFjdGlvbnNJbk1vZGFsQ29udGVudCh0aGlzLmludGVydmFsKSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2hyb25vbWV0ZXIoZHVyYXRpb24sIHRpbWVGb3JTdG9wKXtcclxuICAgICAgICBsZXQgZHVyYXRpb25TZWNvbmRzID0gZHVyYXRpb24gKiA2MCBcclxuICAgICAgICB0aGlzLmNyZWF0ZUNpcmN1bGFyKClcclxuICAgIFxyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxPZkNocm9ub21ldGVyID0gc2V0SW50ZXJ2YWwoKCk9PntcclxuICAgICAgICAgICAgZHVyYXRpb25TZWNvbmRzLS1cclxuICAgICAgICAgICAgbGV0IG1pbnV0ZXNMZWZ0ID0gTWF0aC5mbG9vcihkdXJhdGlvblNlY29uZHMgLyA2MCkgXHJcbiAgICAgICAgICAgIGxldCBzZWNvbmRzTGVmdCA9IGR1cmF0aW9uU2Vjb25kcyAlIDYwXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbm5lci5pbm5lckhUTUwgPSBgPHAgaWQ9J2Nocm9ub21ldGVyJz4ke21pbnV0ZXNMZWZ0fToke3NlY29uZHNMZWZ0fTwvcD5gXHJcbiAgICAgICAgICAgIGlmKGR1cmF0aW9uU2Vjb25kcyA9PT0gdGltZUZvclN0b3Ape1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00odGhpcy5jaXJjdWxhcilcclxuICAgICAgICAgICAgICAgIHRoaXMuY2lyY3VsYXIgPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbE9mQ2hyb25vbWV0ZXIpXHJcbiAgICAgICAgICAgIH0gICAgICBcclxuICAgICAgICB9LCAxMDAwKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNpcmNsZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jaXJjdWxhciA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImNpcmN1bGFyXCIpXHJcbiAgICAgICAgbGV0IGlubmVyID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiaW5uZXJcIilcclxuICAgICAgICBsZXQgY2lyY2xlID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiY2lyY2xlXCIpXHJcbiAgICAgICAgbGV0IGxlZnRCYXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJiYXIgbGVmdFwiKVxyXG4gICAgICAgIGxldCByaWdodCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImJhciByaWdodFwiKVxyXG4gICAgICAgIGxldCBsZWZ0UHJvZ3Jlc3MgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJwcm9ncmVzc1wiKVxyXG4gICAgICAgIGxldCByaWdodFByb2dyZXNzID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwicHJvZ3Jlc3NcIilcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jaXJjdWxhcilcclxuICAgICAgICB0aGlzLmNpcmN1bGFyLmFwcGVuZENoaWxkKGlubmVyKVxyXG4gICAgICAgIHRoaXMuY2lyY3VsYXIuYXBwZW5kQ2hpbGQoY2lyY2xlKVxyXG5cclxuICAgICAgICBjaXJjbGUuYXBwZW5kQ2hpbGQobGVmdEJhcilcclxuICAgICAgICBjaXJjbGUuYXBwZW5kQ2hpbGQocmlnaHQpXHJcbiAgICAgICAgbGVmdEJhci5hcHBlbmRDaGlsZChsZWZ0UHJvZ3Jlc3MpXHJcbiAgICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQocmlnaHRQcm9ncmVzcylcclxuXHJcbiAgICAgICAgbGVmdFByb2dyZXNzLnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gKChkdXJhdGlvblNlY29uZHMgLSB0aW1lRm9yU3RvcCkgLyAyKSArICdzJ1xyXG4gICAgICAgIHJpZ2h0UHJvZ3Jlc3Muc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSAoKGR1cmF0aW9uU2Vjb25kcyAtIHRpbWVGb3JTdG9wKSAvIDIpICsgJ3MnXHJcbiAgICAgICAgcmlnaHRQcm9ncmVzcy5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9ICgoZHVyYXRpb25TZWNvbmRzIC0gdGltZUZvclN0b3ApIC8gMikgKyAncydcclxuICAgIH1cclxuICAgIGNyZWF0ZURhdGFUb1Bvc3RPYmooKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBoaWRkZW5JbnB1dHMgPSB0aGlzLnBsYXlCdXR0b24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9J2hpZGRlbiddXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2coaGlkZGVuSW5wdXRzKVxyXG4gICAgICAgIGhpZGRlbklucHV0cy5mb3JFYWNoKGhpZGRlbklucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhVG9Qb3N0T2JqW2hpZGRlbklucHV0Lm5hbWVdID0gaGlkZGVuSW5wdXQudmFsdWVcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuZGF0YVRvUG9zdE9ialtcInN0YXR1c1wiXSA9IDFcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0ZvclBhdXNlQnV0dG9uQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucGF1c2VCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVQYXVzZUJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlUGF1c2VCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbE9mQ2hyb25vbWV0ZXIpXHJcbiAgICAgICAgdGhpcy5yZXNldFRpbWVUb0hpc0RlZmF1bHRWYWx1ZSgpXHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdG9wQ3VycmVudFJldmlzaW9uKVxyXG4gICAgICAgIGlmKCFpc1VuZGVmaW5lZCh0aGlzLmNpcmN1bGFyKSl7XHJcbiAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRGcm9tRE9NKHRoaXMuY2lyY3VsYXIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhdXNlTW9tZW50RHVyaW5nKDAuMjUpXHJcbiAgICAgICAgdGhpcy5vdGhlclBsYXlCdXR0b24gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2knLCAnZmFzIGZhLXBsYXkgcmV2aXNpb24tYnV0dG9uIG90aGVyLXJldmlzaW9uLXBsYXknKVxyXG4gICAgICAgIHRoaXMucGF1c2VCdXR0b24ucmVwbGFjZVdpdGgodGhpcy5vdGhlclBsYXlCdXR0b24pXHJcbiAgICAgICAgdGhpcy5jb250aW51ZVJldmlzaW9uQWZ0ZXJQYXVzZSgpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUGxheVN1YmplY3RSZXZpc2lvbkRPTUludGVyYWN0aW9ucyBmcm9tIFwiLi9BYnN0cmFjdENsYXNzZXMvUGxheVN1YmplY3RSZXZpc2lvbkRPTUludGVyYWN0aW9uc1wiXHJcblxyXG5sZXQgZG9tSW50ZXJhY3Rpb25zID0gbmV3IFBsYXlTdWJqZWN0UmV2aXNpb25ET01JbnRlcmFjdGlvbnMoKVxyXG5cclxuLyoqXHJcbiAqIExhdW5jaCB0aGUgcmV2aXNpb25cclxuICogQHBhcmFtIHtFdmVudH0gZSBcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBsYXlTdWJqZWN0KGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBkb21JbnRlcmFjdGlvbnMuaGFuZGxlUGxheUJ1dHRvbkNsaWNrKGUpXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIGR1csOpZSBkZSBsYSBwYXVzZSBlbiBtaW51dGVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGF1c2VNb21lbnREdXJpbmcoZHVyYXRpb24pe1xyXG4gICAgbGV0IHRpbWVCZWdpbiA9IDBcclxuICAgIGNvbnN0IHBhdXNlRHVyYXRpb24gPSBkdXJhdGlvbiAqIDYwXHJcblxyXG4gICAgZG9tSW50ZXJhY3Rpb25zLmNyZWF0ZUNocm9ub21ldGVyKGR1cmF0aW9uLCB0aW1lQmVnaW4pXHJcbiAgICBjb25zdCBpbnRlcnZhbER1cmluZ1BhdXNlID0gc2V0SW50ZXJ2YWwoKCk9PntcclxuICAgICAgICB0aW1lQmVnaW4rK1xyXG4gICAgICAgIGlmKHRpbWVCZWdpbiA9PT0gcGF1c2VEdXJhdGlvbil7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxEdXJpbmdQYXVzZSlcclxuICAgICAgICAgICAgZG9tSW50ZXJhY3Rpb25zLmNyZWF0ZU1vZGFsKCdub3RpZmljYXRpb24nLCBgXHJcbiAgICAgICAgICAgIDxwPkxhIHBhdXNlIGVzdCB0ZXJtaW7DqWUgITwvcD5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nb2snPk9LPC9idXR0b24+XHJcbiAgICAgICAgICAgIGApXHJcbiAgICAgICAgICAgIGRvbUludGVyYWN0aW9ucy5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQoKVxyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMDApXHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///420\n')}}]);