"use strict";(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[802],{802:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ playSubject),\n  "pauseMomentDuring": () => (/* binding */ pauseMomentDuring)\n});\n\n// EXTERNAL MODULE: ./src/Functions/Request/ajax.js\nvar ajax = __webpack_require__(54);\n// EXTERNAL MODULE: ./src/Functions/Tools/DOMTools.js\nvar DOMTools = __webpack_require__(804);\n// EXTERNAL MODULE: ./src/Functions/Tools/Tools.js\nvar Tools = __webpack_require__(337);\n// EXTERNAL MODULE: ./src/AbstractClasses/ThereAreDataToSendWithGETRequest.js\nvar ThereAreDataToSendWithGETRequest = __webpack_require__(281);\n;// CONCATENATED MODULE: ./src/AbstractClasses/PlaySubjectRevisionDOMInteractions.js\nfunction _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\nvar PlaySubjectRevisionDOMInteractions = /*#__PURE__*/function (_ThereAreDataToSendWi) {\n  _inherits(PlaySubjectRevisionDOMInteractions, _ThereAreDataToSendWi);\n\n  var _super = _createSuper(PlaySubjectRevisionDOMInteractions);\n\n  function PlaySubjectRevisionDOMInteractions() {\n    var _this;\n\n    _classCallCheck(this, PlaySubjectRevisionDOMInteractions);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), "formAction", "/stop-revision");\n\n    _defineProperty(_assertThisInitialized(_this), "notificationClassName", \'subject-revision-stopped\');\n\n    _this.anotherTimeButtons;\n    _this.circular;\n    /**\r\n     * la valeur du temps à t = 0 cad au début quand la revision vient de commencer\r\n     * La véritable valeur c\'est 0 mais la valeur actuelle est juste pour les tests\r\n     * @var defaultTimeValue\r\n     */\n\n    _this.defaultTimeValue = 1450;\n    _this.homeContentSection;\n    _this.intervalOfChronometer;\n    _this.pauseButton;\n    _this.playButton;\n    _this.otherPlayButton;\n    _this.playedRevisionContainer;\n    _this.playedRevisionInfosContainer;\n    _this.revisionBodies;\n    _this.revisionHead;\n    _this.stopButton;\n    _this.time = _this.defaultTimeValue;\n    _this.timeForRevisionChrono = _this.defaultTimeValue;\n    _this.pomodoroDuration = 25; // in minutes\n\n    _this.pauseDurationInMinutes = 5;\n    _this.timeInterval = 0;\n    return _this;\n  }\n\n  _createClass(PlaySubjectRevisionDOMInteractions, [{\n    key: "handlePlayButtonClick",\n    value: function handlePlayButtonClick(e) {\n      this.declareInstanceVar(e);\n      this.activePlayedRevision();\n      this.clickOnAnotherTimeButton();\n      this.appendNewButtons();\n      this.pomodoroInterval();\n      this.createChronometer(this.pomodoroDuration, this.timeForRevisionChrono);\n      this.checkForPauseButtonClick();\n      (0,ajax/* get */.U)("/array-calendar-content");\n    }\n  }, {\n    key: "declareInstanceVar",\n    value: function declareInstanceVar(e) {\n      this.playButton = e.target;\n      this.homeContentSection = document.querySelector(\'.content\');\n      this.playedRevisionContainer = this.playButton.parentElement.parentElement.parentElement.parentElement;\n      this.playedRevisionInfosContainer = this.createElement(\'div\', "played-revision-container");\n      this.notplayedRevisionInfosContainer = this.createElement(\'div\', "not-played-revision-container");\n      this.revisionHead = this.homeContentSection.querySelector(\'.revision_head\');\n      this.revisionHeadClone = this.revisionHead.cloneNode(true);\n      this.revisionBodies = (0,Tools/* createArray */.Ri)(this.homeContentSection.querySelectorAll(\'.revision_body\'));\n      this.anotherTimeButtons = document.querySelectorAll(\'.another-time-revision-button\');\n    }\n  }, {\n    key: "activePlayedRevision",\n    value: function activePlayedRevision() {\n      var _this$revisionBodies,\n          _this2 = this;\n\n      (_this$revisionBodies = this.revisionBodies) === null || _this$revisionBodies === void 0 ? void 0 : _this$revisionBodies.forEach(function (revisionBody) {\n        if (revisionBody !== _this2.playedRevisionContainer) {\n          _this2.notplayedRevisionInfosContainer.appendChild(_this2.revisionHeadClone);\n\n          _this2.notplayedRevisionInfosContainer.appendChild(revisionBody);\n\n          _this2.homeContentSection.appendChild(_this2.notplayedRevisionInfosContainer);\n        } else {\n          _this2.playedRevisionInfosContainer.appendChild(_this2.revisionHead);\n\n          _this2.playedRevisionInfosContainer.appendChild(revisionBody);\n\n          _this2.homeContentSection.appendChild(_this2.playedRevisionInfosContainer);\n        }\n\n        _this2.playedRevisionInfosContainer.classList.add(\'active-revision\');\n\n        _this2.notplayedRevisionInfosContainer.classList.add(\'not-active-revisions\');\n      });\n    }\n  }, {\n    key: "clickOnAnotherTimeButton",\n    value: function clickOnAnotherTimeButton() {\n      this.anotherTimeButtons.forEach(function (button) {\n        button.style.display = "none";\n      });\n    }\n  }, {\n    key: "appendNewButtons",\n    value: function appendNewButtons() {\n      this.replacePlayToPauseButton();\n      this.appendStopButtonToButtonsGroupThenListenToClick();\n    }\n  }, {\n    key: "replacePlayToPauseButton",\n    value: function replacePlayToPauseButton() {\n      var playContainer = this.playButton.parentElement;\n      var pauseIcon = this.createElement(\'i\', \'fas fa-pause revision-button revision-pause\');\n      this.pauseButton = this.createElement(\'div\');\n      this.pauseButton.appendChild(pauseIcon);\n      playContainer.replaceWith(this.pauseButton);\n      this.playButton = undefined;\n    }\n  }, {\n    key: "appendStopButtonToButtonsGroupThenListenToClick",\n    value: function appendStopButtonToButtonsGroupThenListenToClick() {\n      var _this$stopButton;\n\n      var stopButtonContainer = this.createElement(\'div\', \'stop_button\');\n      var stopButtonIcon = this.createElement(\'i\', \'fas fa-stop stop\');\n      this.stopButton = this.createElement(\'div\');\n      this.stopButton.appendChild(stopButtonIcon);\n      stopButtonContainer.appendChild(this.stopButton);\n      this.playedRevisionContainer.querySelector(\'.buttons\').appendChild(stopButtonContainer);\n      (_this$stopButton = this.stopButton) === null || _this$stopButton === void 0 ? void 0 : _this$stopButton.addEventListener(\'click\', this.stopCurrentRevision.bind(this));\n    }\n  }, {\n    key: "stopCurrentRevision",\n    value: function stopCurrentRevision(e) {\n      e.preventDefault();\n      var stop = e.target;\n      var playedSubjectContainer = stop.parentElement;\n      this.playedSubjectContainerChildren = (0,Tools/* createArray */.Ri)(playedSubjectContainer.children);\n      this.createModal("sure_modal", "\\n        <p>\\xCAtes-vous s\\xFBr que la revision de cette mati\\xE8re soit finie ?</p>\\n        <button class=\'sure\'>Oui, j\'en suis sur</button><button class=\'no\'>Annuler</button>\\n        ");\n      this.handleActionsInModalContent(true);\n    }\n    /**\r\n     * \r\n     * @param {number | null} interval \r\n     * @param {boolean} dataMustBeSentToserverInConfirmation\r\n     */\n\n  }, {\n    key: "handleActionsInModalContent",\n    value: function handleActionsInModalContent() {\n      var dataMustBeSentToserverInConfirmation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      this.timeInterval = interval;\n\n      _get(_getPrototypeOf(PlaySubjectRevisionDOMInteractions.prototype), "handleActionsInModalContent", this).call(this, null, dataMustBeSentToserverInConfirmation);\n    }\n  }, {\n    key: "processActionsWithoutSendingDataToServer",\n    value: function processActionsWithoutSendingDataToServer() {\n      clearInterval(this.timeInterval);\n      var playContainer = this.createElement(\'div\');\n      this.otherPlayButton = this.createElement(\'i\', \'fas fa-play revision-button other-revision-play\');\n      playContainer.appendChild(this.otherPlayButton);\n      this.pauseButton.replaceWith(playContainer);\n      this.pauseButton.removeEventListener(\'click\', this.handlePauseButtonClick);\n      this.resetTimeToHisDefaultValue();\n      this.closeModal();\n      pauseMomentDuring(this.pauseDurationInMinutes);\n      this.continueRevisionAfterPause();\n    }\n  }, {\n    key: "processSendingDataToServer",\n    value: function processSendingDataToServer() {\n      this.createDataToPostObj();\n      this.notificationClassName = \'stoped_revision_notification\';\n      this.postContentWithNotificationThenReload();\n      this.playedSubjectContainerChildren.forEach(function (child) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(child);\n      });\n    }\n  }, {\n    key: "resetTimeToHisDefaultValue",\n    value: function resetTimeToHisDefaultValue() {\n      this.time = this.defaultTimeValue;\n    }\n  }, {\n    key: "continueRevisionAfterPause",\n    value: function continueRevisionAfterPause() {\n      var _this3 = this;\n\n      setTimeout(function () {\n        if ((0,Tools/* isUndefined */.o8)(_this3.otherPlayButton)) {\n          _this3.playButton.addEventListener(\'click\', function () {\n            _this3.playButton.replaceWith(_this3.pauseButton);\n\n            _this3.playButton = undefined;\n\n            _this3.pomodoroInterval();\n\n            _this3.createChronometer(_this3.pomodoroDuration, _this3.timeForRevisionChrono);\n          });\n        } else {\n          _this3.otherPlayButton.addEventListener(\'click\', function () {\n            _this3.otherPlayButton.replaceWith(_this3.pauseButton);\n\n            _this3.otherPlayButton = undefined;\n\n            _this3.pomodoroInterval();\n\n            _this3.createChronometer(_this3.pomodoroDuration, _this3.timeForRevisionChrono);\n          });\n        }\n      }, 15000); // ON VA CHANGER LA FONCTION POUR QUE CETTE VALEUR SOIT DYNAMIQUE\n    }\n  }, {\n    key: "pomodoroInterval",\n    value: function pomodoroInterval() {\n      var _this4 = this;\n\n      var timeToStop = this.pomodoroDuration * 60;\n      this.interval = setInterval(function () {\n        _this4.time++;\n\n        if (_this4.time === timeToStop) {\n          _this4.createModal("pause_modal", "\\n                <p>C\'est le moment de faire une pause ! <span style=\'font-weight:bold;\'>Mettez une alarme de 5 min<span></p>\\n                <button class=\'sure\'>OK</button><button class=\'no\'>Annuler</button>\\n                ");\n\n          _this4.handleActionsInModalContent(false, _this4.interval);\n        }\n      }, 1000);\n    }\n  }, {\n    key: "createChronometer",\n    value: function createChronometer(duration, timeForStop) {\n      var _this5 = this;\n\n      var durationSeconds = duration * 60;\n      var innerCircular = this.createCircular(durationSeconds, timeForStop);\n      this.intervalOfChronometer = setInterval(function () {\n        durationSeconds--;\n        var minutesLeft = Math.floor(durationSeconds / 60);\n        var secondsLeft = durationSeconds % 60;\n        innerCircular.innerHTML = "<p id=\'chronometer\'>".concat(minutesLeft, ":").concat(secondsLeft, "</p>");\n\n        if (durationSeconds === timeForStop) {\n          (0,DOMTools/* removeElementFromDOM */.e5)(_this5.circular);\n          _this5.circular = undefined;\n          clearInterval(_this5.intervalOfChronometer);\n        }\n      }, 1000);\n    }\n  }, {\n    key: "createCircular",\n    value: function createCircular(durationSeconds, timeForStop) {\n      this.circular = this.createElement("div", "circular");\n      var inner = this.createElement("div", "inner");\n      var circle = this.createElement("div", "circle");\n      var leftBar = this.createElement("div", "bar left");\n      var right = this.createElement("div", "bar right");\n      var leftProgress = this.createElement("div", "progress");\n      var rightProgress = this.createElement("div", "progress");\n      this.playedRevisionInfosContainer.appendChild(this.circular);\n      this.circular.appendChild(inner);\n      this.circular.appendChild(circle);\n      circle.appendChild(leftBar);\n      circle.appendChild(right);\n      leftBar.appendChild(leftProgress);\n      right.appendChild(rightProgress);\n      leftProgress.style.animationDuration = (durationSeconds - timeForStop) / 2 + \'s\';\n      rightProgress.style.animationDelay = (durationSeconds - timeForStop) / 2 + \'s\';\n      rightProgress.style.animationDuration = (durationSeconds - timeForStop) / 2 + \'s\';\n      return inner;\n    }\n  }, {\n    key: "createDataToPostObj",\n    value: function createDataToPostObj() {\n      var _this6 = this;\n\n      var hiddenInputs;\n\n      if (this.playButton) {\n        hiddenInputs = this.playButton.parentElement.parentElement.parentElement.querySelectorAll("input[type=\'hidden\']");\n      } else if (this.otherPlayButton) {\n        hiddenInputs = this.otherPlayButton.parentElement.parentElement.parentElement.querySelectorAll("input[type=\'hidden\']");\n      } else {\n        hiddenInputs = this.pauseButton.parentElement.parentElement.parentElement.querySelectorAll("input[type=\'hidden\']");\n      }\n\n      hiddenInputs.forEach(function (hiddenInput) {\n        _this6.dataToPostObj[hiddenInput.name] = hiddenInput.value;\n      });\n      this.dataToPostObj["status"] = 1;\n    }\n  }, {\n    key: "checkForPauseButtonClick",\n    value: function checkForPauseButtonClick() {\n      var _this$pauseButton;\n\n      (_this$pauseButton = this.pauseButton) === null || _this$pauseButton === void 0 ? void 0 : _this$pauseButton.addEventListener(\'click\', this.handlePauseButtonClick.bind(this));\n    }\n  }, {\n    key: "handlePauseButtonClick",\n    value: function handlePauseButtonClick() {\n      clearInterval(this.interval);\n      clearInterval(this.intervalOfChronometer);\n      this.resetTimeToHisDefaultValue();\n      this.stopButton.removeEventListener(\'click\', this.stopCurrentRevision);\n\n      if (!(0,Tools/* isUndefined */.o8)(this.circular)) {\n        (0,DOMTools/* removeElementFromDOM */.e5)(this.circular);\n      }\n\n      var playButtonIcon = this.createElement(\'i\', \'fas fa-play revision-button other-revision-play\');\n      this.otherPlayButton = this.createElement(\'div\');\n      this.otherPlayButton.appendChild(playButtonIcon);\n      this.pauseButton.replaceWith(this.otherPlayButton);\n      pauseMomentDuring(this.pauseDurationInMinutes);\n      this.continueRevisionAfterPause();\n    }\n  }]);\n\n  return PlaySubjectRevisionDOMInteractions;\n}(ThereAreDataToSendWithGETRequest/* ThereAreDataToSendWithGETRequest */.F);\n\n\n;// CONCATENATED MODULE: ./src/playSubject.js\n\nvar domInteractions = new PlaySubjectRevisionDOMInteractions();\n/**\r\n * Lance la révision\r\n * @param {Event} e \r\n */\n\nfunction playSubject(e) {\n  e.preventDefault();\n  domInteractions.handlePlayButtonClick(e);\n  e.currentTarget.removeEventListener(\'click\', playSubject);\n}\n/**\r\n * @param {number} duration durée de la pause en minutes\r\n */\n\nfunction pauseMomentDuring(duration) {\n  var timeBeginInSeconds = 0;\n  var pauseDurationInSeconds = duration * 60;\n  domInteractions.createChronometer(duration, timeBeginInSeconds);\n  var intervalDuringPause = setInterval(function () {\n    timeBeginInSeconds++;\n\n    if (timeBeginInSeconds === pauseDurationInSeconds) {\n      clearInterval(intervalDuringPause);\n      domInteractions.createModal(\'notification\', "\\n            <p>La pause est termin\\xE9e !</p>\\n            <button class=\'ok\'>OK</button>\\n            ");\n      domInteractions.handleActionsInModalContent();\n    }\n  }, 1000);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODAyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7OztBQUlBO0FBQ0E7O0FBQUE7O0FBQ0E7O0FBREE7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBeEJBO0FBeUJBOzs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBelJBOzs7O0FDTkE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL0Fic3RyYWN0Q2xhc3Nlcy9QbGF5U3ViamVjdFJldmlzaW9uRE9NSW50ZXJhY3Rpb25zLmpzPzM1ZjYiLCJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3BsYXlTdWJqZWN0LmpzP2M1NjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0IH0gZnJvbSBcIi4uL0Z1bmN0aW9ucy9SZXF1ZXN0L2FqYXhcIjtcclxuaW1wb3J0IHsgcmVtb3ZlRWxlbWVudEZyb21ET00gfSBmcm9tIFwiLi4vRnVuY3Rpb25zL1Rvb2xzL0RPTVRvb2xzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUFycmF5LCBpc1VuZGVmaW5lZCB9IGZyb20gXCIuLi9GdW5jdGlvbnMvVG9vbHMvVG9vbHNcIjtcclxuaW1wb3J0IHBsYXlTdWJqZWN0LCB7IHBhdXNlTW9tZW50RHVyaW5nIH0gZnJvbSBcIi4uL3BsYXlTdWJqZWN0XCI7XHJcbmltcG9ydCB7IFRoZXJlQXJlRGF0YVRvU2VuZFdpdGhHRVRSZXF1ZXN0IH0gZnJvbSBcIi4vVGhlcmVBcmVEYXRhVG9TZW5kV2l0aEdFVFJlcXVlc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXlTdWJqZWN0UmV2aXNpb25ET01JbnRlcmFjdGlvbnMgZXh0ZW5kcyBUaGVyZUFyZURhdGFUb1NlbmRXaXRoR0VUUmVxdWVzdCB7XHJcbiAgICBmb3JtQWN0aW9uID0gXCIvc3RvcC1yZXZpc2lvblwiXHJcbiAgICBub3RpZmljYXRpb25DbGFzc05hbWUgPSAnc3ViamVjdC1yZXZpc2lvbi1zdG9wcGVkJ1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpIFxyXG4gICAgICAgIHRoaXMuYW5vdGhlclRpbWVCdXR0b25zXHJcbiAgICAgICAgdGhpcy5jaXJjdWxhclxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGxhIHZhbGV1ciBkdSB0ZW1wcyDDoCB0ID0gMCBjYWQgYXUgZMOpYnV0IHF1YW5kIGxhIHJldmlzaW9uIHZpZW50IGRlIGNvbW1lbmNlclxyXG4gICAgICAgICAqIExhIHbDqXJpdGFibGUgdmFsZXVyIGMnZXN0IDAgbWFpcyBsYSB2YWxldXIgYWN0dWVsbGUgZXN0IGp1c3RlIHBvdXIgbGVzIHRlc3RzXHJcbiAgICAgICAgICogQHZhciBkZWZhdWx0VGltZVZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kZWZhdWx0VGltZVZhbHVlID0gMTQ1MFxyXG4gICAgICAgIHRoaXMuaG9tZUNvbnRlbnRTZWN0aW9uXHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE9mQ2hyb25vbWV0ZXJcclxuICAgICAgICB0aGlzLnBhdXNlQnV0dG9uXHJcbiAgICAgICAgdGhpcy5wbGF5QnV0dG9uXHJcbiAgICAgICAgdGhpcy5vdGhlclBsYXlCdXR0b25cclxuICAgICAgICB0aGlzLnBsYXllZFJldmlzaW9uQ29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5wbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkJvZGllc1xyXG4gICAgICAgIHRoaXMucmV2aXNpb25IZWFkIFxyXG4gICAgICAgIHRoaXMuc3RvcEJ1dHRvblxyXG4gICAgICAgIHRoaXMudGltZSA9IHRoaXMuZGVmYXVsdFRpbWVWYWx1ZSBcclxuICAgICAgICB0aGlzLnRpbWVGb3JSZXZpc2lvbkNocm9ubyA9IHRoaXMuZGVmYXVsdFRpbWVWYWx1ZVxyXG4gICAgICAgIHRoaXMucG9tb2Rvcm9EdXJhdGlvbiA9IDI1IC8vIGluIG1pbnV0ZXNcclxuICAgICAgICB0aGlzLnBhdXNlRHVyYXRpb25Jbk1pbnV0ZXMgPSA1XHJcbiAgICAgICAgdGhpcy50aW1lSW50ZXJ2YWwgPSAwXHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlUGxheUJ1dHRvbkNsaWNrKGUpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5kZWNsYXJlSW5zdGFuY2VWYXIoZSlcclxuICAgICAgICB0aGlzLmFjdGl2ZVBsYXllZFJldmlzaW9uKClcclxuICAgICAgICB0aGlzLmNsaWNrT25Bbm90aGVyVGltZUJ1dHRvbigpXHJcbiAgICAgICAgdGhpcy5hcHBlbmROZXdCdXR0b25zKClcclxuICAgICAgICB0aGlzLnBvbW9kb3JvSW50ZXJ2YWwoKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQ2hyb25vbWV0ZXIodGhpcy5wb21vZG9yb0R1cmF0aW9uLCB0aGlzLnRpbWVGb3JSZXZpc2lvbkNocm9ubylcclxuICAgICAgICB0aGlzLmNoZWNrRm9yUGF1c2VCdXR0b25DbGljaygpXHJcbiAgICAgICAgZ2V0KFwiL2FycmF5LWNhbGVuZGFyLWNvbnRlbnRcIilcclxuICAgIH1cclxuXHJcbiAgICBkZWNsYXJlSW5zdGFuY2VWYXIoZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLnBsYXlCdXR0b24gPSBlLnRhcmdldFxyXG4gICAgICAgIHRoaXMuaG9tZUNvbnRlbnRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxyXG4gICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25Db250YWluZXIgPSB0aGlzLnBsYXlCdXR0b24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG4gICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgXCJwbGF5ZWQtcmV2aXNpb24tY29udGFpbmVyXCIpXHJcbiAgICAgICAgdGhpcy5ub3RwbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnLCBcIm5vdC1wbGF5ZWQtcmV2aXNpb24tY29udGFpbmVyXCIpXHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkhlYWQgPSB0aGlzLmhvbWVDb250ZW50U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucmV2aXNpb25faGVhZCcpXHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkhlYWRDbG9uZSA9IHRoaXMucmV2aXNpb25IZWFkIC5jbG9uZU5vZGUodHJ1ZSlcclxuICAgICAgICB0aGlzLnJldmlzaW9uQm9kaWVzID0gY3JlYXRlQXJyYXkodGhpcy5ob21lQ29udGVudFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLnJldmlzaW9uX2JvZHknKSlcclxuICAgICAgICB0aGlzLmFub3RoZXJUaW1lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbm90aGVyLXRpbWUtcmV2aXNpb24tYnV0dG9uJylcclxuICAgIH1cclxuXHJcbiAgICBhY3RpdmVQbGF5ZWRSZXZpc2lvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZXZpc2lvbkJvZGllcz8uZm9yRWFjaChyZXZpc2lvbkJvZHkgPT4ge1xyXG4gICAgICAgICAgICBpZihyZXZpc2lvbkJvZHkgIT09IHRoaXMucGxheWVkUmV2aXNpb25Db250YWluZXIpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RwbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucmV2aXNpb25IZWFkQ2xvbmUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdHBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIuYXBwZW5kQ2hpbGQocmV2aXNpb25Cb2R5KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ob21lQ29udGVudFNlY3Rpb24uYXBwZW5kQ2hpbGQodGhpcy5ub3RwbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJldmlzaW9uSGVhZClcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lci5hcHBlbmRDaGlsZChyZXZpc2lvbkJvZHkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvbWVDb250ZW50U2VjdGlvbi5hcHBlbmRDaGlsZCh0aGlzLnBsYXllZFJldmlzaW9uSW5mb3NDb250YWluZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wbGF5ZWRSZXZpc2lvbkluZm9zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1yZXZpc2lvbicpXHJcbiAgICAgICAgICAgIHRoaXMubm90cGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdub3QtYWN0aXZlLXJldmlzaW9ucycpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjbGlja09uQW5vdGhlclRpbWVCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuYW5vdGhlclRpbWVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kTmV3QnV0dG9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlUGxheVRvUGF1c2VCdXR0b24oKVxyXG4gICAgICAgIHRoaXMuYXBwZW5kU3RvcEJ1dHRvblRvQnV0dG9uc0dyb3VwVGhlbkxpc3RlblRvQ2xpY2soKVxyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VQbGF5VG9QYXVzZUJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHBsYXlDb250YWluZXIgPSB0aGlzLnBsYXlCdXR0b24ucGFyZW50RWxlbWVudFxyXG4gICAgICAgIGNvbnN0IHBhdXNlSWNvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnaScsICdmYXMgZmEtcGF1c2UgcmV2aXNpb24tYnV0dG9uIHJldmlzaW9uLXBhdXNlJylcclxuICAgICAgICB0aGlzLnBhdXNlQnV0dG9uID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHRoaXMucGF1c2VCdXR0b24uYXBwZW5kQ2hpbGQocGF1c2VJY29uKVxyXG4gICAgICAgIHBsYXlDb250YWluZXIucmVwbGFjZVdpdGgodGhpcy5wYXVzZUJ1dHRvbilcclxuICAgICAgICB0aGlzLnBsYXlCdXR0b24gPSB1bmRlZmluZWRcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRTdG9wQnV0dG9uVG9CdXR0b25zR3JvdXBUaGVuTGlzdGVuVG9DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHN0b3BCdXR0b25Db250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsICdzdG9wX2J1dHRvbicpXHJcbiAgICAgICAgbGV0IHN0b3BCdXR0b25JY29uID0gdGhpcy5jcmVhdGVFbGVtZW50KCdpJywgJ2ZhcyBmYS1zdG9wIHN0b3AnKVxyXG4gICAgICAgIHRoaXMuc3RvcEJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24uYXBwZW5kQ2hpbGQoc3RvcEJ1dHRvbkljb24pXHJcbiAgICAgICAgc3RvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnN0b3BCdXR0b24pXHJcbiAgICAgICAgdGhpcy5wbGF5ZWRSZXZpc2lvbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYnV0dG9ucycpLmFwcGVuZENoaWxkKHN0b3BCdXR0b25Db250YWluZXIpXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc3RvcEN1cnJlbnRSZXZpc2lvbi5iaW5kKHRoaXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHN0b3BDdXJyZW50UmV2aXNpb24oZSlcclxuICAgIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICAgICAgbGV0IHN0b3AgPSBlLnRhcmdldFxyXG4gICAgICAgIGxldCBwbGF5ZWRTdWJqZWN0Q29udGFpbmVyID0gc3RvcC5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgdGhpcy5wbGF5ZWRTdWJqZWN0Q29udGFpbmVyQ2hpbGRyZW4gPSBjcmVhdGVBcnJheShwbGF5ZWRTdWJqZWN0Q29udGFpbmVyLmNoaWxkcmVuKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlTW9kYWwoXCJzdXJlX21vZGFsXCIsIGBcclxuICAgICAgICA8cD7DinRlcy12b3VzIHPDu3IgcXVlIGxhIHJldmlzaW9uIGRlIGNldHRlIG1hdGnDqHJlIHNvaXQgZmluaWUgPzwvcD5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPSdzdXJlJz5PdWksIGonZW4gc3VpcyBzdXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSdubyc+QW5udWxlcjwvYnV0dG9uPlxyXG4gICAgICAgIGApXHJcbiAgICAgICAgdGhpcy5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQodHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBpbnRlcnZhbCBcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGF0YU11c3RCZVNlbnRUb3NlcnZlckluQ29uZmlybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUFjdGlvbnNJbk1vZGFsQ29udGVudChkYXRhTXVzdEJlU2VudFRvc2VydmVySW5Db25maXJtYXRpb24gPSBmYWxzZSwgaW50ZXJ2YWwgPSBudWxsKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudGltZUludGVydmFsID0gaW50ZXJ2YWxcclxuICAgICAgICBzdXBlci5oYW5kbGVBY3Rpb25zSW5Nb2RhbENvbnRlbnQobnVsbCwgZGF0YU11c3RCZVNlbnRUb3NlcnZlckluQ29uZmlybWF0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NBY3Rpb25zV2l0aG91dFNlbmRpbmdEYXRhVG9TZXJ2ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lSW50ZXJ2YWwpXHJcbiAgICAgICAgbGV0IHBsYXlDb250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgdGhpcy5vdGhlclBsYXlCdXR0b24gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2knLCAnZmFzIGZhLXBsYXkgcmV2aXNpb24tYnV0dG9uIG90aGVyLXJldmlzaW9uLXBsYXknKVxyXG4gICAgICAgIHBsYXlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5vdGhlclBsYXlCdXR0b24pXHJcbiAgICAgICAgdGhpcy5wYXVzZUJ1dHRvbi5yZXBsYWNlV2l0aChwbGF5Q29udGFpbmVyKVxyXG4gICAgICAgIHRoaXMucGF1c2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVBhdXNlQnV0dG9uQ2xpY2spXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5yZXNldFRpbWVUb0hpc0RlZmF1bHRWYWx1ZSgpXHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKClcclxuICAgICAgICBwYXVzZU1vbWVudER1cmluZyh0aGlzLnBhdXNlRHVyYXRpb25Jbk1pbnV0ZXMpXHJcbiAgICAgICAgdGhpcy5jb250aW51ZVJldmlzaW9uQWZ0ZXJQYXVzZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc1NlbmRpbmdEYXRhVG9TZXJ2ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlRGF0YVRvUG9zdE9iaigpXHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25DbGFzc05hbWUgPSAnc3RvcGVkX3JldmlzaW9uX25vdGlmaWNhdGlvbidcclxuICAgICAgICB0aGlzLnBvc3RDb250ZW50V2l0aE5vdGlmaWNhdGlvblRoZW5SZWxvYWQoKVxyXG4gICAgICAgIHRoaXMucGxheWVkU3ViamVjdENvbnRhaW5lckNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTShjaGlsZClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VGltZVRvSGlzRGVmYXVsdFZhbHVlKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnRpbWUgPSB0aGlzLmRlZmF1bHRUaW1lVmFsdWVcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29udGludWVSZXZpc2lvbkFmdGVyUGF1c2UoKXtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIGlmKGlzVW5kZWZpbmVkKHRoaXMub3RoZXJQbGF5QnV0dG9uKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheUJ1dHRvbi5yZXBsYWNlV2l0aCh0aGlzLnBhdXNlQnV0dG9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheUJ1dHRvbiA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9tb2Rvcm9JbnRlcnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVDaHJvbm9tZXRlcih0aGlzLnBvbW9kb3JvRHVyYXRpb24sIHRoaXMudGltZUZvclJldmlzaW9uQ2hyb25vKVxyXG4gICAgICAgICAgICAgICAgfSkgIFxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMub3RoZXJQbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvbi5yZXBsYWNlV2l0aCh0aGlzLnBhdXNlQnV0dG9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXJQbGF5QnV0dG9uID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb21vZG9yb0ludGVydmFsKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUNocm9ub21ldGVyKHRoaXMucG9tb2Rvcm9EdXJhdGlvbiwgdGhpcy50aW1lRm9yUmV2aXNpb25DaHJvbm8pXHJcbiAgICAgICAgICAgICAgICB9KSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9LCAxNTAwMCkgLy8gT04gVkEgQ0hBTkdFUiBMQSBGT05DVElPTiBQT1VSIFFVRSBDRVRURSBWQUxFVVIgU09JVCBEWU5BTUlRVUVcclxuICAgIH1cclxuXHJcbiAgICBwb21vZG9yb0ludGVydmFsKCl7XHJcbiAgICAgICAgbGV0IHRpbWVUb1N0b3AgPSB0aGlzLnBvbW9kb3JvRHVyYXRpb24gKiA2MFxyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLnRpbWUrK1xyXG4gICAgICAgICAgICBpZih0aGlzLnRpbWUgPT09IHRpbWVUb1N0b3Ape1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVNb2RhbChcInBhdXNlX21vZGFsXCIsIGBcclxuICAgICAgICAgICAgICAgIDxwPkMnZXN0IGxlIG1vbWVudCBkZSBmYWlyZSB1bmUgcGF1c2UgISA8c3BhbiBzdHlsZT0nZm9udC13ZWlnaHQ6Ym9sZDsnPk1ldHRleiB1bmUgYWxhcm1lIGRlIDUgbWluPHNwYW4+PC9wPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nc3VyZSc+T0s8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSdubyc+QW5udWxlcjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgYClcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQWN0aW9uc0luTW9kYWxDb250ZW50KGZhbHNlLCB0aGlzLmludGVydmFsKSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2hyb25vbWV0ZXIoZHVyYXRpb24sIHRpbWVGb3JTdG9wKXtcclxuICAgICAgICBsZXQgZHVyYXRpb25TZWNvbmRzID0gZHVyYXRpb24gKiA2MCBcclxuICAgICAgICBsZXQgaW5uZXJDaXJjdWxhciA9IHRoaXMuY3JlYXRlQ2lyY3VsYXIoZHVyYXRpb25TZWNvbmRzLCB0aW1lRm9yU3RvcClcclxuICAgIFxyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxPZkNocm9ub21ldGVyID0gc2V0SW50ZXJ2YWwoKCk9PntcclxuICAgICAgICAgICAgZHVyYXRpb25TZWNvbmRzLS1cclxuICAgICAgICAgICAgbGV0IG1pbnV0ZXNMZWZ0ID0gTWF0aC5mbG9vcihkdXJhdGlvblNlY29uZHMgLyA2MCkgXHJcbiAgICAgICAgICAgIGxldCBzZWNvbmRzTGVmdCA9IGR1cmF0aW9uU2Vjb25kcyAlIDYwXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbm5lckNpcmN1bGFyLmlubmVySFRNTCA9IGA8cCBpZD0nY2hyb25vbWV0ZXInPiR7bWludXRlc0xlZnR9OiR7c2Vjb25kc0xlZnR9PC9wPmBcclxuICAgICAgICAgICAgaWYoZHVyYXRpb25TZWNvbmRzID09PSB0aW1lRm9yU3RvcCl7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50RnJvbURPTSh0aGlzLmNpcmN1bGFyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaXJjdWxhciA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsT2ZDaHJvbm9tZXRlcilcclxuICAgICAgICAgICAgfSAgICAgIFxyXG4gICAgICAgIH0sIDEwMDApXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2lyY3VsYXIoZHVyYXRpb25TZWNvbmRzLCB0aW1lRm9yU3RvcClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNpcmN1bGFyID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiY2lyY3VsYXJcIilcclxuICAgICAgICBsZXQgaW5uZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJpbm5lclwiKVxyXG4gICAgICAgIGxldCBjaXJjbGUgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJjaXJjbGVcIilcclxuICAgICAgICBsZXQgbGVmdEJhciA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImJhciBsZWZ0XCIpXHJcbiAgICAgICAgbGV0IHJpZ2h0ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiYmFyIHJpZ2h0XCIpXHJcbiAgICAgICAgbGV0IGxlZnRQcm9ncmVzcyA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInByb2dyZXNzXCIpXHJcbiAgICAgICAgbGV0IHJpZ2h0UHJvZ3Jlc3MgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJwcm9ncmVzc1wiKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucGxheWVkUmV2aXNpb25JbmZvc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNpcmN1bGFyKVxyXG4gICAgICAgIHRoaXMuY2lyY3VsYXIuYXBwZW5kQ2hpbGQoaW5uZXIpXHJcbiAgICAgICAgdGhpcy5jaXJjdWxhci5hcHBlbmRDaGlsZChjaXJjbGUpXHJcblxyXG4gICAgICAgIGNpcmNsZS5hcHBlbmRDaGlsZChsZWZ0QmFyKVxyXG4gICAgICAgIGNpcmNsZS5hcHBlbmRDaGlsZChyaWdodClcclxuICAgICAgICBsZWZ0QmFyLmFwcGVuZENoaWxkKGxlZnRQcm9ncmVzcylcclxuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChyaWdodFByb2dyZXNzKVxyXG5cclxuICAgICAgICBsZWZ0UHJvZ3Jlc3Muc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSAoKGR1cmF0aW9uU2Vjb25kcyAtIHRpbWVGb3JTdG9wKSAvIDIpICsgJ3MnXHJcbiAgICAgICAgcmlnaHRQcm9ncmVzcy5zdHlsZS5hbmltYXRpb25EZWxheSA9ICgoZHVyYXRpb25TZWNvbmRzIC0gdGltZUZvclN0b3ApIC8gMikgKyAncydcclxuICAgICAgICByaWdodFByb2dyZXNzLnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gKChkdXJhdGlvblNlY29uZHMgLSB0aW1lRm9yU3RvcCkgLyAyKSArICdzJ1xyXG5cclxuICAgICAgICByZXR1cm4gaW5uZXJcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVEYXRhVG9Qb3N0T2JqKClcclxuICAgIHtcclxuICAgICAgICBsZXQgaGlkZGVuSW5wdXRzIFxyXG4gICAgICAgIGlmKHRoaXMucGxheUJ1dHRvbil7XHJcbiAgICAgICAgICAgIGhpZGRlbklucHV0cyA9IHRoaXMucGxheUJ1dHRvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT0naGlkZGVuJ11cIilcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLm90aGVyUGxheUJ1dHRvbil7XHJcbiAgICAgICAgICAgIGhpZGRlbklucHV0cyA9IHRoaXMub3RoZXJQbGF5QnV0dG9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFt0eXBlPSdoaWRkZW4nXVwiKVxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgaGlkZGVuSW5wdXRzID0gdGhpcy5wYXVzZUJ1dHRvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT0naGlkZGVuJ11cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaGlkZGVuSW5wdXRzLmZvckVhY2goaGlkZGVuSW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFUb1Bvc3RPYmpbaGlkZGVuSW5wdXQubmFtZV0gPSBoaWRkZW5JbnB1dC52YWx1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5kYXRhVG9Qb3N0T2JqW1wic3RhdHVzXCJdID0gMVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrRm9yUGF1c2VCdXR0b25DbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wYXVzZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVBhdXNlQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVQYXVzZUJ1dHRvbkNsaWNrKClcclxuICAgIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsT2ZDaHJvbm9tZXRlcilcclxuICAgICAgICB0aGlzLnJlc2V0VGltZVRvSGlzRGVmYXVsdFZhbHVlKClcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0b3BDdXJyZW50UmV2aXNpb24pXHJcbiAgICAgICAgaWYoIWlzVW5kZWZpbmVkKHRoaXMuY2lyY3VsYXIpKXtcclxuICAgICAgICAgICAgcmVtb3ZlRWxlbWVudEZyb21ET00odGhpcy5jaXJjdWxhcilcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHBsYXlCdXR0b25JY29uID0gdGhpcy5jcmVhdGVFbGVtZW50KCdpJywgJ2ZhcyBmYS1wbGF5IHJldmlzaW9uLWJ1dHRvbiBvdGhlci1yZXZpc2lvbi1wbGF5JylcclxuICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICB0aGlzLm90aGVyUGxheUJ1dHRvbi5hcHBlbmRDaGlsZChwbGF5QnV0dG9uSWNvbilcclxuICAgICAgICB0aGlzLnBhdXNlQnV0dG9uLnJlcGxhY2VXaXRoKHRoaXMub3RoZXJQbGF5QnV0dG9uKVxyXG4gICAgICAgIHBhdXNlTW9tZW50RHVyaW5nKHRoaXMucGF1c2VEdXJhdGlvbkluTWludXRlcylcclxuICAgICAgICB0aGlzLmNvbnRpbnVlUmV2aXNpb25BZnRlclBhdXNlKClcclxuICAgIH1cclxufSIsImltcG9ydCBQbGF5U3ViamVjdFJldmlzaW9uRE9NSW50ZXJhY3Rpb25zIGZyb20gXCIuL0Fic3RyYWN0Q2xhc3Nlcy9QbGF5U3ViamVjdFJldmlzaW9uRE9NSW50ZXJhY3Rpb25zXCJcclxuXHJcbmxldCBkb21JbnRlcmFjdGlvbnMgPSBuZXcgUGxheVN1YmplY3RSZXZpc2lvbkRPTUludGVyYWN0aW9ucygpXHJcblxyXG4vKipcclxuICogTGFuY2UgbGEgcsOpdmlzaW9uXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGUgXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbGF5U3ViamVjdChlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgZG9tSW50ZXJhY3Rpb25zLmhhbmRsZVBsYXlCdXR0b25DbGljayhlKVxyXG4gICAgZS5jdXJyZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheVN1YmplY3QpXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIGR1csOpZSBkZSBsYSBwYXVzZSBlbiBtaW51dGVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGF1c2VNb21lbnREdXJpbmcoZHVyYXRpb24pe1xyXG4gICAgbGV0IHRpbWVCZWdpbkluU2Vjb25kcyA9IDBcclxuICAgIGNvbnN0IHBhdXNlRHVyYXRpb25JblNlY29uZHMgPSBkdXJhdGlvbiAqIDYwXHJcbiAgICBcclxuICAgIGRvbUludGVyYWN0aW9ucy5jcmVhdGVDaHJvbm9tZXRlcihkdXJhdGlvbiwgdGltZUJlZ2luSW5TZWNvbmRzKVxyXG4gICAgY29uc3QgaW50ZXJ2YWxEdXJpbmdQYXVzZSA9IHNldEludGVydmFsKCgpPT57XHJcbiAgICAgICAgdGltZUJlZ2luSW5TZWNvbmRzKytcclxuICAgICAgICBpZih0aW1lQmVnaW5JblNlY29uZHMgPT09IHBhdXNlRHVyYXRpb25JblNlY29uZHMpe1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsRHVyaW5nUGF1c2UpXHJcbiAgICAgICAgICAgIGRvbUludGVyYWN0aW9ucy5jcmVhdGVNb2RhbCgnbm90aWZpY2F0aW9uJywgYFxyXG4gICAgICAgICAgICA8cD5MYSBwYXVzZSBlc3QgdGVybWluw6llICE8L3A+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J29rJz5PSzwvYnV0dG9uPlxyXG4gICAgICAgICAgICBgKVxyXG4gICAgICAgICAgICBkb21JbnRlcmFjdGlvbnMuaGFuZGxlQWN0aW9uc0luTW9kYWxDb250ZW50KClcclxuICAgICAgICB9XHJcbiAgICB9LCAxMDAwKVxyXG59XHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///802\n')}}]);